"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/reports/attendance/route";
exports.ids = ["app/api/reports/attendance/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "http2":
/*!************************!*\
  !*** external "http2" ***!
  \************************/
/***/ ((module) => {

module.exports = require("http2");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Freports%2Fattendance%2Froute&page=%2Fapi%2Freports%2Fattendance%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Freports%2Fattendance%2Froute.ts&appDir=%2FVolumes%2FMacintosh%20HD%20-%20Data%2Fsda%2Fsda-backend%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FVolumes%2FMacintosh%20HD%20-%20Data%2Fsda%2Fsda-backend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Freports%2Fattendance%2Froute&page=%2Fapi%2Freports%2Fattendance%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Freports%2Fattendance%2Froute.ts&appDir=%2FVolumes%2FMacintosh%20HD%20-%20Data%2Fsda%2Fsda-backend%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FVolumes%2FMacintosh%20HD%20-%20Data%2Fsda%2Fsda-backend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Volumes_Macintosh_HD_Data_sda_sda_backend_app_api_reports_attendance_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/reports/attendance/route.ts */ \"(rsc)/./app/api/reports/attendance/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/reports/attendance/route\",\n        pathname: \"/api/reports/attendance\",\n        filename: \"route\",\n        bundlePath: \"app/api/reports/attendance/route\"\n    },\n    resolvedPagePath: \"/Volumes/Macintosh HD - Data/sda/sda-backend/app/api/reports/attendance/route.ts\",\n    nextConfigOutput,\n    userland: _Volumes_Macintosh_HD_Data_sda_sda_backend_app_api_reports_attendance_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/reports/attendance/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZyZXBvcnRzJTJGYXR0ZW5kYW5jZSUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGcmVwb3J0cyUyRmF0dGVuZGFuY2UlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZyZXBvcnRzJTJGYXR0ZW5kYW5jZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZWb2x1bWVzJTJGTWFjaW50b3NoJTIwSEQlMjAtJTIwRGF0YSUyRnNkYSUyRnNkYS1iYWNrZW5kJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZWb2x1bWVzJTJGTWFjaW50b3NoJTIwSEQlMjAtJTIwRGF0YSUyRnNkYSUyRnNkYS1iYWNrZW5kJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNnQztBQUM3RztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3NkYS1iYWNrZW5kLz9jNjRjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Wb2x1bWVzL01hY2ludG9zaCBIRCAtIERhdGEvc2RhL3NkYS1iYWNrZW5kL2FwcC9hcGkvcmVwb3J0cy9hdHRlbmRhbmNlL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9yZXBvcnRzL2F0dGVuZGFuY2Uvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9yZXBvcnRzL2F0dGVuZGFuY2VcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3JlcG9ydHMvYXR0ZW5kYW5jZS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Wb2x1bWVzL01hY2ludG9zaCBIRCAtIERhdGEvc2RhL3NkYS1iYWNrZW5kL2FwcC9hcGkvcmVwb3J0cy9hdHRlbmRhbmNlL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9yZXBvcnRzL2F0dGVuZGFuY2Uvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Freports%2Fattendance%2Froute&page=%2Fapi%2Freports%2Fattendance%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Freports%2Fattendance%2Froute.ts&appDir=%2FVolumes%2FMacintosh%20HD%20-%20Data%2Fsda%2Fsda-backend%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FVolumes%2FMacintosh%20HD%20-%20Data%2Fsda%2Fsda-backend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/reports/attendance/route.ts":
/*!*********************************************!*\
  !*** ./app/api/reports/attendance/route.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var _lib_route__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/route */ \"(rsc)/./src/lib/route.ts\");\n/* harmony import */ var _controllers_report_controller__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/controllers/report.controller */ \"(rsc)/./src/controllers/report.controller.ts\");\n/* harmony import */ var _middlewares_report_middleware__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/middlewares/report.middleware */ \"(rsc)/./src/middlewares/report.middleware.ts\");\n\n\n\nconst GET = (0,_lib_route__WEBPACK_IMPORTED_MODULE_0__.createHandler)({\n    middlewares: [\n        _middlewares_report_middleware__WEBPACK_IMPORTED_MODULE_2__.reportAuthMiddleware,\n        _middlewares_report_middleware__WEBPACK_IMPORTED_MODULE_2__.reportQueryMiddleware\n    ],\n    controller: _controllers_report_controller__WEBPACK_IMPORTED_MODULE_1__.getAttendanceReportController\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3JlcG9ydHMvYXR0ZW5kYW5jZS9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTRDO0FBQ29DO0FBQ2M7QUFFdkYsTUFBTUksTUFBTUoseURBQWFBLENBQUM7SUFDL0JLLGFBQWE7UUFBQ0gsZ0ZBQW9CQTtRQUFFQyxpRkFBcUJBO0tBQUM7SUFDMURHLFlBQVlMLHlGQUE2QkE7QUFDM0MsR0FBRyIsInNvdXJjZXMiOlsid2VicGFjazovL3NkYS1iYWNrZW5kLy4vYXBwL2FwaS9yZXBvcnRzL2F0dGVuZGFuY2Uvcm91dGUudHM/NTFhOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVIYW5kbGVyIH0gZnJvbSBcIkAvbGliL3JvdXRlXCI7XG5pbXBvcnQgeyBnZXRBdHRlbmRhbmNlUmVwb3J0Q29udHJvbGxlciB9IGZyb20gXCJAL2NvbnRyb2xsZXJzL3JlcG9ydC5jb250cm9sbGVyXCI7XG5pbXBvcnQgeyByZXBvcnRBdXRoTWlkZGxld2FyZSwgcmVwb3J0UXVlcnlNaWRkbGV3YXJlIH0gZnJvbSBcIkAvbWlkZGxld2FyZXMvcmVwb3J0Lm1pZGRsZXdhcmVcIjtcblxuZXhwb3J0IGNvbnN0IEdFVCA9IGNyZWF0ZUhhbmRsZXIoe1xuICBtaWRkbGV3YXJlczogW3JlcG9ydEF1dGhNaWRkbGV3YXJlLCByZXBvcnRRdWVyeU1pZGRsZXdhcmVdLFxuICBjb250cm9sbGVyOiBnZXRBdHRlbmRhbmNlUmVwb3J0Q29udHJvbGxlcixcbn0pO1xuIl0sIm5hbWVzIjpbImNyZWF0ZUhhbmRsZXIiLCJnZXRBdHRlbmRhbmNlUmVwb3J0Q29udHJvbGxlciIsInJlcG9ydEF1dGhNaWRkbGV3YXJlIiwicmVwb3J0UXVlcnlNaWRkbGV3YXJlIiwiR0VUIiwibWlkZGxld2FyZXMiLCJjb250cm9sbGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/reports/attendance/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/controllers/report.controller.ts":
/*!**********************************************!*\
  !*** ./src/controllers/report.controller.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAttendanceReportController: () => (/* binding */ getAttendanceReportController)\n/* harmony export */ });\n/* harmony import */ var _services_report_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/services/report.service */ \"(rsc)/./src/services/report.service.ts\");\n\nconst buildFiltersFromQuery = (query)=>{\n    const filters = {};\n    if (query.districtId) {\n        filters.districtId = query.districtId;\n    }\n    if (query.churchId) {\n        filters.churchId = query.churchId;\n    }\n    if (query.sessionId) {\n        filters.sessionId = query.sessionId;\n    }\n    if (query.status) {\n        filters.status = query.status;\n    }\n    if (query.fromDate) {\n        filters.fromDate = query.fromDate;\n    }\n    if (query.toDate) {\n        filters.toDate = query.toDate;\n    }\n    return filters;\n};\nconst getAttendanceReportController = async (context)=>{\n    const query = context.queryData ?? {};\n    const filters = buildFiltersFromQuery(query);\n    const summary = await (0,_services_report_service__WEBPACK_IMPORTED_MODULE_0__.getAttendanceSummaryForUser)(context.user, filters);\n    if (query.groupBy === \"church\") {\n        const breakdown = await (0,_services_report_service__WEBPACK_IMPORTED_MODULE_0__.getAttendanceBreakdownByChurch)(context.user, filters);\n        return {\n            summary,\n            breakdown: {\n                groupBy: \"church\",\n                data: breakdown\n            }\n        };\n    }\n    if (query.groupBy === \"district\") {\n        const breakdown = await (0,_services_report_service__WEBPACK_IMPORTED_MODULE_0__.getAttendanceBreakdownByDistrict)(context.user, filters);\n        return {\n            summary,\n            breakdown: {\n                groupBy: \"district\",\n                data: breakdown\n            }\n        };\n    }\n    return {\n        summary\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29udHJvbGxlcnMvcmVwb3J0LmNvbnRyb2xsZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFNbUM7QUFZbkMsTUFBTUcsd0JBQXdCLENBQUNDO0lBQzdCLE1BQU1DLFVBQW9DLENBQUM7SUFFM0MsSUFBSUQsTUFBTUUsVUFBVSxFQUFFO1FBQ3BCRCxRQUFRQyxVQUFVLEdBQUdGLE1BQU1FLFVBQVU7SUFDdkM7SUFFQSxJQUFJRixNQUFNRyxRQUFRLEVBQUU7UUFDbEJGLFFBQVFFLFFBQVEsR0FBR0gsTUFBTUcsUUFBUTtJQUNuQztJQUVBLElBQUlILE1BQU1JLFNBQVMsRUFBRTtRQUNuQkgsUUFBUUcsU0FBUyxHQUFHSixNQUFNSSxTQUFTO0lBQ3JDO0lBRUEsSUFBSUosTUFBTUssTUFBTSxFQUFFO1FBQ2hCSixRQUFRSSxNQUFNLEdBQUdMLE1BQU1LLE1BQU07SUFDL0I7SUFFQSxJQUFJTCxNQUFNTSxRQUFRLEVBQUU7UUFDbEJMLFFBQVFLLFFBQVEsR0FBR04sTUFBTU0sUUFBUTtJQUNuQztJQUVBLElBQUlOLE1BQU1PLE1BQU0sRUFBRTtRQUNoQk4sUUFBUU0sTUFBTSxHQUFHUCxNQUFNTyxNQUFNO0lBQy9CO0lBRUEsT0FBT047QUFDVDtBQUVPLE1BQU1PLGdDQUFnQyxPQUMzQ0M7SUFFQSxNQUFNVCxRQUFRUyxRQUFRQyxTQUFTLElBQUksQ0FBQztJQUNwQyxNQUFNVCxVQUFVRixzQkFBc0JDO0lBRXRDLE1BQU1XLFVBQVUsTUFBTWIscUZBQTJCQSxDQUFDVyxRQUFRRyxJQUFJLEVBQUVYO0lBRWhFLElBQUlELE1BQU1hLE9BQU8sS0FBSyxVQUFVO1FBQzlCLE1BQU1DLFlBQVksTUFBTWxCLHdGQUE4QkEsQ0FBQ2EsUUFBUUcsSUFBSSxFQUFFWDtRQUNyRSxPQUFPO1lBQ0xVO1lBQ0FHLFdBQVc7Z0JBQ1RELFNBQVM7Z0JBQ1RFLE1BQU1EO1lBQ1I7UUFDRjtJQUNGO0lBRUEsSUFBSWQsTUFBTWEsT0FBTyxLQUFLLFlBQVk7UUFDaEMsTUFBTUMsWUFBWSxNQUFNakIsMEZBQWdDQSxDQUFDWSxRQUFRRyxJQUFJLEVBQUVYO1FBQ3ZFLE9BQU87WUFDTFU7WUFDQUcsV0FBVztnQkFDVEQsU0FBUztnQkFDVEUsTUFBTUQ7WUFDUjtRQUNGO0lBQ0Y7SUFFQSxPQUFPO1FBQUVIO0lBQVE7QUFDbkIsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3NkYS1iYWNrZW5kLy4vc3JjL2NvbnRyb2xsZXJzL3JlcG9ydC5jb250cm9sbGVyLnRzP2E5YmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBBdXRoZW50aWNhdGVkUXVlcnlDb250ZXh0IH0gZnJvbSBcIkAvbWlkZGxld2FyZXMvdHlwZXNcIjtcbmltcG9ydCB7XG4gIGdldEF0dGVuZGFuY2VCcmVha2Rvd25CeUNodXJjaCxcbiAgZ2V0QXR0ZW5kYW5jZUJyZWFrZG93bkJ5RGlzdHJpY3QsXG4gIGdldEF0dGVuZGFuY2VTdW1tYXJ5Rm9yVXNlcixcbiAgdHlwZSBBdHRlbmRhbmNlU3VtbWFyeUZpbHRlcnMsXG59IGZyb20gXCJAL3NlcnZpY2VzL3JlcG9ydC5zZXJ2aWNlXCI7XG5cbmV4cG9ydCB0eXBlIEF0dGVuZGFuY2VSZXBvcnRRdWVyeSA9IHtcbiAgZGlzdHJpY3RJZD86IHN0cmluZztcbiAgY2h1cmNoSWQ/OiBzdHJpbmc7XG4gIHNlc3Npb25JZD86IHN0cmluZztcbiAgc3RhdHVzPzogXCJQRU5ESU5HXCIgfCBcIkFQUFJPVkVEXCI7XG4gIGZyb21EYXRlPzogc3RyaW5nO1xuICB0b0RhdGU/OiBzdHJpbmc7XG4gIGdyb3VwQnk/OiBcImNodXJjaFwiIHwgXCJkaXN0cmljdFwiO1xufTtcblxuY29uc3QgYnVpbGRGaWx0ZXJzRnJvbVF1ZXJ5ID0gKHF1ZXJ5OiBBdHRlbmRhbmNlUmVwb3J0UXVlcnkpOiBBdHRlbmRhbmNlU3VtbWFyeUZpbHRlcnMgPT4ge1xuICBjb25zdCBmaWx0ZXJzOiBBdHRlbmRhbmNlU3VtbWFyeUZpbHRlcnMgPSB7fTtcblxuICBpZiAocXVlcnkuZGlzdHJpY3RJZCkge1xuICAgIGZpbHRlcnMuZGlzdHJpY3RJZCA9IHF1ZXJ5LmRpc3RyaWN0SWQ7XG4gIH1cblxuICBpZiAocXVlcnkuY2h1cmNoSWQpIHtcbiAgICBmaWx0ZXJzLmNodXJjaElkID0gcXVlcnkuY2h1cmNoSWQ7XG4gIH1cblxuICBpZiAocXVlcnkuc2Vzc2lvbklkKSB7XG4gICAgZmlsdGVycy5zZXNzaW9uSWQgPSBxdWVyeS5zZXNzaW9uSWQ7XG4gIH1cblxuICBpZiAocXVlcnkuc3RhdHVzKSB7XG4gICAgZmlsdGVycy5zdGF0dXMgPSBxdWVyeS5zdGF0dXM7XG4gIH1cblxuICBpZiAocXVlcnkuZnJvbURhdGUpIHtcbiAgICBmaWx0ZXJzLmZyb21EYXRlID0gcXVlcnkuZnJvbURhdGU7XG4gIH1cblxuICBpZiAocXVlcnkudG9EYXRlKSB7XG4gICAgZmlsdGVycy50b0RhdGUgPSBxdWVyeS50b0RhdGU7XG4gIH1cblxuICByZXR1cm4gZmlsdGVycztcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRBdHRlbmRhbmNlUmVwb3J0Q29udHJvbGxlciA9IGFzeW5jIChcbiAgY29udGV4dDogQXV0aGVudGljYXRlZFF1ZXJ5Q29udGV4dDxBdHRlbmRhbmNlUmVwb3J0UXVlcnk+LFxuKSA9PiB7XG4gIGNvbnN0IHF1ZXJ5ID0gY29udGV4dC5xdWVyeURhdGEgPz8ge307XG4gIGNvbnN0IGZpbHRlcnMgPSBidWlsZEZpbHRlcnNGcm9tUXVlcnkocXVlcnkpO1xuXG4gIGNvbnN0IHN1bW1hcnkgPSBhd2FpdCBnZXRBdHRlbmRhbmNlU3VtbWFyeUZvclVzZXIoY29udGV4dC51c2VyLCBmaWx0ZXJzKTtcblxuICBpZiAocXVlcnkuZ3JvdXBCeSA9PT0gXCJjaHVyY2hcIikge1xuICAgIGNvbnN0IGJyZWFrZG93biA9IGF3YWl0IGdldEF0dGVuZGFuY2VCcmVha2Rvd25CeUNodXJjaChjb250ZXh0LnVzZXIsIGZpbHRlcnMpO1xuICAgIHJldHVybiB7XG4gICAgICBzdW1tYXJ5LFxuICAgICAgYnJlYWtkb3duOiB7XG4gICAgICAgIGdyb3VwQnk6IFwiY2h1cmNoXCIgYXMgY29uc3QsXG4gICAgICAgIGRhdGE6IGJyZWFrZG93bixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIGlmIChxdWVyeS5ncm91cEJ5ID09PSBcImRpc3RyaWN0XCIpIHtcbiAgICBjb25zdCBicmVha2Rvd24gPSBhd2FpdCBnZXRBdHRlbmRhbmNlQnJlYWtkb3duQnlEaXN0cmljdChjb250ZXh0LnVzZXIsIGZpbHRlcnMpO1xuICAgIHJldHVybiB7XG4gICAgICBzdW1tYXJ5LFxuICAgICAgYnJlYWtkb3duOiB7XG4gICAgICAgIGdyb3VwQnk6IFwiZGlzdHJpY3RcIiBhcyBjb25zdCxcbiAgICAgICAgZGF0YTogYnJlYWtkb3duLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIHsgc3VtbWFyeSB9O1xufTtcbiJdLCJuYW1lcyI6WyJnZXRBdHRlbmRhbmNlQnJlYWtkb3duQnlDaHVyY2giLCJnZXRBdHRlbmRhbmNlQnJlYWtkb3duQnlEaXN0cmljdCIsImdldEF0dGVuZGFuY2VTdW1tYXJ5Rm9yVXNlciIsImJ1aWxkRmlsdGVyc0Zyb21RdWVyeSIsInF1ZXJ5IiwiZmlsdGVycyIsImRpc3RyaWN0SWQiLCJjaHVyY2hJZCIsInNlc3Npb25JZCIsInN0YXR1cyIsImZyb21EYXRlIiwidG9EYXRlIiwiZ2V0QXR0ZW5kYW5jZVJlcG9ydENvbnRyb2xsZXIiLCJjb250ZXh0IiwicXVlcnlEYXRhIiwic3VtbWFyeSIsInVzZXIiLCJncm91cEJ5IiwiYnJlYWtkb3duIiwiZGF0YSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/controllers/report.controller.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/env.ts":
/*!************************!*\
  !*** ./src/lib/env.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   env: () => (/* binding */ env)\n/* harmony export */ });\nconst requireEnv = (key)=>{\n    const value = process.env[key];\n    if (!value) {\n        throw new Error(`Missing required environment variable: ${key}`);\n    }\n    return value;\n};\nconst DEFAULT_ORIGIN = \"http://localhost:3000\";\nconst parseOrigins = (value)=>value.split(\",\").map((origin)=>origin.trim()).filter(Boolean);\nconst parsedOrigins = parseOrigins(process.env.CORS_ORIGIN ?? DEFAULT_ORIGIN);\nconst env = {\n    // Required\n    DATABASE_URL: requireEnv(\"DATABASE_URL\"),\n    JWT_SECRET: requireEnv(\"JWT_SECRET\"),\n    // Optional with defaults\n    SMS_API_KEY: process.env.SMS_API_KEY ?? \"\",\n    CORS_ORIGIN: process.env.CORS_ORIGIN ?? DEFAULT_ORIGIN,\n    PRIMARY_ORIGIN: parsedOrigins[0] ?? DEFAULT_ORIGIN,\n    TWILIO_ACCOUNT_SID: process.env.TWILIO_ACCOUNT_SID ?? \"\",\n    TWILIO_AUTH_TOKEN: process.env.TWILIO_AUTH_TOKEN ?? \"\",\n    TWILIO_FROM_NUMBER: process.env.TWILIO_FROM_NUMBER ?? \"\",\n    // Email configuration\n    GMAIL_USER: process.env.GMAIL_USER,\n    GMAIL_APP_PASSWORD: process.env.GMAIL_APP_PASSWORD,\n    GMAIL_FROM_NAME: process.env.GMAIL_FROM_NAME || \"Umuganda SDA\",\n    SMTP_HOST: process.env.SMTP_HOST || \"smtp.gmail.com\",\n    SMTP_PORT: process.env.SMTP_PORT || \"587\",\n    SMTP_SECURE: process.env.SMTP_SECURE || \"false\"\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2Vudi50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsTUFBTUEsYUFBYSxDQUFDQztJQUNsQixNQUFNQyxRQUFRQyxRQUFRQyxHQUFHLENBQUNILElBQUk7SUFDOUIsSUFBSSxDQUFDQyxPQUFPO1FBQ1YsTUFBTSxJQUFJRyxNQUFNLENBQUMsdUNBQXVDLEVBQUVKLElBQUksQ0FBQztJQUNqRTtJQUNBLE9BQU9DO0FBQ1Q7QUFtQkEsTUFBTUksaUJBQWlCO0FBRXZCLE1BQU1DLGVBQWUsQ0FBQ0wsUUFDcEJBLE1BQ0dNLEtBQUssQ0FBQyxLQUNOQyxHQUFHLENBQUMsQ0FBQ0MsU0FBV0EsT0FBT0MsSUFBSSxJQUMzQkMsTUFBTSxDQUFDQztBQUVaLE1BQU1DLGdCQUFnQlAsYUFBYUosUUFBUUMsR0FBRyxDQUFDVyxXQUFXLElBQUlUO0FBRXZELE1BQU1GLE1BQVc7SUFDdEIsV0FBVztJQUNYWSxjQUFjaEIsV0FBVztJQUN6QmlCLFlBQVlqQixXQUFXO0lBRXZCLHlCQUF5QjtJQUN6QmtCLGFBQWFmLFFBQVFDLEdBQUcsQ0FBQ2MsV0FBVyxJQUFJO0lBQ3hDSCxhQUFhWixRQUFRQyxHQUFHLENBQUNXLFdBQVcsSUFBSVQ7SUFDeENhLGdCQUFnQkwsYUFBYSxDQUFDLEVBQUUsSUFBSVI7SUFDcENjLG9CQUFvQmpCLFFBQVFDLEdBQUcsQ0FBQ2dCLGtCQUFrQixJQUFJO0lBQ3REQyxtQkFBbUJsQixRQUFRQyxHQUFHLENBQUNpQixpQkFBaUIsSUFBSTtJQUNwREMsb0JBQW9CbkIsUUFBUUMsR0FBRyxDQUFDa0Isa0JBQWtCLElBQUk7SUFFdEQsc0JBQXNCO0lBQ3RCQyxZQUFZcEIsUUFBUUMsR0FBRyxDQUFDbUIsVUFBVTtJQUNsQ0Msb0JBQW9CckIsUUFBUUMsR0FBRyxDQUFDb0Isa0JBQWtCO0lBQ2xEQyxpQkFBaUJ0QixRQUFRQyxHQUFHLENBQUNxQixlQUFlLElBQUk7SUFDaERDLFdBQVd2QixRQUFRQyxHQUFHLENBQUNzQixTQUFTLElBQUk7SUFDcENDLFdBQVd4QixRQUFRQyxHQUFHLENBQUN1QixTQUFTLElBQUk7SUFDcENDLGFBQWF6QixRQUFRQyxHQUFHLENBQUN3QixXQUFXLElBQUk7QUFDMUMsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3NkYS1iYWNrZW5kLy4vc3JjL2xpYi9lbnYudHM/ODQ4NSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCByZXF1aXJlRW52ID0gKGtleTogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgY29uc3QgdmFsdWUgPSBwcm9jZXNzLmVudltrZXldO1xuICBpZiAoIXZhbHVlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIHJlcXVpcmVkIGVudmlyb25tZW50IHZhcmlhYmxlOiAke2tleX1gKTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59O1xuXG50eXBlIEVudiA9IHtcbiAgREFUQUJBU0VfVVJMOiBzdHJpbmc7XG4gIEpXVF9TRUNSRVQ6IHN0cmluZztcbiAgU01TX0FQSV9LRVk6IHN0cmluZztcbiAgQ09SU19PUklHSU46IHN0cmluZztcbiAgUFJJTUFSWV9PUklHSU46IHN0cmluZztcbiAgVFdJTElPX0FDQ09VTlRfU0lEOiBzdHJpbmc7XG4gIFRXSUxJT19BVVRIX1RPS0VOOiBzdHJpbmc7XG4gIFRXSUxJT19GUk9NX05VTUJFUjogc3RyaW5nO1xuICBHTUFJTF9VU0VSPzogc3RyaW5nO1xuICBHTUFJTF9BUFBfUEFTU1dPUkQ/OiBzdHJpbmc7XG4gIEdNQUlMX0ZST01fTkFNRT86IHN0cmluZztcbiAgU01UUF9IT1NUPzogc3RyaW5nO1xuICBTTVRQX1BPUlQ/OiBzdHJpbmc7XG4gIFNNVFBfU0VDVVJFPzogc3RyaW5nO1xufTtcblxuY29uc3QgREVGQVVMVF9PUklHSU4gPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMFwiO1xuXG5jb25zdCBwYXJzZU9yaWdpbnMgPSAodmFsdWU6IHN0cmluZyk6IHN0cmluZ1tdID0+XG4gIHZhbHVlXG4gICAgLnNwbGl0KFwiLFwiKVxuICAgIC5tYXAoKG9yaWdpbikgPT4gb3JpZ2luLnRyaW0oKSlcbiAgICAuZmlsdGVyKEJvb2xlYW4pO1xuXG5jb25zdCBwYXJzZWRPcmlnaW5zID0gcGFyc2VPcmlnaW5zKHByb2Nlc3MuZW52LkNPUlNfT1JJR0lOID8/IERFRkFVTFRfT1JJR0lOKTtcblxuZXhwb3J0IGNvbnN0IGVudjogRW52ID0ge1xuICAvLyBSZXF1aXJlZFxuICBEQVRBQkFTRV9VUkw6IHJlcXVpcmVFbnYoXCJEQVRBQkFTRV9VUkxcIiksXG4gIEpXVF9TRUNSRVQ6IHJlcXVpcmVFbnYoXCJKV1RfU0VDUkVUXCIpLFxuICBcbiAgLy8gT3B0aW9uYWwgd2l0aCBkZWZhdWx0c1xuICBTTVNfQVBJX0tFWTogcHJvY2Vzcy5lbnYuU01TX0FQSV9LRVkgPz8gXCJcIixcbiAgQ09SU19PUklHSU46IHByb2Nlc3MuZW52LkNPUlNfT1JJR0lOID8/IERFRkFVTFRfT1JJR0lOLFxuICBQUklNQVJZX09SSUdJTjogcGFyc2VkT3JpZ2luc1swXSA/PyBERUZBVUxUX09SSUdJTixcbiAgVFdJTElPX0FDQ09VTlRfU0lEOiBwcm9jZXNzLmVudi5UV0lMSU9fQUNDT1VOVF9TSUQgPz8gXCJcIixcbiAgVFdJTElPX0FVVEhfVE9LRU46IHByb2Nlc3MuZW52LlRXSUxJT19BVVRIX1RPS0VOID8/IFwiXCIsXG4gIFRXSUxJT19GUk9NX05VTUJFUjogcHJvY2Vzcy5lbnYuVFdJTElPX0ZST01fTlVNQkVSID8/IFwiXCIsXG4gIFxuICAvLyBFbWFpbCBjb25maWd1cmF0aW9uXG4gIEdNQUlMX1VTRVI6IHByb2Nlc3MuZW52LkdNQUlMX1VTRVIsXG4gIEdNQUlMX0FQUF9QQVNTV09SRDogcHJvY2Vzcy5lbnYuR01BSUxfQVBQX1BBU1NXT1JELFxuICBHTUFJTF9GUk9NX05BTUU6IHByb2Nlc3MuZW52LkdNQUlMX0ZST01fTkFNRSB8fCAnVW11Z2FuZGEgU0RBJyxcbiAgU01UUF9IT1NUOiBwcm9jZXNzLmVudi5TTVRQX0hPU1QgfHwgJ3NtdHAuZ21haWwuY29tJyxcbiAgU01UUF9QT1JUOiBwcm9jZXNzLmVudi5TTVRQX1BPUlQgfHwgJzU4NycsXG4gIFNNVFBfU0VDVVJFOiBwcm9jZXNzLmVudi5TTVRQX1NFQ1VSRSB8fCAnZmFsc2UnLFxufTtcbiJdLCJuYW1lcyI6WyJyZXF1aXJlRW52Iiwia2V5IiwidmFsdWUiLCJwcm9jZXNzIiwiZW52IiwiRXJyb3IiLCJERUZBVUxUX09SSUdJTiIsInBhcnNlT3JpZ2lucyIsInNwbGl0IiwibWFwIiwib3JpZ2luIiwidHJpbSIsImZpbHRlciIsIkJvb2xlYW4iLCJwYXJzZWRPcmlnaW5zIiwiQ09SU19PUklHSU4iLCJEQVRBQkFTRV9VUkwiLCJKV1RfU0VDUkVUIiwiU01TX0FQSV9LRVkiLCJQUklNQVJZX09SSUdJTiIsIlRXSUxJT19BQ0NPVU5UX1NJRCIsIlRXSUxJT19BVVRIX1RPS0VOIiwiVFdJTElPX0ZST01fTlVNQkVSIiwiR01BSUxfVVNFUiIsIkdNQUlMX0FQUF9QQVNTV09SRCIsIkdNQUlMX0ZST01fTkFNRSIsIlNNVFBfSE9TVCIsIlNNVFBfUE9SVCIsIlNNVFBfU0VDVVJFIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/env.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/errors.ts":
/*!***************************!*\
  !*** ./src/lib/errors.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AppError: () => (/* binding */ AppError),\n/* harmony export */   ConflictError: () => (/* binding */ ConflictError),\n/* harmony export */   ForbiddenError: () => (/* binding */ ForbiddenError),\n/* harmony export */   NotFoundError: () => (/* binding */ NotFoundError),\n/* harmony export */   UnauthorizedError: () => (/* binding */ UnauthorizedError),\n/* harmony export */   ValidationError: () => (/* binding */ ValidationError),\n/* harmony export */   isAppError: () => (/* binding */ isAppError)\n/* harmony export */ });\nclass AppError extends Error {\n    constructor(message, status = 400, details){\n        super(message);\n        this.name = \"AppError\";\n        this.status = status;\n        this.details = details;\n    }\n}\nclass UnauthorizedError extends AppError {\n    constructor(message = \"Unauthorized\"){\n        super(message, 401);\n        this.name = \"UnauthorizedError\";\n    }\n}\nclass ForbiddenError extends AppError {\n    constructor(message = \"Forbidden\"){\n        super(message, 403);\n        this.name = \"ForbiddenError\";\n    }\n}\nclass NotFoundError extends AppError {\n    constructor(message = \"Resource not found\"){\n        super(message, 404);\n        this.name = \"NotFoundError\";\n    }\n}\nclass ConflictError extends AppError {\n    constructor(message = \"Conflict\"){\n        super(message, 409);\n        this.name = \"ConflictError\";\n    }\n}\nclass ValidationError extends AppError {\n    constructor(message = \"Validation failed\", details){\n        super(message, 422, details);\n        this.name = \"ValidationError\";\n    }\n}\nconst isAppError = (error)=>{\n    return error instanceof AppError;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2Vycm9ycy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQU8sTUFBTUEsaUJBQWlCQztJQUk1QkMsWUFBWUMsT0FBZSxFQUFFQyxTQUFTLEdBQUcsRUFBRUMsT0FBaUIsQ0FBRTtRQUM1RCxLQUFLLENBQUNGO1FBQ04sSUFBSSxDQUFDRyxJQUFJLEdBQUc7UUFDWixJQUFJLENBQUNGLE1BQU0sR0FBR0E7UUFDZCxJQUFJLENBQUNDLE9BQU8sR0FBR0E7SUFDakI7QUFDRjtBQUVPLE1BQU1FLDBCQUEwQlA7SUFDckNFLFlBQVlDLFVBQVUsY0FBYyxDQUFFO1FBQ3BDLEtBQUssQ0FBQ0EsU0FBUztRQUNmLElBQUksQ0FBQ0csSUFBSSxHQUFHO0lBQ2Q7QUFDRjtBQUVPLE1BQU1FLHVCQUF1QlI7SUFDbENFLFlBQVlDLFVBQVUsV0FBVyxDQUFFO1FBQ2pDLEtBQUssQ0FBQ0EsU0FBUztRQUNmLElBQUksQ0FBQ0csSUFBSSxHQUFHO0lBQ2Q7QUFDRjtBQUVPLE1BQU1HLHNCQUFzQlQ7SUFDakNFLFlBQVlDLFVBQVUsb0JBQW9CLENBQUU7UUFDMUMsS0FBSyxDQUFDQSxTQUFTO1FBQ2YsSUFBSSxDQUFDRyxJQUFJLEdBQUc7SUFDZDtBQUNGO0FBRU8sTUFBTUksc0JBQXNCVjtJQUNqQ0UsWUFBWUMsVUFBVSxVQUFVLENBQUU7UUFDaEMsS0FBSyxDQUFDQSxTQUFTO1FBQ2YsSUFBSSxDQUFDRyxJQUFJLEdBQUc7SUFDZDtBQUNGO0FBRU8sTUFBTUssd0JBQXdCWDtJQUNuQ0UsWUFBWUMsVUFBVSxtQkFBbUIsRUFBRUUsT0FBaUIsQ0FBRTtRQUM1RCxLQUFLLENBQUNGLFNBQVMsS0FBS0U7UUFDcEIsSUFBSSxDQUFDQyxJQUFJLEdBQUc7SUFDZDtBQUNGO0FBRU8sTUFBTU0sYUFBYSxDQUFDQztJQUN6QixPQUFPQSxpQkFBaUJiO0FBQzFCLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZGEtYmFja2VuZC8uL3NyYy9saWIvZXJyb3JzLnRzPzQ1MWEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIEFwcEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBzdGF0dXM6IG51bWJlcjtcbiAgZGV0YWlscz86IHVua25vd247XG5cbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBzdGF0dXMgPSA0MDAsIGRldGFpbHM/OiB1bmtub3duKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5uYW1lID0gXCJBcHBFcnJvclwiO1xuICAgIHRoaXMuc3RhdHVzID0gc3RhdHVzO1xuICAgIHRoaXMuZGV0YWlscyA9IGRldGFpbHM7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFVuYXV0aG9yaXplZEVycm9yIGV4dGVuZHMgQXBwRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlID0gXCJVbmF1dGhvcml6ZWRcIikge1xuICAgIHN1cGVyKG1lc3NhZ2UsIDQwMSk7XG4gICAgdGhpcy5uYW1lID0gXCJVbmF1dGhvcml6ZWRFcnJvclwiO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBGb3JiaWRkZW5FcnJvciBleHRlbmRzIEFwcEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZSA9IFwiRm9yYmlkZGVuXCIpIHtcbiAgICBzdXBlcihtZXNzYWdlLCA0MDMpO1xuICAgIHRoaXMubmFtZSA9IFwiRm9yYmlkZGVuRXJyb3JcIjtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgTm90Rm91bmRFcnJvciBleHRlbmRzIEFwcEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZSA9IFwiUmVzb3VyY2Ugbm90IGZvdW5kXCIpIHtcbiAgICBzdXBlcihtZXNzYWdlLCA0MDQpO1xuICAgIHRoaXMubmFtZSA9IFwiTm90Rm91bmRFcnJvclwiO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb25mbGljdEVycm9yIGV4dGVuZHMgQXBwRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlID0gXCJDb25mbGljdFwiKSB7XG4gICAgc3VwZXIobWVzc2FnZSwgNDA5KTtcbiAgICB0aGlzLm5hbWUgPSBcIkNvbmZsaWN0RXJyb3JcIjtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgVmFsaWRhdGlvbkVycm9yIGV4dGVuZHMgQXBwRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlID0gXCJWYWxpZGF0aW9uIGZhaWxlZFwiLCBkZXRhaWxzPzogdW5rbm93bikge1xuICAgIHN1cGVyKG1lc3NhZ2UsIDQyMiwgZGV0YWlscyk7XG4gICAgdGhpcy5uYW1lID0gXCJWYWxpZGF0aW9uRXJyb3JcIjtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgaXNBcHBFcnJvciA9IChlcnJvcjogdW5rbm93bik6IGVycm9yIGlzIEFwcEVycm9yID0+IHtcbiAgcmV0dXJuIGVycm9yIGluc3RhbmNlb2YgQXBwRXJyb3I7XG59O1xuIl0sIm5hbWVzIjpbIkFwcEVycm9yIiwiRXJyb3IiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJkZXRhaWxzIiwibmFtZSIsIlVuYXV0aG9yaXplZEVycm9yIiwiRm9yYmlkZGVuRXJyb3IiLCJOb3RGb3VuZEVycm9yIiwiQ29uZmxpY3RFcnJvciIsIlZhbGlkYXRpb25FcnJvciIsImlzQXBwRXJyb3IiLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/errors.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/http.ts":
/*!*************************!*\
  !*** ./src/lib/http.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handleRequest: () => (/* binding */ handleRequest),\n/* harmony export */   jsonResponse: () => (/* binding */ jsonResponse)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/ZodError.js\");\n/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/errors */ \"(rsc)/./src/lib/errors.ts\");\n/* harmony import */ var _lib_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/env */ \"(rsc)/./src/lib/env.ts\");\n\n\n\n\nconst jsonResponse = (data, init)=>{\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(data, init);\n};\nconst handleRequest = async (req, handler)=>{\n    // Handle preflight requests\n    if (req.method === \"OPTIONS\") {\n        const response = new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(null, {\n            status: 204\n        });\n        return applyCors(response, req);\n    }\n    try {\n        const data = await handler();\n        let response;\n        if (data instanceof next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse) {\n            response = data;\n        } else {\n            response = jsonResponse({\n                data\n            });\n        }\n        // Ensure CORS is applied to successful responses\n        return applyCors(response, req);\n    } catch (err) {\n        const error = err;\n        let response;\n        if (error instanceof zod__WEBPACK_IMPORTED_MODULE_3__.ZodError) {\n            const validationError = new _lib_errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError(\"Validation failed\", error.flatten());\n            response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: validationError.message,\n                details: validationError.details\n            }, {\n                status: validationError.status\n            });\n        } else if ((0,_lib_errors__WEBPACK_IMPORTED_MODULE_1__.isAppError)(error)) {\n            response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: error.message,\n                details: error.details\n            }, {\n                status: error.status\n            });\n        } else if (error instanceof Error) {\n            console.error(error);\n            response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Internal Server Error\"\n            }, {\n                status: 500\n            });\n        } else {\n            console.error(\"Unknown error\", error);\n            response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Internal Server Error\"\n            }, {\n                status: 500\n            });\n        }\n        // Ensure CORS is applied to error responses\n        return applyCors(response, req);\n    }\n};\nconst stripQuotes = (origin)=>origin.replace(/^\"|\"$/g, \"\").replace(/^'|'$/g, \"\");\nconst normalizeOrigin = (origin)=>stripQuotes(origin).replace(/\\/$/, \"\");\nconst parseAllowedOrigins = ()=>{\n    if (!_lib_env__WEBPACK_IMPORTED_MODULE_2__.env.CORS_ORIGIN) {\n        return [];\n    }\n    return _lib_env__WEBPACK_IMPORTED_MODULE_2__.env.CORS_ORIGIN.split(\",\").map((value)=>value.trim()).filter(Boolean).map((value)=>normalizeOrigin(value));\n};\nconst applyCors = (response, request)=>{\n    const allowedOrigins = parseAllowedOrigins();\n    if (!allowedOrigins.length) {\n        return response;\n    }\n    const requestOriginHeader = request?.headers.get(\"origin\") ?? null;\n    const requestOrigin = requestOriginHeader ? normalizeOrigin(requestOriginHeader) : null;\n    if (true) {\n        console.log(\"[cors] request origin:\", requestOrigin, \"allowed origins:\", allowedOrigins);\n    }\n    let allowOrigin = null;\n    if (requestOrigin && allowedOrigins.includes(requestOrigin)) {\n        allowOrigin = requestOrigin;\n    } else if (requestOrigin && allowedOrigins.includes(\"*\")) {\n        allowOrigin = requestOrigin;\n    } else if (allowedOrigins.length === 1) {\n        allowOrigin = allowedOrigins[0];\n    }\n    if (!allowOrigin && allowedOrigins.length) {\n        allowOrigin = allowedOrigins[0];\n    }\n    if (true) {\n        console.log(\"[cors] resolved allowOrigin:\", allowOrigin);\n    }\n    if (!allowOrigin) {\n        return response;\n    }\n    response.headers.set(\"Access-Control-Allow-Origin\", allowOrigin);\n    if (true) {\n        console.log(\"[cors] setting Access-Control-Allow-Origin=\", allowOrigin);\n    }\n    const requestedHeaders = request?.headers.get(\"access-control-request-headers\");\n    response.headers.set(\"Access-Control-Allow-Methods\", \"GET,POST,PUT,PATCH,DELETE,OPTIONS\");\n    response.headers.set(\"Access-Control-Allow-Headers\", requestedHeaders && requestedHeaders.length ? requestedHeaders : \"Content-Type,Authorization,Accept\");\n    response.headers.set(\"Access-Control-Allow-Credentials\", \"true\");\n    response.headers.set(\"Access-Control-Max-Age\", \"600\");\n    response.headers.set(\"Vary\", \"Origin\");\n    return response;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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MDgzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xuaW1wb3J0IHsgWm9kRXJyb3IgfSBmcm9tIFwiem9kXCI7XG5cbmltcG9ydCB7IEFwcEVycm9yLCBpc0FwcEVycm9yLCBWYWxpZGF0aW9uRXJyb3IgfSBmcm9tIFwiQC9saWIvZXJyb3JzXCI7XG5pbXBvcnQgeyBlbnYgfSBmcm9tIFwiQC9saWIvZW52XCI7XG5cbmludGVyZmFjZSBIYW5kbGVyRm48UmV0dXJuVHlwZT4ge1xuICAoKTogUHJvbWlzZTxSZXR1cm5UeXBlPjtcbn1cblxuZXhwb3J0IGNvbnN0IGpzb25SZXNwb25zZSA9IDxUPihkYXRhOiBULCBpbml0PzogUmVzcG9uc2VJbml0KSA9PiB7XG4gIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihkYXRhLCBpbml0KTtcbn07XG5cbmV4cG9ydCBjb25zdCBoYW5kbGVSZXF1ZXN0ID0gYXN5bmMgPFQ+KHJlcTogUmVxdWVzdCwgaGFuZGxlcjogSGFuZGxlckZuPFQ+KSA9PiB7XG4gIC8vIEhhbmRsZSBwcmVmbGlnaHQgcmVxdWVzdHNcbiAgaWYgKHJlcS5tZXRob2QgPT09IFwiT1BUSU9OU1wiKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBuZXcgTmV4dFJlc3BvbnNlKG51bGwsIHsgc3RhdHVzOiAyMDQgfSk7XG4gICAgcmV0dXJuIGFwcGx5Q29ycyhyZXNwb25zZSwgcmVxKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGhhbmRsZXIoKTtcbiAgICBsZXQgcmVzcG9uc2U6IE5leHRSZXNwb25zZTtcbiAgICBcbiAgICBpZiAoZGF0YSBpbnN0YW5jZW9mIE5leHRSZXNwb25zZSkge1xuICAgICAgcmVzcG9uc2UgPSBkYXRhO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNwb25zZSA9IGpzb25SZXNwb25zZSh7IGRhdGEgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIEVuc3VyZSBDT1JTIGlzIGFwcGxpZWQgdG8gc3VjY2Vzc2Z1bCByZXNwb25zZXNcbiAgICByZXR1cm4gYXBwbHlDb3JzKHJlc3BvbnNlLCByZXEpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zdCBlcnJvciA9IGVyciBhcyB1bmtub3duO1xuICAgIGxldCByZXNwb25zZTogTmV4dFJlc3BvbnNlO1xuXG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgWm9kRXJyb3IpIHtcbiAgICAgIGNvbnN0IHZhbGlkYXRpb25FcnJvciA9IG5ldyBWYWxpZGF0aW9uRXJyb3IoXCJWYWxpZGF0aW9uIGZhaWxlZFwiLCBlcnJvci5mbGF0dGVuKCkpO1xuICAgICAgcmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAge1xuICAgICAgICAgIGVycm9yOiB2YWxpZGF0aW9uRXJyb3IubWVzc2FnZSxcbiAgICAgICAgICBkZXRhaWxzOiB2YWxpZGF0aW9uRXJyb3IuZGV0YWlscyxcbiAgICAgICAgfSxcbiAgICAgICAgeyBzdGF0dXM6IHZhbGlkYXRpb25FcnJvci5zdGF0dXMgfSxcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmIChpc0FwcEVycm9yKGVycm9yKSkge1xuICAgICAgcmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAge1xuICAgICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICAgIGRldGFpbHM6IGVycm9yLmRldGFpbHMsXG4gICAgICAgIH0sXG4gICAgICAgIHsgc3RhdHVzOiBlcnJvci5zdGF0dXMgfSxcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIHJlc3BvbnNlID0gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3InIH0sXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfSxcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJVbmtub3duIGVycm9yXCIsIGVycm9yKTtcbiAgICAgIHJlc3BvbnNlID0gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3InIH0sXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfSxcbiAgICAgICk7XG4gICAgfVxuICAgIFxuICAgIC8vIEVuc3VyZSBDT1JTIGlzIGFwcGxpZWQgdG8gZXJyb3IgcmVzcG9uc2VzXG4gICAgcmV0dXJuIGFwcGx5Q29ycyhyZXNwb25zZSwgcmVxKTtcbiAgfVxufTtcblxuY29uc3Qgc3RyaXBRdW90ZXMgPSAob3JpZ2luOiBzdHJpbmcpID0+IG9yaWdpbi5yZXBsYWNlKC9eXCJ8XCIkL2csIFwiXCIpLnJlcGxhY2UoL14nfCckL2csIFwiXCIpO1xuXG5jb25zdCBub3JtYWxpemVPcmlnaW4gPSAob3JpZ2luOiBzdHJpbmcpID0+IHN0cmlwUXVvdGVzKG9yaWdpbikucmVwbGFjZSgvXFwvJC8sIFwiXCIpO1xuXG5jb25zdCBwYXJzZUFsbG93ZWRPcmlnaW5zID0gKCkgPT4ge1xuICBpZiAoIWVudi5DT1JTX09SSUdJTikge1xuICAgIHJldHVybiBbXSBhcyBzdHJpbmdbXTtcbiAgfVxuXG4gIHJldHVybiBlbnYuQ09SU19PUklHSU4uc3BsaXQoXCIsXCIpXG4gICAgLm1hcCgodmFsdWUpID0+IHZhbHVlLnRyaW0oKSlcbiAgICAuZmlsdGVyKEJvb2xlYW4pXG4gICAgLm1hcCgodmFsdWUpID0+IG5vcm1hbGl6ZU9yaWdpbih2YWx1ZSkpO1xufTtcblxuY29uc3QgYXBwbHlDb3JzID0gKHJlc3BvbnNlOiBOZXh0UmVzcG9uc2UsIHJlcXVlc3Q/OiBSZXF1ZXN0KSA9PiB7XG4gIGNvbnN0IGFsbG93ZWRPcmlnaW5zID0gcGFyc2VBbGxvd2VkT3JpZ2lucygpO1xuXG4gIGlmICghYWxsb3dlZE9yaWdpbnMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9XG5cbiAgY29uc3QgcmVxdWVzdE9yaWdpbkhlYWRlciA9IHJlcXVlc3Q/LmhlYWRlcnMuZ2V0KFwib3JpZ2luXCIpID8/IG51bGw7XG4gIGNvbnN0IHJlcXVlc3RPcmlnaW4gPSByZXF1ZXN0T3JpZ2luSGVhZGVyID8gbm9ybWFsaXplT3JpZ2luKHJlcXVlc3RPcmlnaW5IZWFkZXIpIDogbnVsbDtcblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgY29uc29sZS5sb2coXCJbY29yc10gcmVxdWVzdCBvcmlnaW46XCIsIHJlcXVlc3RPcmlnaW4sIFwiYWxsb3dlZCBvcmlnaW5zOlwiLCBhbGxvd2VkT3JpZ2lucyk7XG4gIH1cblxuICBsZXQgYWxsb3dPcmlnaW46IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXG4gIGlmIChyZXF1ZXN0T3JpZ2luICYmIGFsbG93ZWRPcmlnaW5zLmluY2x1ZGVzKHJlcXVlc3RPcmlnaW4pKSB7XG4gICAgYWxsb3dPcmlnaW4gPSByZXF1ZXN0T3JpZ2luO1xuICB9IGVsc2UgaWYgKHJlcXVlc3RPcmlnaW4gJiYgYWxsb3dlZE9yaWdpbnMuaW5jbHVkZXMoXCIqXCIpKSB7XG4gICAgYWxsb3dPcmlnaW4gPSByZXF1ZXN0T3JpZ2luO1xuICB9IGVsc2UgaWYgKGFsbG93ZWRPcmlnaW5zLmxlbmd0aCA9PT0gMSkge1xuICAgIGFsbG93T3JpZ2luID0gYWxsb3dlZE9yaWdpbnNbMF07XG4gIH1cblxuICBpZiAoIWFsbG93T3JpZ2luICYmIGFsbG93ZWRPcmlnaW5zLmxlbmd0aCkge1xuICAgIGFsbG93T3JpZ2luID0gYWxsb3dlZE9yaWdpbnNbMF07XG4gIH1cblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgY29uc29sZS5sb2coXCJbY29yc10gcmVzb2x2ZWQgYWxsb3dPcmlnaW46XCIsIGFsbG93T3JpZ2luKTtcbiAgfVxuXG4gIGlmICghYWxsb3dPcmlnaW4pIHtcbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH1cblxuICByZXNwb25zZS5oZWFkZXJzLnNldChcIkFjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpblwiLCBhbGxvd09yaWdpbik7XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgIGNvbnNvbGUubG9nKFwiW2NvcnNdIHNldHRpbmcgQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luPVwiLCBhbGxvd09yaWdpbik7XG4gIH1cbiAgY29uc3QgcmVxdWVzdGVkSGVhZGVycyA9IHJlcXVlc3Q/LmhlYWRlcnMuZ2V0KFwiYWNjZXNzLWNvbnRyb2wtcmVxdWVzdC1oZWFkZXJzXCIpO1xuXG4gIHJlc3BvbnNlLmhlYWRlcnMuc2V0KFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kc1wiLCBcIkdFVCxQT1NULFBVVCxQQVRDSCxERUxFVEUsT1BUSU9OU1wiKTtcbiAgcmVzcG9uc2UuaGVhZGVycy5zZXQoXG4gICAgXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzXCIsXG4gICAgcmVxdWVzdGVkSGVhZGVycyAmJiByZXF1ZXN0ZWRIZWFkZXJzLmxlbmd0aFxuICAgICAgPyByZXF1ZXN0ZWRIZWFkZXJzXG4gICAgICA6IFwiQ29udGVudC1UeXBlLEF1dGhvcml6YXRpb24sQWNjZXB0XCIsXG4gICk7XG4gIHJlc3BvbnNlLmhlYWRlcnMuc2V0KFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctQ3JlZGVudGlhbHNcIiwgXCJ0cnVlXCIpO1xuICByZXNwb25zZS5oZWFkZXJzLnNldChcIkFjY2Vzcy1Db250cm9sLU1heC1BZ2VcIiwgXCI2MDBcIik7XG4gIHJlc3BvbnNlLmhlYWRlcnMuc2V0KFwiVmFyeVwiLCBcIk9yaWdpblwiKTtcblxuICByZXR1cm4gcmVzcG9uc2U7XG59O1xuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIlpvZEVycm9yIiwiaXNBcHBFcnJvciIsIlZhbGlkYXRpb25FcnJvciIsImVudiIsImpzb25SZXNwb25zZSIsImRhdGEiLCJpbml0IiwianNvbiIsImhhbmRsZVJlcXVlc3QiLCJyZXEiLCJoYW5kbGVyIiwibWV0aG9kIiwicmVzcG9uc2UiLCJzdGF0dXMiLCJhcHBseUNvcnMiLCJlcnIiLCJlcnJvciIsInZhbGlkYXRpb25FcnJvciIsImZsYXR0ZW4iLCJtZXNzYWdlIiwiZGV0YWlscyIsIkVycm9yIiwiY29uc29sZSIsInN0cmlwUXVvdGVzIiwib3JpZ2luIiwicmVwbGFjZSIsIm5vcm1hbGl6ZU9yaWdpbiIsInBhcnNlQWxsb3dlZE9yaWdpbnMiLCJDT1JTX09SSUdJTiIsInNwbGl0IiwibWFwIiwidmFsdWUiLCJ0cmltIiwiZmlsdGVyIiwiQm9vbGVhbiIsInJlcXVlc3QiLCJhbGxvd2VkT3JpZ2lucyIsImxlbmd0aCIsInJlcXVlc3RPcmlnaW5IZWFkZXIiLCJoZWFkZXJzIiwiZ2V0IiwicmVxdWVzdE9yaWdpbiIsInByb2Nlc3MiLCJsb2ciLCJhbGxvd09yaWdpbiIsImluY2x1ZGVzIiwic2V0IiwicmVxdWVzdGVkSGVhZGVycyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/http.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log:  true ? [\n        \"query\",\n        \"error\",\n        \"warn\"\n    ] : 0\n});\nif (true) {\n    globalForPrisma.prisma = prisma;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBOEM7QUFFOUMsTUFBTUMsa0JBQWtCQztBQUlqQixNQUFNQyxTQUNYRixnQkFBZ0JFLE1BQU0sSUFDdEIsSUFBSUgsd0RBQVlBLENBQUM7SUFDZkksS0FBS0MsS0FBc0MsR0FBRztRQUFDO1FBQVM7UUFBUztLQUFPLEdBQUcsQ0FBUztBQUN0RixHQUFHO0FBRUwsSUFBSUEsSUFBcUMsRUFBRTtJQUN6Q0osZ0JBQWdCRSxNQUFNLEdBQUdBO0FBQzNCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2RhLWJhY2tlbmQvLi9zcmMvbGliL3ByaXNtYS50cz8wMWQ3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gXCJAcHJpc21hL2NsaWVudFwiO1xuXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWxUaGlzIGFzIHVua25vd24gYXMge1xuICBwcmlzbWE/OiBQcmlzbWFDbGllbnQ7XG59O1xuXG5leHBvcnQgY29uc3QgcHJpc21hID1cbiAgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA/P1xuICBuZXcgUHJpc21hQ2xpZW50KHtcbiAgICBsb2c6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcImRldmVsb3BtZW50XCIgPyBbXCJxdWVyeVwiLCBcImVycm9yXCIsIFwid2FyblwiXSA6IFtcImVycm9yXCJdLFxuICB9KTtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xuICBnbG9iYWxGb3JQcmlzbWEucHJpc21hID0gcHJpc21hO1xufVxuIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsImdsb2JhbEZvclByaXNtYSIsImdsb2JhbFRoaXMiLCJwcmlzbWEiLCJsb2ciLCJwcm9jZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/route.ts":
/*!**************************!*\
  !*** ./src/lib/route.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createHandler: () => (/* binding */ createHandler)\n/* harmony export */ });\n/* harmony import */ var _lib_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/http */ \"(rsc)/./src/lib/http.ts\");\n\nconst createHandler = ({ middlewares = [], controller })=>{\n    return async (req, ctx)=>{\n        return (0,_lib_http__WEBPACK_IMPORTED_MODULE_0__.handleRequest)(req, async ()=>{\n            const url = new URL(req.url);\n            let context = {\n                req,\n                params: ctx?.params ?? {},\n                query: url.searchParams\n            };\n            for (const middleware of middlewares){\n                context = await middleware(context);\n            }\n            return controller({\n                ...context,\n                params: context.params\n            });\n        });\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTJDO0FBZ0JwQyxNQUFNQyxnQkFBZ0IsQ0FHM0IsRUFBRUMsY0FBYyxFQUFFLEVBQUVDLFVBQVUsRUFBMkM7SUFDekUsT0FBTyxPQUFPQyxLQUFjQztRQUMxQixPQUFPTCx3REFBYUEsQ0FBQ0ksS0FBSztZQUN4QixNQUFNRSxNQUFNLElBQUlDLElBQUlILElBQUlFLEdBQUc7WUFDM0IsSUFBSUUsVUFBNkI7Z0JBQy9CSjtnQkFDQUssUUFBUUosS0FBS0ksVUFBVSxDQUFDO2dCQUN4QkMsT0FBT0osSUFBSUssWUFBWTtZQUN6QjtZQUVBLEtBQUssTUFBTUMsY0FBY1YsWUFBYTtnQkFDcENNLFVBQVUsTUFBTUksV0FBV0o7WUFDN0I7WUFFQSxPQUFPTCxXQUFXO2dCQUFFLEdBQUdLLE9BQU87Z0JBQUVDLFFBQVFELFFBQVFDLE1BQU07WUFBQztRQUN6RDtJQUNGO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3NkYS1iYWNrZW5kLy4vc3JjL2xpYi9yb3V0ZS50cz85ZTgzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGhhbmRsZVJlcXVlc3QgfSBmcm9tIFwiQC9saWIvaHR0cFwiO1xuaW1wb3J0IHR5cGUge1xuICBDb250cm9sbGVyQWN0aW9uLFxuICBNaWRkbGV3YXJlLFxuICBNaWRkbGV3YXJlQ29udGV4dCxcbiAgUm91dGVQYXJhbXMsXG59IGZyb20gXCJAL21pZGRsZXdhcmVzL3R5cGVzXCI7XG5cbmludGVyZmFjZSBDcmVhdGVIYW5kbGVyT3B0aW9uczxcbiAgVFJlc3VsdCxcbiAgVENvbnRleHQgZXh0ZW5kcyBNaWRkbGV3YXJlQ29udGV4dCA9IE1pZGRsZXdhcmVDb250ZXh0LFxuPiB7XG4gIG1pZGRsZXdhcmVzPzogTWlkZGxld2FyZVtdO1xuICBjb250cm9sbGVyOiBDb250cm9sbGVyQWN0aW9uPFRSZXN1bHQsIFRDb250ZXh0Pjtcbn1cblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUhhbmRsZXIgPSA8XG4gIFRSZXN1bHQsXG4gIFRDb250ZXh0IGV4dGVuZHMgTWlkZGxld2FyZUNvbnRleHQgPSBNaWRkbGV3YXJlQ29udGV4dCxcbj4oeyBtaWRkbGV3YXJlcyA9IFtdLCBjb250cm9sbGVyIH06IENyZWF0ZUhhbmRsZXJPcHRpb25zPFRSZXN1bHQsIFRDb250ZXh0PikgPT4ge1xuICByZXR1cm4gYXN5bmMgKHJlcTogUmVxdWVzdCwgY3R4PzogeyBwYXJhbXM/OiBSb3V0ZVBhcmFtcyB9KSA9PiB7XG4gICAgcmV0dXJuIGhhbmRsZVJlcXVlc3QocmVxLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHJlcS51cmwpO1xuICAgICAgbGV0IGNvbnRleHQ6IE1pZGRsZXdhcmVDb250ZXh0ID0ge1xuICAgICAgICByZXEsXG4gICAgICAgIHBhcmFtczogY3R4Py5wYXJhbXMgPz8ge30sXG4gICAgICAgIHF1ZXJ5OiB1cmwuc2VhcmNoUGFyYW1zLFxuICAgICAgfTtcblxuICAgICAgZm9yIChjb25zdCBtaWRkbGV3YXJlIG9mIG1pZGRsZXdhcmVzKSB7XG4gICAgICAgIGNvbnRleHQgPSBhd2FpdCBtaWRkbGV3YXJlKGNvbnRleHQpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY29udHJvbGxlcih7IC4uLmNvbnRleHQsIHBhcmFtczogY29udGV4dC5wYXJhbXMgfSBhcyBUQ29udGV4dCk7XG4gICAgfSk7XG4gIH07XG59O1xuIl0sIm5hbWVzIjpbImhhbmRsZVJlcXVlc3QiLCJjcmVhdGVIYW5kbGVyIiwibWlkZGxld2FyZXMiLCJjb250cm9sbGVyIiwicmVxIiwiY3R4IiwidXJsIiwiVVJMIiwiY29udGV4dCIsInBhcmFtcyIsInF1ZXJ5Iiwic2VhcmNoUGFyYW1zIiwibWlkZGxld2FyZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/sms.ts":
/*!************************!*\
  !*** ./src/lib/sms.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sendSms: () => (/* binding */ sendSms)\n/* harmony export */ });\n/* harmony import */ var twilio__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! twilio */ \"(rsc)/./node_modules/twilio/lib/index.js\");\n/* harmony import */ var twilio__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(twilio__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/env */ \"(rsc)/./src/lib/env.ts\");\n\n\nlet twilioClient = null;\nconst getTwilioClient = ()=>{\n    if (!twilioClient) {\n        if (!_lib_env__WEBPACK_IMPORTED_MODULE_1__.env.TWILIO_ACCOUNT_SID || !_lib_env__WEBPACK_IMPORTED_MODULE_1__.env.TWILIO_AUTH_TOKEN) {\n            throw new Error(\"Twilio credentials are not configured\");\n        }\n        twilioClient = twilio__WEBPACK_IMPORTED_MODULE_0___default()(_lib_env__WEBPACK_IMPORTED_MODULE_1__.env.TWILIO_ACCOUNT_SID, _lib_env__WEBPACK_IMPORTED_MODULE_1__.env.TWILIO_AUTH_TOKEN);\n    }\n    return twilioClient;\n};\nconst sendSms = async ({ to, message })=>{\n    if (!to) {\n        throw new Error(\"Missing receiver phone number\");\n    }\n    const fromNumber = _lib_env__WEBPACK_IMPORTED_MODULE_1__.env.TWILIO_FROM_NUMBER;\n    if (!_lib_env__WEBPACK_IMPORTED_MODULE_1__.env.TWILIO_ACCOUNT_SID || !_lib_env__WEBPACK_IMPORTED_MODULE_1__.env.TWILIO_AUTH_TOKEN || !fromNumber) {\n        if (true) {\n            console.warn(\"Twilio configuration missing; SMS not sent. Message preview:\", {\n                to,\n                from: fromNumber || \"(unset)\",\n                message\n            });\n            return;\n        }\n        throw new Error(\"Twilio configuration missing\");\n    }\n    if (true) {\n        console.info(`SMS preview  ${to}: ${message}`);\n    }\n    const client = getTwilioClient();\n    const twilioMessage = await client.messages.create({\n        to,\n        from: fromNumber,\n        body: message\n    });\n    if (true) {\n        console.info(`[Twilio] SMS dispatched to ${to} (sid: ${twilioMessage.sid})`);\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3Ntcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTZDO0FBRWI7QUFPaEMsSUFBSUUsZUFBOEI7QUFFbEMsTUFBTUMsa0JBQWtCO0lBQ3RCLElBQUksQ0FBQ0QsY0FBYztRQUNqQixJQUFJLENBQUNELHlDQUFHQSxDQUFDRyxrQkFBa0IsSUFBSSxDQUFDSCx5Q0FBR0EsQ0FBQ0ksaUJBQWlCLEVBQUU7WUFDckQsTUFBTSxJQUFJQyxNQUFNO1FBQ2xCO1FBQ0FKLGVBQWVGLDZDQUFNQSxDQUFDQyx5Q0FBR0EsQ0FBQ0csa0JBQWtCLEVBQUVILHlDQUFHQSxDQUFDSSxpQkFBaUI7SUFDckU7SUFDQSxPQUFPSDtBQUNUO0FBRU8sTUFBTUssVUFBVSxPQUFPLEVBQUVDLEVBQUUsRUFBRUMsT0FBTyxFQUFjO0lBQ3ZELElBQUksQ0FBQ0QsSUFBSTtRQUNQLE1BQU0sSUFBSUYsTUFBTTtJQUNsQjtJQUVBLE1BQU1JLGFBQWFULHlDQUFHQSxDQUFDVSxrQkFBa0I7SUFFekMsSUFBSSxDQUFDVix5Q0FBR0EsQ0FBQ0csa0JBQWtCLElBQUksQ0FBQ0gseUNBQUdBLENBQUNJLGlCQUFpQixJQUFJLENBQUNLLFlBQVk7UUFDcEUsSUFBSUUsSUFBcUMsRUFBRTtZQUN6Q0MsUUFBUUMsSUFBSSxDQUFDLGdFQUFnRTtnQkFDM0VOO2dCQUNBTyxNQUFNTCxjQUFjO2dCQUNwQkQ7WUFDRjtZQUNBO1FBQ0Y7UUFDQSxNQUFNLElBQUlILE1BQU07SUFDbEI7SUFFQSxJQUFJTSxJQUFxQyxFQUFFO1FBQ3pDQyxRQUFRRyxJQUFJLENBQUMsQ0FBQyxjQUFjLEVBQUVSLEdBQUcsRUFBRSxFQUFFQyxRQUFRLENBQUM7SUFDaEQ7SUFFQSxNQUFNUSxTQUFTZDtJQUNmLE1BQU1lLGdCQUFnQixNQUFNRCxPQUFPRSxRQUFRLENBQUNDLE1BQU0sQ0FBQztRQUFFWjtRQUFJTyxNQUFNTDtRQUFZVyxNQUFNWjtJQUFRO0lBRXpGLElBQUlHLElBQXFDLEVBQUU7UUFDekNDLFFBQVFHLElBQUksQ0FBQyxDQUFDLDJCQUEyQixFQUFFUixHQUFHLE9BQU8sRUFBRVUsY0FBY0ksR0FBRyxDQUFDLENBQUMsQ0FBQztJQUM3RTtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZGEtYmFja2VuZC8uL3NyYy9saWIvc21zLnRzPzQ4NTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR3aWxpbywgeyB0eXBlIFR3aWxpbyB9IGZyb20gXCJ0d2lsaW9cIjtcblxuaW1wb3J0IHsgZW52IH0gZnJvbSBcIkAvbGliL2VudlwiO1xuXG5leHBvcnQgdHlwZSBTbXNQYXlsb2FkID0ge1xuICB0bzogc3RyaW5nO1xuICBtZXNzYWdlOiBzdHJpbmc7XG59O1xuXG5sZXQgdHdpbGlvQ2xpZW50OiBUd2lsaW8gfCBudWxsID0gbnVsbDtcblxuY29uc3QgZ2V0VHdpbGlvQ2xpZW50ID0gKCkgPT4ge1xuICBpZiAoIXR3aWxpb0NsaWVudCkge1xuICAgIGlmICghZW52LlRXSUxJT19BQ0NPVU5UX1NJRCB8fCAhZW52LlRXSUxJT19BVVRIX1RPS0VOKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUd2lsaW8gY3JlZGVudGlhbHMgYXJlIG5vdCBjb25maWd1cmVkXCIpO1xuICAgIH1cbiAgICB0d2lsaW9DbGllbnQgPSB0d2lsaW8oZW52LlRXSUxJT19BQ0NPVU5UX1NJRCwgZW52LlRXSUxJT19BVVRIX1RPS0VOKTtcbiAgfVxuICByZXR1cm4gdHdpbGlvQ2xpZW50O1xufTtcblxuZXhwb3J0IGNvbnN0IHNlbmRTbXMgPSBhc3luYyAoeyB0bywgbWVzc2FnZSB9OiBTbXNQYXlsb2FkKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gIGlmICghdG8pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIHJlY2VpdmVyIHBob25lIG51bWJlclwiKTtcbiAgfVxuXG4gIGNvbnN0IGZyb21OdW1iZXIgPSBlbnYuVFdJTElPX0ZST01fTlVNQkVSO1xuXG4gIGlmICghZW52LlRXSUxJT19BQ0NPVU5UX1NJRCB8fCAhZW52LlRXSUxJT19BVVRIX1RPS0VOIHx8ICFmcm9tTnVtYmVyKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgICAgY29uc29sZS53YXJuKFwiVHdpbGlvIGNvbmZpZ3VyYXRpb24gbWlzc2luZzsgU01TIG5vdCBzZW50LiBNZXNzYWdlIHByZXZpZXc6XCIsIHtcbiAgICAgICAgdG8sXG4gICAgICAgIGZyb206IGZyb21OdW1iZXIgfHwgXCIodW5zZXQpXCIsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVHdpbGlvIGNvbmZpZ3VyYXRpb24gbWlzc2luZ1wiKTtcbiAgfVxuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICBjb25zb2xlLmluZm8oYFNNUyBwcmV2aWV3IOKGkiAke3RvfTogJHttZXNzYWdlfWApO1xuICB9XG5cbiAgY29uc3QgY2xpZW50ID0gZ2V0VHdpbGlvQ2xpZW50KCk7XG4gIGNvbnN0IHR3aWxpb01lc3NhZ2UgPSBhd2FpdCBjbGllbnQubWVzc2FnZXMuY3JlYXRlKHsgdG8sIGZyb206IGZyb21OdW1iZXIsIGJvZHk6IG1lc3NhZ2UgfSk7XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgIGNvbnNvbGUuaW5mbyhgW1R3aWxpb10gU01TIGRpc3BhdGNoZWQgdG8gJHt0b30gKHNpZDogJHt0d2lsaW9NZXNzYWdlLnNpZH0pYCk7XG4gIH1cbn07XG4iXSwibmFtZXMiOlsidHdpbGlvIiwiZW52IiwidHdpbGlvQ2xpZW50IiwiZ2V0VHdpbGlvQ2xpZW50IiwiVFdJTElPX0FDQ09VTlRfU0lEIiwiVFdJTElPX0FVVEhfVE9LRU4iLCJFcnJvciIsInNlbmRTbXMiLCJ0byIsIm1lc3NhZ2UiLCJmcm9tTnVtYmVyIiwiVFdJTElPX0ZST01fTlVNQkVSIiwicHJvY2VzcyIsImNvbnNvbGUiLCJ3YXJuIiwiZnJvbSIsImluZm8iLCJjbGllbnQiLCJ0d2lsaW9NZXNzYWdlIiwibWVzc2FnZXMiLCJjcmVhdGUiLCJib2R5Iiwic2lkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/sms.ts\n");

/***/ }),

/***/ "(rsc)/./src/middlewares/auth.middleware.ts":
/*!********************************************!*\
  !*** ./src/middlewares/auth.middleware.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   optionalAuthMiddleware: () => (/* binding */ optionalAuthMiddleware),\n/* harmony export */   requireAuthMiddleware: () => (/* binding */ requireAuthMiddleware)\n/* harmony export */ });\n/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/errors */ \"(rsc)/./src/lib/errors.ts\");\n/* harmony import */ var _services_auth_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/services/auth.service */ \"(rsc)/./src/services/auth.service.ts\");\n\n\nconst extractTokenFromRequest = (req)=>{\n    const authorization = req.headers.get(\"authorization\") ?? req.headers.get(\"Authorization\");\n    if (!authorization) {\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_0__.UnauthorizedError(\"Missing Authorization header\");\n    }\n    const parts = authorization.split(\" \");\n    if (parts.length !== 2 || parts[0] !== \"Bearer\") {\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_0__.UnauthorizedError(\"Malformed Authorization header\");\n    }\n    return parts[1];\n};\nconst requireAuthMiddleware = (allowedRoles)=>{\n    return async (context)=>{\n        const token = extractTokenFromRequest(context.req);\n        const user = await (0,_services_auth_service__WEBPACK_IMPORTED_MODULE_1__.getUserFromToken)(token);\n        if (allowedRoles && !allowedRoles.includes(user.role)) {\n            throw new _lib_errors__WEBPACK_IMPORTED_MODULE_0__.UnauthorizedError(\"Insufficient permissions\");\n        }\n        return {\n            ...context,\n            user\n        };\n    };\n};\nconst optionalAuthMiddleware = async (context)=>{\n    try {\n        const authorization = context.req.headers.get(\"authorization\") ?? context.req.headers.get(\"Authorization\");\n        if (!authorization) {\n            return context;\n        }\n        const token = extractTokenFromRequest(context.req);\n        const user = await (0,_services_auth_service__WEBPACK_IMPORTED_MODULE_1__.getUserFromToken)(token);\n        return {\n            ...context,\n            user\n        };\n    } catch (error) {\n        if (error instanceof _lib_errors__WEBPACK_IMPORTED_MODULE_0__.UnauthorizedError) {\n            return context;\n        }\n        throw error;\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbWlkZGxld2FyZXMvYXV0aC5taWRkbGV3YXJlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFFaUQ7QUFDVTtBQUkzRCxNQUFNRSwwQkFBMEIsQ0FBQ0M7SUFDL0IsTUFBTUMsZ0JBQWdCRCxJQUFJRSxPQUFPLENBQUNDLEdBQUcsQ0FBQyxvQkFBb0JILElBQUlFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDO0lBRTFFLElBQUksQ0FBQ0YsZUFBZTtRQUNsQixNQUFNLElBQUlKLDBEQUFpQkEsQ0FBQztJQUM5QjtJQUVBLE1BQU1PLFFBQVFILGNBQWNJLEtBQUssQ0FBQztJQUNsQyxJQUFJRCxNQUFNRSxNQUFNLEtBQUssS0FBS0YsS0FBSyxDQUFDLEVBQUUsS0FBSyxVQUFVO1FBQy9DLE1BQU0sSUFBSVAsMERBQWlCQSxDQUFDO0lBQzlCO0lBRUEsT0FBT08sS0FBSyxDQUFDLEVBQUU7QUFDakI7QUFFTyxNQUFNRyx3QkFBd0IsQ0FDbkNDO0lBRUEsT0FBTyxPQUFPQztRQUNaLE1BQU1DLFFBQVFYLHdCQUF3QlUsUUFBUVQsR0FBRztRQUNqRCxNQUFNVyxPQUFPLE1BQU1iLHdFQUFnQkEsQ0FBQ1k7UUFFcEMsSUFBSUYsZ0JBQWdCLENBQUNBLGFBQWFJLFFBQVEsQ0FBQ0QsS0FBS0UsSUFBSSxHQUFHO1lBQ3JELE1BQU0sSUFBSWhCLDBEQUFpQkEsQ0FBQztRQUM5QjtRQUVBLE9BQU87WUFDTCxHQUFHWSxPQUFPO1lBQ1ZFO1FBQ0Y7SUFDRjtBQUNGLEVBQUU7QUFFSyxNQUFNRyx5QkFBcUMsT0FBT0w7SUFDdkQsSUFBSTtRQUNGLE1BQU1SLGdCQUFnQlEsUUFBUVQsR0FBRyxDQUFDRSxPQUFPLENBQUNDLEdBQUcsQ0FBQyxvQkFBb0JNLFFBQVFULEdBQUcsQ0FBQ0UsT0FBTyxDQUFDQyxHQUFHLENBQUM7UUFDMUYsSUFBSSxDQUFDRixlQUFlO1lBQ2xCLE9BQU9RO1FBQ1Q7UUFFQSxNQUFNQyxRQUFRWCx3QkFBd0JVLFFBQVFULEdBQUc7UUFDakQsTUFBTVcsT0FBTyxNQUFNYix3RUFBZ0JBLENBQUNZO1FBRXBDLE9BQU87WUFDTCxHQUFHRCxPQUFPO1lBQ1ZFO1FBQ0Y7SUFDRixFQUFFLE9BQU9JLE9BQU87UUFDZCxJQUFJQSxpQkFBaUJsQiwwREFBaUJBLEVBQUU7WUFDdEMsT0FBT1k7UUFDVDtRQUVBLE1BQU1NO0lBQ1I7QUFDRixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2RhLWJhY2tlbmQvLi9zcmMvbWlkZGxld2FyZXMvYXV0aC5taWRkbGV3YXJlLnRzPzViOWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBSb2xlIH0gZnJvbSBcIkBwcmlzbWEvY2xpZW50XCI7XG5cbmltcG9ydCB7IFVuYXV0aG9yaXplZEVycm9yIH0gZnJvbSBcIkAvbGliL2Vycm9yc1wiO1xuaW1wb3J0IHsgZ2V0VXNlckZyb21Ub2tlbiB9IGZyb20gXCJAL3NlcnZpY2VzL2F1dGguc2VydmljZVwiO1xuXG5pbXBvcnQgdHlwZSB7IEF1dGhlbnRpY2F0ZWRDb250ZXh0LCBNaWRkbGV3YXJlLCBNaWRkbGV3YXJlQ29udGV4dCB9IGZyb20gXCIuL3R5cGVzXCI7XG5cbmNvbnN0IGV4dHJhY3RUb2tlbkZyb21SZXF1ZXN0ID0gKHJlcTogUmVxdWVzdCk6IHN0cmluZyA9PiB7XG4gIGNvbnN0IGF1dGhvcml6YXRpb24gPSByZXEuaGVhZGVycy5nZXQoXCJhdXRob3JpemF0aW9uXCIpID8/IHJlcS5oZWFkZXJzLmdldChcIkF1dGhvcml6YXRpb25cIik7XG5cbiAgaWYgKCFhdXRob3JpemF0aW9uKSB7XG4gICAgdGhyb3cgbmV3IFVuYXV0aG9yaXplZEVycm9yKFwiTWlzc2luZyBBdXRob3JpemF0aW9uIGhlYWRlclwiKTtcbiAgfVxuXG4gIGNvbnN0IHBhcnRzID0gYXV0aG9yaXphdGlvbi5zcGxpdChcIiBcIik7XG4gIGlmIChwYXJ0cy5sZW5ndGggIT09IDIgfHwgcGFydHNbMF0gIT09IFwiQmVhcmVyXCIpIHtcbiAgICB0aHJvdyBuZXcgVW5hdXRob3JpemVkRXJyb3IoXCJNYWxmb3JtZWQgQXV0aG9yaXphdGlvbiBoZWFkZXJcIik7XG4gIH1cblxuICByZXR1cm4gcGFydHNbMV07XG59O1xuXG5leHBvcnQgY29uc3QgcmVxdWlyZUF1dGhNaWRkbGV3YXJlID0gKFxuICBhbGxvd2VkUm9sZXM/OiBSb2xlW10sXG4pOiBNaWRkbGV3YXJlPE1pZGRsZXdhcmVDb250ZXh0LCBBdXRoZW50aWNhdGVkQ29udGV4dD4gPT4ge1xuICByZXR1cm4gYXN5bmMgKGNvbnRleHQpID0+IHtcbiAgICBjb25zdCB0b2tlbiA9IGV4dHJhY3RUb2tlbkZyb21SZXF1ZXN0KGNvbnRleHQucmVxKTtcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgZ2V0VXNlckZyb21Ub2tlbih0b2tlbik7XG5cbiAgICBpZiAoYWxsb3dlZFJvbGVzICYmICFhbGxvd2VkUm9sZXMuaW5jbHVkZXModXNlci5yb2xlKSkge1xuICAgICAgdGhyb3cgbmV3IFVuYXV0aG9yaXplZEVycm9yKFwiSW5zdWZmaWNpZW50IHBlcm1pc3Npb25zXCIpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAuLi5jb250ZXh0LFxuICAgICAgdXNlcixcbiAgICB9IHNhdGlzZmllcyBBdXRoZW50aWNhdGVkQ29udGV4dDtcbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBvcHRpb25hbEF1dGhNaWRkbGV3YXJlOiBNaWRkbGV3YXJlID0gYXN5bmMgKGNvbnRleHQpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBhdXRob3JpemF0aW9uID0gY29udGV4dC5yZXEuaGVhZGVycy5nZXQoXCJhdXRob3JpemF0aW9uXCIpID8/IGNvbnRleHQucmVxLmhlYWRlcnMuZ2V0KFwiQXV0aG9yaXphdGlvblwiKTtcbiAgICBpZiAoIWF1dGhvcml6YXRpb24pIHtcbiAgICAgIHJldHVybiBjb250ZXh0O1xuICAgIH1cblxuICAgIGNvbnN0IHRva2VuID0gZXh0cmFjdFRva2VuRnJvbVJlcXVlc3QoY29udGV4dC5yZXEpO1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRVc2VyRnJvbVRva2VuKHRva2VuKTtcblxuICAgIHJldHVybiB7XG4gICAgICAuLi5jb250ZXh0LFxuICAgICAgdXNlcixcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFVuYXV0aG9yaXplZEVycm9yKSB7XG4gICAgICByZXR1cm4gY29udGV4dDtcbiAgICB9XG5cbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufTtcbiJdLCJuYW1lcyI6WyJVbmF1dGhvcml6ZWRFcnJvciIsImdldFVzZXJGcm9tVG9rZW4iLCJleHRyYWN0VG9rZW5Gcm9tUmVxdWVzdCIsInJlcSIsImF1dGhvcml6YXRpb24iLCJoZWFkZXJzIiwiZ2V0IiwicGFydHMiLCJzcGxpdCIsImxlbmd0aCIsInJlcXVpcmVBdXRoTWlkZGxld2FyZSIsImFsbG93ZWRSb2xlcyIsImNvbnRleHQiLCJ0b2tlbiIsInVzZXIiLCJpbmNsdWRlcyIsInJvbGUiLCJvcHRpb25hbEF1dGhNaWRkbGV3YXJlIiwiZXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/middlewares/auth.middleware.ts\n");

/***/ }),

/***/ "(rsc)/./src/middlewares/query.middleware.ts":
/*!*********************************************!*\
  !*** ./src/middlewares/query.middleware.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   querySchemaMiddleware: () => (/* binding */ querySchemaMiddleware)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/ZodError.js\");\n/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/errors */ \"(rsc)/./src/lib/errors.ts\");\n\n\nconst querySchemaMiddleware = (schema)=>{\n    return async (context)=>{\n        const queryObject = Object.fromEntries(context.query.entries());\n        try {\n            const parsed = schema.parse(queryObject);\n            return {\n                ...context,\n                queryData: parsed\n            };\n        } catch (error) {\n            if (error instanceof zod__WEBPACK_IMPORTED_MODULE_1__.ZodError) {\n                throw new _lib_errors__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Invalid query parameters\", error.flatten());\n            }\n            throw error;\n        }\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbWlkZGxld2FyZXMvcXVlcnkubWlkZGxld2FyZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBZ0Q7QUFFRDtBQUd4QyxNQUFNRSx3QkFBd0IsQ0FJbkNDO0lBRUEsT0FBTyxPQUFPQztRQUNaLE1BQU1DLGNBQWNDLE9BQU9DLFdBQVcsQ0FBQ0gsUUFBUUksS0FBSyxDQUFDQyxPQUFPO1FBQzVELElBQUk7WUFDRixNQUFNQyxTQUFTUCxPQUFPUSxLQUFLLENBQUNOO1lBQzVCLE9BQU87Z0JBQ0wsR0FBR0QsT0FBTztnQkFDVlEsV0FBV0Y7WUFDYjtRQUNGLEVBQUUsT0FBT0csT0FBTztZQUNkLElBQUlBLGlCQUFpQmIseUNBQVFBLEVBQUU7Z0JBQzdCLE1BQU0sSUFBSUMsd0RBQWVBLENBQUMsNEJBQTRCWSxNQUFNQyxPQUFPO1lBQ3JFO1lBRUEsTUFBTUQ7UUFDUjtJQUNGO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3NkYS1iYWNrZW5kLy4vc3JjL21pZGRsZXdhcmVzL3F1ZXJ5Lm1pZGRsZXdhcmUudHM/M2M5NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBab2RFcnJvciwgdHlwZSBab2RUeXBlQW55IH0gZnJvbSBcInpvZFwiO1xuXG5pbXBvcnQgeyBWYWxpZGF0aW9uRXJyb3IgfSBmcm9tIFwiQC9saWIvZXJyb3JzXCI7XG5pbXBvcnQgdHlwZSB7IE1pZGRsZXdhcmUsIE1pZGRsZXdhcmVDb250ZXh0LCBRdWVyeUNvbnRleHQgfSBmcm9tIFwiQC9taWRkbGV3YXJlcy90eXBlc1wiO1xuXG5leHBvcnQgY29uc3QgcXVlcnlTY2hlbWFNaWRkbGV3YXJlID0gPFxuICBUU2NoZW1hIGV4dGVuZHMgWm9kVHlwZUFueSxcbiAgVElucHV0IGV4dGVuZHMgTWlkZGxld2FyZUNvbnRleHQgPSBNaWRkbGV3YXJlQ29udGV4dCxcbj4oXG4gIHNjaGVtYTogVFNjaGVtYSxcbik6IE1pZGRsZXdhcmU8VElucHV0LCBUSW5wdXQgJiBRdWVyeUNvbnRleHQ8UmV0dXJuVHlwZTxUU2NoZW1hW1wicGFyc2VcIl0+Pj4gPT4ge1xuICByZXR1cm4gYXN5bmMgKGNvbnRleHQpID0+IHtcbiAgICBjb25zdCBxdWVyeU9iamVjdCA9IE9iamVjdC5mcm9tRW50cmllcyhjb250ZXh0LnF1ZXJ5LmVudHJpZXMoKSk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZCA9IHNjaGVtYS5wYXJzZShxdWVyeU9iamVjdCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5jb250ZXh0LFxuICAgICAgICBxdWVyeURhdGE6IHBhcnNlZCxcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFpvZEVycm9yKSB7XG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXCJJbnZhbGlkIHF1ZXJ5IHBhcmFtZXRlcnNcIiwgZXJyb3IuZmxhdHRlbigpKTtcbiAgICAgIH1cblxuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9O1xufTtcbiJdLCJuYW1lcyI6WyJab2RFcnJvciIsIlZhbGlkYXRpb25FcnJvciIsInF1ZXJ5U2NoZW1hTWlkZGxld2FyZSIsInNjaGVtYSIsImNvbnRleHQiLCJxdWVyeU9iamVjdCIsIk9iamVjdCIsImZyb21FbnRyaWVzIiwicXVlcnkiLCJlbnRyaWVzIiwicGFyc2VkIiwicGFyc2UiLCJxdWVyeURhdGEiLCJlcnJvciIsImZsYXR0ZW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/middlewares/query.middleware.ts\n");

/***/ }),

/***/ "(rsc)/./src/middlewares/report.middleware.ts":
/*!**********************************************!*\
  !*** ./src/middlewares/report.middleware.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   reportAuthMiddleware: () => (/* binding */ reportAuthMiddleware),\n/* harmony export */   reportQueryMiddleware: () => (/* binding */ reportQueryMiddleware)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _middlewares_query_middleware__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/middlewares/query.middleware */ \"(rsc)/./src/middlewares/query.middleware.ts\");\n/* harmony import */ var _middlewares_auth_middleware__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/middlewares/auth.middleware */ \"(rsc)/./src/middlewares/auth.middleware.ts\");\n\n\n\nconst reportQuerySchema = zod__WEBPACK_IMPORTED_MODULE_2__.object({\n    districtId: zod__WEBPACK_IMPORTED_MODULE_2__.string().optional(),\n    churchId: zod__WEBPACK_IMPORTED_MODULE_2__.string().optional(),\n    sessionId: zod__WEBPACK_IMPORTED_MODULE_2__.string().optional(),\n    status: zod__WEBPACK_IMPORTED_MODULE_2__[\"enum\"]([\n        \"PENDING\",\n        \"APPROVED\"\n    ]).optional(),\n    fromDate: zod__WEBPACK_IMPORTED_MODULE_2__.string().optional(),\n    toDate: zod__WEBPACK_IMPORTED_MODULE_2__.string().optional(),\n    groupBy: zod__WEBPACK_IMPORTED_MODULE_2__[\"enum\"]([\n        \"church\",\n        \"district\"\n    ]).optional()\n});\nconst reportQueryMiddleware = (0,_middlewares_query_middleware__WEBPACK_IMPORTED_MODULE_0__.querySchemaMiddleware)(reportQuerySchema);\nconst reportAuthMiddleware = (0,_middlewares_auth_middleware__WEBPACK_IMPORTED_MODULE_1__.requireAuthMiddleware)([\n    \"UNION_ADMIN\",\n    \"DISTRICT_ADMIN\",\n    \"CHURCH_ADMIN\",\n    \"POLICE_VERIFIER\"\n]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbWlkZGxld2FyZXMvcmVwb3J0Lm1pZGRsZXdhcmUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBd0I7QUFFK0M7QUFDRDtBQUd0RSxNQUFNRyxvQkFBb0JILHVDQUFRLENBQUM7SUFDakNLLFlBQVlMLHVDQUFRLEdBQUdPLFFBQVE7SUFDL0JDLFVBQVVSLHVDQUFRLEdBQUdPLFFBQVE7SUFDN0JFLFdBQVdULHVDQUFRLEdBQUdPLFFBQVE7SUFDOUJHLFFBQVFWLHdDQUFNLENBQUM7UUFBQztRQUFXO0tBQVcsRUFBRU8sUUFBUTtJQUNoREssVUFBVVosdUNBQVEsR0FBR08sUUFBUTtJQUM3Qk0sUUFBUWIsdUNBQVEsR0FBR08sUUFBUTtJQUMzQk8sU0FBU2Qsd0NBQU0sQ0FBQztRQUFDO1FBQVU7S0FBVyxFQUFFTyxRQUFRO0FBQ2xEO0FBRU8sTUFBTVEsd0JBQXdCZCxvRkFBcUJBLENBQUNFLG1CQUFtQjtBQUV2RSxNQUFNYSx1QkFBbUNkLG1GQUFxQkEsQ0FBQztJQUNwRTtJQUNBO0lBQ0E7SUFDQTtDQUNELEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZGEtYmFja2VuZC8uL3NyYy9taWRkbGV3YXJlcy9yZXBvcnQubWlkZGxld2FyZS50cz9jZWQ0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tIFwiem9kXCI7XG5cbmltcG9ydCB7IHF1ZXJ5U2NoZW1hTWlkZGxld2FyZSB9IGZyb20gXCJAL21pZGRsZXdhcmVzL3F1ZXJ5Lm1pZGRsZXdhcmVcIjtcbmltcG9ydCB7IHJlcXVpcmVBdXRoTWlkZGxld2FyZSB9IGZyb20gXCJAL21pZGRsZXdhcmVzL2F1dGgubWlkZGxld2FyZVwiO1xuaW1wb3J0IHR5cGUgeyBNaWRkbGV3YXJlIH0gZnJvbSBcIkAvbWlkZGxld2FyZXMvdHlwZXNcIjtcblxuY29uc3QgcmVwb3J0UXVlcnlTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIGRpc3RyaWN0SWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgY2h1cmNoSWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgc2Vzc2lvbklkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHN0YXR1czogei5lbnVtKFtcIlBFTkRJTkdcIiwgXCJBUFBST1ZFRFwiXSkub3B0aW9uYWwoKSxcbiAgZnJvbURhdGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgdG9EYXRlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIGdyb3VwQnk6IHouZW51bShbXCJjaHVyY2hcIiwgXCJkaXN0cmljdFwiXSkub3B0aW9uYWwoKSxcbn0pO1xuXG5leHBvcnQgY29uc3QgcmVwb3J0UXVlcnlNaWRkbGV3YXJlID0gcXVlcnlTY2hlbWFNaWRkbGV3YXJlKHJlcG9ydFF1ZXJ5U2NoZW1hKTtcblxuZXhwb3J0IGNvbnN0IHJlcG9ydEF1dGhNaWRkbGV3YXJlOiBNaWRkbGV3YXJlID0gcmVxdWlyZUF1dGhNaWRkbGV3YXJlKFtcbiAgXCJVTklPTl9BRE1JTlwiLFxuICBcIkRJU1RSSUNUX0FETUlOXCIsXG4gIFwiQ0hVUkNIX0FETUlOXCIsXG4gIFwiUE9MSUNFX1ZFUklGSUVSXCIsXG5dKTtcbiJdLCJuYW1lcyI6WyJ6IiwicXVlcnlTY2hlbWFNaWRkbGV3YXJlIiwicmVxdWlyZUF1dGhNaWRkbGV3YXJlIiwicmVwb3J0UXVlcnlTY2hlbWEiLCJvYmplY3QiLCJkaXN0cmljdElkIiwic3RyaW5nIiwib3B0aW9uYWwiLCJjaHVyY2hJZCIsInNlc3Npb25JZCIsInN0YXR1cyIsImVudW0iLCJmcm9tRGF0ZSIsInRvRGF0ZSIsImdyb3VwQnkiLCJyZXBvcnRRdWVyeU1pZGRsZXdhcmUiLCJyZXBvcnRBdXRoTWlkZGxld2FyZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/middlewares/report.middleware.ts\n");

/***/ }),

/***/ "(rsc)/./src/models/attendance.model.ts":
/*!****************************************!*\
  !*** ./src/models/attendance.model.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AttendanceModel: () => (/* binding */ AttendanceModel)\n/* harmony export */ });\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n\nconst AttendanceModel = {\n    findById: (id, args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.attendanceRecord.findUnique({\n            ...args ?? {},\n            where: {\n                id\n            }\n        }),\n    findMany: (args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.attendanceRecord.findMany(args),\n    create: (args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.attendanceRecord.create(args),\n    update: (args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.attendanceRecord.update(args),\n    delete: (id)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.attendanceRecord.delete({\n            where: {\n                id\n            }\n        }),\n    aggregate: (args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.attendanceRecord.aggregate(args),\n    groupBy: _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.attendanceRecord.groupBy.bind(_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.attendanceRecord),\n    count: (args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.attendanceRecord.count(args)\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kZWxzL2F0dGVuZGFuY2UubW9kZWwudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFFc0M7QUFFL0IsTUFBTUMsa0JBQWtCO0lBQzdCQyxVQUFVLENBQ1JDLElBQ0FDLE9BRUFKLCtDQUFNQSxDQUFDSyxnQkFBZ0IsQ0FBQ0MsVUFBVSxDQUFDO1lBQ2pDLEdBQUlGLFFBQVEsQ0FBQyxDQUFDO1lBQ2RHLE9BQU87Z0JBQUVKO1lBQUc7UUFDZDtJQUVGSyxVQUFVLENBQUNKLE9BQ1RKLCtDQUFNQSxDQUFDSyxnQkFBZ0IsQ0FBQ0csUUFBUSxDQUFDSjtJQUVuQ0ssUUFBUSxDQUFDTCxPQUE0Q0osK0NBQU1BLENBQUNLLGdCQUFnQixDQUFDSSxNQUFNLENBQUNMO0lBRXBGTSxRQUFRLENBQUNOLE9BQTRDSiwrQ0FBTUEsQ0FBQ0ssZ0JBQWdCLENBQUNLLE1BQU0sQ0FBQ047SUFFcEZPLFFBQVEsQ0FBQ1IsS0FBZUgsK0NBQU1BLENBQUNLLGdCQUFnQixDQUFDTSxNQUFNLENBQUM7WUFBRUosT0FBTztnQkFBRUo7WUFBRztRQUFFO0lBRXZFUyxXQUFXLENBQUNSLE9BQStDSiwrQ0FBTUEsQ0FBQ0ssZ0JBQWdCLENBQUNPLFNBQVMsQ0FBQ1I7SUFFN0ZTLFNBQVNiLCtDQUFNQSxDQUFDSyxnQkFBZ0IsQ0FBQ1EsT0FBTyxDQUFDQyxJQUFJLENBQUNkLCtDQUFNQSxDQUFDSyxnQkFBZ0I7SUFFckVVLE9BQU8sQ0FBQ1gsT0FBNENKLCtDQUFNQSxDQUFDSyxnQkFBZ0IsQ0FBQ1UsS0FBSyxDQUFDWDtBQUNwRixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2RhLWJhY2tlbmQvLi9zcmMvbW9kZWxzL2F0dGVuZGFuY2UubW9kZWwudHM/OWY4OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEF0dGVuZGFuY2VSZWNvcmQsIFByaXNtYSB9IGZyb20gXCJAcHJpc21hL2NsaWVudFwiO1xuXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tIFwiQC9saWIvcHJpc21hXCI7XG5cbmV4cG9ydCBjb25zdCBBdHRlbmRhbmNlTW9kZWwgPSB7XG4gIGZpbmRCeUlkOiAoXG4gICAgaWQ6IHN0cmluZyxcbiAgICBhcmdzPzogT21pdDxQcmlzbWEuQXR0ZW5kYW5jZVJlY29yZEZpbmRVbmlxdWVBcmdzLCBcIndoZXJlXCI+LFxuICApID0+XG4gICAgcHJpc21hLmF0dGVuZGFuY2VSZWNvcmQuZmluZFVuaXF1ZSh7XG4gICAgICAuLi4oYXJncyA/PyB7fSksXG4gICAgICB3aGVyZTogeyBpZCB9LFxuICAgIH0pLFxuXG4gIGZpbmRNYW55OiAoYXJncz86IFByaXNtYS5BdHRlbmRhbmNlUmVjb3JkRmluZE1hbnlBcmdzKSA9PlxuICAgIHByaXNtYS5hdHRlbmRhbmNlUmVjb3JkLmZpbmRNYW55KGFyZ3MpLFxuXG4gIGNyZWF0ZTogKGFyZ3M6IFByaXNtYS5BdHRlbmRhbmNlUmVjb3JkQ3JlYXRlQXJncykgPT4gcHJpc21hLmF0dGVuZGFuY2VSZWNvcmQuY3JlYXRlKGFyZ3MpLFxuXG4gIHVwZGF0ZTogKGFyZ3M6IFByaXNtYS5BdHRlbmRhbmNlUmVjb3JkVXBkYXRlQXJncykgPT4gcHJpc21hLmF0dGVuZGFuY2VSZWNvcmQudXBkYXRlKGFyZ3MpLFxuXG4gIGRlbGV0ZTogKGlkOiBzdHJpbmcpID0+IHByaXNtYS5hdHRlbmRhbmNlUmVjb3JkLmRlbGV0ZSh7IHdoZXJlOiB7IGlkIH0gfSksXG5cbiAgYWdncmVnYXRlOiAoYXJnczogUHJpc21hLkF0dGVuZGFuY2VSZWNvcmRBZ2dyZWdhdGVBcmdzKSA9PiBwcmlzbWEuYXR0ZW5kYW5jZVJlY29yZC5hZ2dyZWdhdGUoYXJncyksXG5cbiAgZ3JvdXBCeTogcHJpc21hLmF0dGVuZGFuY2VSZWNvcmQuZ3JvdXBCeS5iaW5kKHByaXNtYS5hdHRlbmRhbmNlUmVjb3JkKSxcblxuICBjb3VudDogKGFyZ3M/OiBQcmlzbWEuQXR0ZW5kYW5jZVJlY29yZENvdW50QXJncykgPT4gcHJpc21hLmF0dGVuZGFuY2VSZWNvcmQuY291bnQoYXJncyksXG59O1xuXG5leHBvcnQgdHlwZSBBdHRlbmRhbmNlRW50aXR5ID0gQXR0ZW5kYW5jZVJlY29yZDtcbiJdLCJuYW1lcyI6WyJwcmlzbWEiLCJBdHRlbmRhbmNlTW9kZWwiLCJmaW5kQnlJZCIsImlkIiwiYXJncyIsImF0dGVuZGFuY2VSZWNvcmQiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJmaW5kTWFueSIsImNyZWF0ZSIsInVwZGF0ZSIsImRlbGV0ZSIsImFnZ3JlZ2F0ZSIsImdyb3VwQnkiLCJiaW5kIiwiY291bnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/models/attendance.model.ts\n");

/***/ }),

/***/ "(rsc)/./src/models/pass.model.ts":
/*!**********************************!*\
  !*** ./src/models/pass.model.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PassModel: () => (/* binding */ PassModel)\n/* harmony export */ });\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n\nconst PassModel = {\n    findById: (id, args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.pass.findUnique({\n            where: {\n                id\n            },\n            ...args\n        }),\n    findByToken: (token, args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.pass.findUnique({\n            where: {\n                token\n            },\n            ...args\n        }),\n    findMany: (args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.pass.findMany(args),\n    create: (args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.pass.create(args),\n    update: (args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.pass.update(args),\n    upsert: (args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.pass.upsert(args),\n    delete: (id)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.pass.delete({\n            where: {\n                id\n            }\n        })\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kZWxzL3Bhc3MubW9kZWwudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFFc0M7QUFFL0IsTUFBTUMsWUFBWTtJQUN2QkMsVUFBVSxDQUNSQyxJQUNBQyxPQUNHSiwrQ0FBTUEsQ0FBQ0ssSUFBSSxDQUFDQyxVQUFVLENBQUM7WUFBRUMsT0FBTztnQkFBRUo7WUFBRztZQUFHLEdBQUdDLElBQUk7UUFBQztJQUVyREksYUFBYSxDQUNYQyxPQUNBTCxPQUNHSiwrQ0FBTUEsQ0FBQ0ssSUFBSSxDQUFDQyxVQUFVLENBQUM7WUFBRUMsT0FBTztnQkFBRUU7WUFBTTtZQUFHLEdBQUdMLElBQUk7UUFBQztJQUV4RE0sVUFBVSxDQUFDTixPQUFtQ0osK0NBQU1BLENBQUNLLElBQUksQ0FBQ0ssUUFBUSxDQUFDTjtJQUVuRU8sUUFBUSxDQUFDUCxPQUFnQ0osK0NBQU1BLENBQUNLLElBQUksQ0FBQ00sTUFBTSxDQUFDUDtJQUU1RFEsUUFBUSxDQUFDUixPQUFnQ0osK0NBQU1BLENBQUNLLElBQUksQ0FBQ08sTUFBTSxDQUFDUjtJQUU1RFMsUUFBUSxDQUFDVCxPQUFnQ0osK0NBQU1BLENBQUNLLElBQUksQ0FBQ1EsTUFBTSxDQUFDVDtJQUU1RFUsUUFBUSxDQUFDWCxLQUFlSCwrQ0FBTUEsQ0FBQ0ssSUFBSSxDQUFDUyxNQUFNLENBQUM7WUFBRVAsT0FBTztnQkFBRUo7WUFBRztRQUFFO0FBQzdELEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZGEtYmFja2VuZC8uL3NyYy9tb2RlbHMvcGFzcy5tb2RlbC50cz84M2NkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgUGFzcywgUHJpc21hIH0gZnJvbSBcIkBwcmlzbWEvY2xpZW50XCI7XG5cbmltcG9ydCB7IHByaXNtYSB9IGZyb20gXCJAL2xpYi9wcmlzbWFcIjtcblxuZXhwb3J0IGNvbnN0IFBhc3NNb2RlbCA9IHtcbiAgZmluZEJ5SWQ6IDxUIGV4dGVuZHMgUHJpc21hLlBhc3NGaW5kVW5pcXVlQXJncz4oXG4gICAgaWQ6IHN0cmluZyxcbiAgICBhcmdzPzogT21pdDxULCBcIndoZXJlXCI+XG4gICkgPT4gcHJpc21hLnBhc3MuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IGlkIH0sIC4uLmFyZ3MgfSksXG5cbiAgZmluZEJ5VG9rZW46IDxUIGV4dGVuZHMgUHJpc21hLlBhc3NGaW5kVW5pcXVlQXJncz4oXG4gICAgdG9rZW46IHN0cmluZyxcbiAgICBhcmdzPzogT21pdDxULCBcIndoZXJlXCI+XG4gICkgPT4gcHJpc21hLnBhc3MuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IHRva2VuIH0sIC4uLmFyZ3MgfSksXG5cbiAgZmluZE1hbnk6IChhcmdzPzogUHJpc21hLlBhc3NGaW5kTWFueUFyZ3MpID0+IHByaXNtYS5wYXNzLmZpbmRNYW55KGFyZ3MpLFxuXG4gIGNyZWF0ZTogKGFyZ3M6IFByaXNtYS5QYXNzQ3JlYXRlQXJncykgPT4gcHJpc21hLnBhc3MuY3JlYXRlKGFyZ3MpLFxuXG4gIHVwZGF0ZTogKGFyZ3M6IFByaXNtYS5QYXNzVXBkYXRlQXJncykgPT4gcHJpc21hLnBhc3MudXBkYXRlKGFyZ3MpLFxuXG4gIHVwc2VydDogKGFyZ3M6IFByaXNtYS5QYXNzVXBzZXJ0QXJncykgPT4gcHJpc21hLnBhc3MudXBzZXJ0KGFyZ3MpLFxuXG4gIGRlbGV0ZTogKGlkOiBzdHJpbmcpID0+IHByaXNtYS5wYXNzLmRlbGV0ZSh7IHdoZXJlOiB7IGlkIH0gfSksXG59O1xuXG5leHBvcnQgdHlwZSBQYXNzRW50aXR5ID0gUGFzcztcbiJdLCJuYW1lcyI6WyJwcmlzbWEiLCJQYXNzTW9kZWwiLCJmaW5kQnlJZCIsImlkIiwiYXJncyIsInBhc3MiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJmaW5kQnlUb2tlbiIsInRva2VuIiwiZmluZE1hbnkiLCJjcmVhdGUiLCJ1cGRhdGUiLCJ1cHNlcnQiLCJkZWxldGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/models/pass.model.ts\n");

/***/ }),

/***/ "(rsc)/./src/models/session.model.ts":
/*!*************************************!*\
  !*** ./src/models/session.model.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SessionModel: () => (/* binding */ SessionModel)\n/* harmony export */ });\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n\nconst SessionModel = {\n    findById: (id, args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.umugandaSession.findUnique({\n            where: {\n                id\n            },\n            ...args ?? {}\n        }),\n    findMany: (args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.umugandaSession.findMany(args),\n    create: (args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.umugandaSession.create(args),\n    update: (args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.umugandaSession.update(args),\n    delete: (args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.umugandaSession.delete(args)\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kZWxzL3Nlc3Npb24ubW9kZWwudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFFc0M7QUFFL0IsTUFBTUMsZUFBZTtJQUMxQkMsVUFBVSxDQUNSQyxJQUNBQyxPQUNHSiwrQ0FBTUEsQ0FBQ0ssZUFBZSxDQUFDQyxVQUFVLENBQUM7WUFBRUMsT0FBTztnQkFBRUo7WUFBRztZQUFHLEdBQUlDLFFBQVEsQ0FBQyxDQUFDO1FBQUU7SUFFeEVJLFVBQVUsQ0FBQ0osT0FBOENKLCtDQUFNQSxDQUFDSyxlQUFlLENBQUNHLFFBQVEsQ0FBQ0o7SUFFekZLLFFBQVEsQ0FBQ0wsT0FBMkNKLCtDQUFNQSxDQUFDSyxlQUFlLENBQUNJLE1BQU0sQ0FBQ0w7SUFFbEZNLFFBQVEsQ0FBQ04sT0FBMkNKLCtDQUFNQSxDQUFDSyxlQUFlLENBQUNLLE1BQU0sQ0FBQ047SUFFbEZPLFFBQVEsQ0FBQ1AsT0FBMkNKLCtDQUFNQSxDQUFDSyxlQUFlLENBQUNNLE1BQU0sQ0FBQ1A7QUFDcEYsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3NkYS1iYWNrZW5kLy4vc3JjL21vZGVscy9zZXNzaW9uLm1vZGVsLnRzPzhlNTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBQcmlzbWEsIFVtdWdhbmRhU2Vzc2lvbiB9IGZyb20gXCJAcHJpc21hL2NsaWVudFwiO1xuXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tIFwiQC9saWIvcHJpc21hXCI7XG5cbmV4cG9ydCBjb25zdCBTZXNzaW9uTW9kZWwgPSB7XG4gIGZpbmRCeUlkOiAoXG4gICAgaWQ6IHN0cmluZyxcbiAgICBhcmdzPzogT21pdDxQcmlzbWEuVW11Z2FuZGFTZXNzaW9uRmluZFVuaXF1ZUFyZ3MsIFwid2hlcmVcIj4sXG4gICkgPT4gcHJpc21hLnVtdWdhbmRhU2Vzc2lvbi5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQgfSwgLi4uKGFyZ3MgPz8ge30pIH0pLFxuXG4gIGZpbmRNYW55OiAoYXJncz86IFByaXNtYS5VbXVnYW5kYVNlc3Npb25GaW5kTWFueUFyZ3MpID0+IHByaXNtYS51bXVnYW5kYVNlc3Npb24uZmluZE1hbnkoYXJncyksXG5cbiAgY3JlYXRlOiAoYXJnczogUHJpc21hLlVtdWdhbmRhU2Vzc2lvbkNyZWF0ZUFyZ3MpID0+IHByaXNtYS51bXVnYW5kYVNlc3Npb24uY3JlYXRlKGFyZ3MpLFxuXG4gIHVwZGF0ZTogKGFyZ3M6IFByaXNtYS5VbXVnYW5kYVNlc3Npb25VcGRhdGVBcmdzKSA9PiBwcmlzbWEudW11Z2FuZGFTZXNzaW9uLnVwZGF0ZShhcmdzKSxcblxuICBkZWxldGU6IChhcmdzOiBQcmlzbWEuVW11Z2FuZGFTZXNzaW9uRGVsZXRlQXJncykgPT4gcHJpc21hLnVtdWdhbmRhU2Vzc2lvbi5kZWxldGUoYXJncyksXG59O1xuXG5leHBvcnQgdHlwZSBTZXNzaW9uRW50aXR5ID0gVW11Z2FuZGFTZXNzaW9uO1xuIl0sIm5hbWVzIjpbInByaXNtYSIsIlNlc3Npb25Nb2RlbCIsImZpbmRCeUlkIiwiaWQiLCJhcmdzIiwidW11Z2FuZGFTZXNzaW9uIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiZmluZE1hbnkiLCJjcmVhdGUiLCJ1cGRhdGUiLCJkZWxldGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/models/session.model.ts\n");

/***/ }),

/***/ "(rsc)/./src/models/user.model.ts":
/*!**********************************!*\
  !*** ./src/models/user.model.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UserModel: () => (/* binding */ UserModel)\n/* harmony export */ });\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n\nconst UserModel = {\n    findById: (id, args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n            where: {\n                id\n            },\n            ...args ?? {}\n        }),\n    findByUsername: (username, args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n            where: {\n                username\n            },\n            ...args ?? {}\n        }),\n    findByEmail: (email, args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n            where: {\n                email\n            },\n            ...args ?? {}\n        }),\n    findByPhoneNumber: (phoneNumber, args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n            where: {\n                phoneNumber\n            },\n            ...args ?? {}\n        }),\n    findByNationalId: (nationalId, args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n            where: {\n                nationalId\n            },\n            ...args ?? {}\n        }),\n    findMany: (args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findMany(args),\n    count: (args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.count(args),\n    create: (args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.create(args),\n    update: (args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.update(args),\n    delete: (args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.delete(args)\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kZWxzL3VzZXIubW9kZWwudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFFc0M7QUFJL0IsTUFBTUMsWUFBWTtJQUN2QkMsVUFBVSxDQUFDQyxJQUFZQyxPQUNyQkosK0NBQU1BLENBQUNLLElBQUksQ0FBQ0MsVUFBVSxDQUFDO1lBQUVDLE9BQU87Z0JBQUVKO1lBQUc7WUFBRyxHQUFJQyxRQUFRLENBQUMsQ0FBQztRQUFFO0lBRTFESSxnQkFBZ0IsQ0FBQ0MsVUFBa0JMLE9BQ2pDSiwrQ0FBTUEsQ0FBQ0ssSUFBSSxDQUFDQyxVQUFVLENBQUM7WUFBRUMsT0FBTztnQkFBRUU7WUFBUztZQUFHLEdBQUlMLFFBQVEsQ0FBQyxDQUFDO1FBQUU7SUFFaEVNLGFBQWEsQ0FBQ0MsT0FBZVAsT0FDM0JKLCtDQUFNQSxDQUFDSyxJQUFJLENBQUNDLFVBQVUsQ0FBQztZQUFFQyxPQUFPO2dCQUFFSTtZQUFNO1lBQUcsR0FBSVAsUUFBUSxDQUFDLENBQUM7UUFBRTtJQUU3RFEsbUJBQW1CLENBQ2pCQyxhQUNBVCxPQUVBSiwrQ0FBTUEsQ0FBQ0ssSUFBSSxDQUFDQyxVQUFVLENBQUM7WUFDckJDLE9BQU87Z0JBQUVNO1lBQVk7WUFDckIsR0FBSVQsUUFBUSxDQUFDLENBQUM7UUFDaEI7SUFFRlUsa0JBQWtCLENBQUNDLFlBQW9CWCxPQUNyQ0osK0NBQU1BLENBQUNLLElBQUksQ0FBQ0MsVUFBVSxDQUFDO1lBQUVDLE9BQU87Z0JBQUVRO1lBQVc7WUFBRyxHQUFJWCxRQUFRLENBQUMsQ0FBQztRQUFFO0lBRWxFWSxVQUFVLENBQUNaLE9BQW1DSiwrQ0FBTUEsQ0FBQ0ssSUFBSSxDQUFDVyxRQUFRLENBQUNaO0lBRW5FYSxPQUFPLENBQUNiLE9BQWdDSiwrQ0FBTUEsQ0FBQ0ssSUFBSSxDQUFDWSxLQUFLLENBQUNiO0lBRTFEYyxRQUFRLENBQ05kLE9BQ0dKLCtDQUFNQSxDQUFDSyxJQUFJLENBQUNhLE1BQU0sQ0FBSWQ7SUFFM0JlLFFBQVEsQ0FBQ2YsT0FBZ0NKLCtDQUFNQSxDQUFDSyxJQUFJLENBQUNjLE1BQU0sQ0FBQ2Y7SUFFNURnQixRQUFRLENBQUNoQixPQUFnQ0osK0NBQU1BLENBQUNLLElBQUksQ0FBQ2UsTUFBTSxDQUFDaEI7QUFDOUQsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3NkYS1iYWNrZW5kLy4vc3JjL21vZGVscy91c2VyLm1vZGVsLnRzPzBlOTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBQcmlzbWEsIFVzZXIgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcblxuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSBcIkAvbGliL3ByaXNtYVwiO1xuXG50eXBlIFVzZXJGaW5kVW5pcXVlQXJnc1dpdGhvdXRXaGVyZSA9IE9taXQ8UHJpc21hLlVzZXJGaW5kVW5pcXVlQXJncywgXCJ3aGVyZVwiPjtcblxuZXhwb3J0IGNvbnN0IFVzZXJNb2RlbCA9IHtcbiAgZmluZEJ5SWQ6IChpZDogc3RyaW5nLCBhcmdzPzogVXNlckZpbmRVbmlxdWVBcmdzV2l0aG91dFdoZXJlKSA9PlxuICAgIHByaXNtYS51c2VyLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBpZCB9LCAuLi4oYXJncyA/PyB7fSkgfSksXG5cbiAgZmluZEJ5VXNlcm5hbWU6ICh1c2VybmFtZTogc3RyaW5nLCBhcmdzPzogVXNlckZpbmRVbmlxdWVBcmdzV2l0aG91dFdoZXJlKSA9PlxuICAgIHByaXNtYS51c2VyLmZpbmRVbmlxdWUoeyB3aGVyZTogeyB1c2VybmFtZSB9LCAuLi4oYXJncyA/PyB7fSkgfSksXG5cbiAgZmluZEJ5RW1haWw6IChlbWFpbDogc3RyaW5nLCBhcmdzPzogVXNlckZpbmRVbmlxdWVBcmdzV2l0aG91dFdoZXJlKSA9PlxuICAgIHByaXNtYS51c2VyLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBlbWFpbCB9LCAuLi4oYXJncyA/PyB7fSkgfSksXG5cbiAgZmluZEJ5UGhvbmVOdW1iZXI6IChcbiAgICBwaG9uZU51bWJlcjogc3RyaW5nLFxuICAgIGFyZ3M/OiBVc2VyRmluZFVuaXF1ZUFyZ3NXaXRob3V0V2hlcmUsXG4gICkgPT5cbiAgICBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IHBob25lTnVtYmVyIH0gYXMgUHJpc21hLlVzZXJXaGVyZVVuaXF1ZUlucHV0LFxuICAgICAgLi4uKGFyZ3MgPz8ge30pLFxuICAgIH0pLFxuXG4gIGZpbmRCeU5hdGlvbmFsSWQ6IChuYXRpb25hbElkOiBzdHJpbmcsIGFyZ3M/OiBVc2VyRmluZFVuaXF1ZUFyZ3NXaXRob3V0V2hlcmUpID0+XG4gICAgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7IHdoZXJlOiB7IG5hdGlvbmFsSWQgfSwgLi4uKGFyZ3MgPz8ge30pIH0pLFxuXG4gIGZpbmRNYW55OiAoYXJncz86IFByaXNtYS5Vc2VyRmluZE1hbnlBcmdzKSA9PiBwcmlzbWEudXNlci5maW5kTWFueShhcmdzKSxcblxuICBjb3VudDogKGFyZ3M/OiBQcmlzbWEuVXNlckNvdW50QXJncykgPT4gcHJpc21hLnVzZXIuY291bnQoYXJncyksXG5cbiAgY3JlYXRlOiA8VCBleHRlbmRzIFByaXNtYS5Vc2VyQ3JlYXRlQXJncz4oXG4gICAgYXJnczogUHJpc21hLlNlbGVjdFN1YnNldDxULCBQcmlzbWEuVXNlckNyZWF0ZUFyZ3M+LFxuICApID0+IHByaXNtYS51c2VyLmNyZWF0ZTxUPihhcmdzKSxcblxuICB1cGRhdGU6IChhcmdzOiBQcmlzbWEuVXNlclVwZGF0ZUFyZ3MpID0+IHByaXNtYS51c2VyLnVwZGF0ZShhcmdzKSxcblxuICBkZWxldGU6IChhcmdzOiBQcmlzbWEuVXNlckRlbGV0ZUFyZ3MpID0+IHByaXNtYS51c2VyLmRlbGV0ZShhcmdzKSxcbn07XG5cbmV4cG9ydCB0eXBlIFVzZXJXaXRoQ29udGV4dCA9IFVzZXI7XG4iXSwibmFtZXMiOlsicHJpc21hIiwiVXNlck1vZGVsIiwiZmluZEJ5SWQiLCJpZCIsImFyZ3MiLCJ1c2VyIiwiZmluZFVuaXF1ZSIsIndoZXJlIiwiZmluZEJ5VXNlcm5hbWUiLCJ1c2VybmFtZSIsImZpbmRCeUVtYWlsIiwiZW1haWwiLCJmaW5kQnlQaG9uZU51bWJlciIsInBob25lTnVtYmVyIiwiZmluZEJ5TmF0aW9uYWxJZCIsIm5hdGlvbmFsSWQiLCJmaW5kTWFueSIsImNvdW50IiwiY3JlYXRlIiwidXBkYXRlIiwiZGVsZXRlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/models/user.model.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/attendance.service.ts":
/*!********************************************!*\
  !*** ./src/services/attendance.service.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   buildAttendanceWhereForUser: () => (/* binding */ buildAttendanceWhereForUser),\n/* harmony export */   createAttendance: () => (/* binding */ createAttendance),\n/* harmony export */   listAttendanceForUser: () => (/* binding */ listAttendanceForUser),\n/* harmony export */   updateAttendance: () => (/* binding */ updateAttendance)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _models_attendance_model__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/models/attendance.model */ \"(rsc)/./src/models/attendance.model.ts\");\n/* harmony import */ var _models_session_model__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/models/session.model */ \"(rsc)/./src/models/session.model.ts\");\n/* harmony import */ var _models_user_model__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/models/user.model */ \"(rsc)/./src/models/user.model.ts\");\n/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/errors */ \"(rsc)/./src/lib/errors.ts\");\n/* harmony import */ var _services_pass_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/services/pass.service */ \"(rsc)/./src/services/pass.service.ts\");\n\n\n\n\n\n\nconst attendanceInclude = {\n    member: {\n        select: {\n            id: true,\n            firstName: true,\n            lastName: true,\n            nationalId: true,\n            phoneNumber: true\n        }\n    },\n    session: {\n        select: {\n            id: true,\n            date: true,\n            church: {\n                select: {\n                    id: true,\n                    name: true,\n                    districtId: true\n                }\n            }\n        }\n    },\n    pass: {\n        select: {\n            id: true,\n            token: true,\n            smsSentAt: true\n        }\n    },\n    approvedBy: {\n        select: {\n            id: true,\n            firstName: true,\n            lastName: true\n        }\n    }\n};\nconst attendanceUpdateInclude = {\n    session: {\n        select: {\n            id: true,\n            churchId: true\n        }\n    },\n    pass: true\n};\nconst buildAttendanceWhereForUser = (user, filters = {})=>{\n    const where = {};\n    const sessionFilters = {};\n    if (filters.status) {\n        where.status = filters.status;\n    }\n    if (filters.sessionId) {\n        where.sessionId = filters.sessionId;\n    }\n    if (user.role === \"UNION_ADMIN\") {\n        if (!user.unionId) {\n            throw new _lib_errors__WEBPACK_IMPORTED_MODULE_4__.ForbiddenError(\"No union assigned to this account\");\n        }\n        sessionFilters.church = {\n            is: {\n                district: {\n                    is: {\n                        unionId: user.unionId\n                    }\n                },\n                ...filters.districtId ? {\n                    districtId: filters.districtId\n                } : {},\n                ...filters.churchId ? {\n                    id: filters.churchId\n                } : {}\n            }\n        };\n    } else if (user.role === \"DISTRICT_ADMIN\") {\n        if (!user.districtId) {\n            throw new _lib_errors__WEBPACK_IMPORTED_MODULE_4__.ForbiddenError(\"No district assigned to this account\");\n        }\n        if (filters.districtId && filters.districtId !== user.districtId) {\n            throw new _lib_errors__WEBPACK_IMPORTED_MODULE_4__.ForbiddenError(\"Cannot view attendance outside your district\");\n        }\n        sessionFilters.church = {\n            is: {\n                districtId: user.districtId,\n                ...filters.churchId ? {\n                    id: filters.churchId\n                } : {}\n            }\n        };\n    } else if (user.role === \"CHURCH_ADMIN\") {\n        if (!user.churchId) {\n            throw new _lib_errors__WEBPACK_IMPORTED_MODULE_4__.ForbiddenError(\"No church assigned to this account\");\n        }\n        if (filters.churchId && filters.churchId !== user.churchId) {\n            throw new _lib_errors__WEBPACK_IMPORTED_MODULE_4__.ForbiddenError(\"Cannot view attendance outside your church\");\n        }\n        sessionFilters.churchId = user.churchId;\n    } else {\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_4__.ForbiddenError(\"Not allowed to view attendance\");\n    }\n    if (Object.keys(sessionFilters).length > 0) {\n        where.session = {\n            is: sessionFilters\n        };\n    }\n    return where;\n};\nconst listAttendanceForUser = async (user, filters = {})=>{\n    const where = buildAttendanceWhereForUser(user, filters);\n    return _models_attendance_model__WEBPACK_IMPORTED_MODULE_1__.AttendanceModel.findMany({\n        where,\n        include: attendanceInclude,\n        orderBy: {\n            createdAt: \"desc\"\n        }\n    });\n};\nconst createAttendance = async (user, input)=>{\n    if (user.role !== \"CHURCH_ADMIN\") {\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_4__.ForbiddenError(\"Only church admins can record attendance\");\n    }\n    if (!user.churchId) {\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_4__.ForbiddenError(\"No church assigned to this account\");\n    }\n    const session = await _models_session_model__WEBPACK_IMPORTED_MODULE_2__.SessionModel.findById(input.sessionId, {\n        include: {\n            church: {\n                select: {\n                    id: true\n                }\n            }\n        }\n    });\n    if (!session) {\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_4__.NotFoundError(\"Session not found\");\n    }\n    if (session.churchId !== user.churchId) {\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_4__.ForbiddenError(\"Cannot record attendance for another church\");\n    }\n    const member = await _models_user_model__WEBPACK_IMPORTED_MODULE_3__.UserModel.findById(input.memberId, {\n        select: {\n            id: true,\n            role: true,\n            churchId: true\n        }\n    });\n    if (!member || member.role !== \"MEMBER\") {\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_4__.NotFoundError(\"Member not found\");\n    }\n    if (member.churchId !== user.churchId) {\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_4__.ForbiddenError(\"Member belongs to another church\");\n    }\n    try {\n        return await _models_attendance_model__WEBPACK_IMPORTED_MODULE_1__.AttendanceModel.create({\n            data: {\n                sessionId: input.sessionId,\n                memberId: input.memberId\n            },\n            include: attendanceInclude\n        });\n    } catch (error) {\n        if (error instanceof _prisma_client__WEBPACK_IMPORTED_MODULE_0__.Prisma.PrismaClientKnownRequestError && error.code === \"P2002\") {\n            throw new _lib_errors__WEBPACK_IMPORTED_MODULE_4__.ConflictError(\"Attendance already recorded for this member\");\n        }\n        throw error;\n    }\n};\nconst updateAttendance = async (user, attendanceId, input)=>{\n    if (user.role !== \"CHURCH_ADMIN\") {\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_4__.ForbiddenError(\"Only church admins can update attendance\");\n    }\n    if (!user.churchId) {\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_4__.ForbiddenError(\"No church assigned to this account\");\n    }\n    const existing = await _models_attendance_model__WEBPACK_IMPORTED_MODULE_1__.AttendanceModel.findById(attendanceId, {\n        include: attendanceUpdateInclude\n    });\n    if (!existing) {\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_4__.NotFoundError(\"Attendance record not found\");\n    }\n    if (existing.session.churchId !== user.churchId) {\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_4__.ForbiddenError(\"Cannot modify attendance outside your church\");\n    }\n    const updated = await _models_attendance_model__WEBPACK_IMPORTED_MODULE_1__.AttendanceModel.update({\n        where: {\n            id: attendanceId\n        },\n        data: {\n            status: input.status,\n            approvedById: input.status === _prisma_client__WEBPACK_IMPORTED_MODULE_0__.AttendanceStatus.APPROVED ? user.id : null\n        },\n        include: attendanceInclude\n    });\n    if (input.status === _prisma_client__WEBPACK_IMPORTED_MODULE_0__.AttendanceStatus.APPROVED) {\n        const issuePass = input.issuePass ?? true;\n        if (issuePass) {\n            const pass = await (0,_services_pass_service__WEBPACK_IMPORTED_MODULE_5__.issuePassForAttendance)(attendanceId);\n            return {\n                attendance: updated,\n                pass\n            };\n        }\n    }\n    if (input.status === _prisma_client__WEBPACK_IMPORTED_MODULE_0__.AttendanceStatus.PENDING && updated.pass) {\n        await (0,_services_pass_service__WEBPACK_IMPORTED_MODULE_5__.revokePass)(attendanceId);\n    }\n    return {\n        attendance: updated\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmljZXMvYXR0ZW5kYW5jZS5zZXJ2aWNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXFFO0FBRVQ7QUFDTjtBQUNOO0FBQzRCO0FBQ0M7QUFFN0UsTUFBTVUsb0JBQW9CO0lBQ3hCQyxRQUFRO1FBQ05DLFFBQVE7WUFDTkMsSUFBSTtZQUNKQyxXQUFXO1lBQ1hDLFVBQVU7WUFDVkMsWUFBWTtZQUNaQyxhQUFhO1FBQ2Y7SUFDRjtJQUNBQyxTQUFTO1FBQ1BOLFFBQVE7WUFDTkMsSUFBSTtZQUNKTSxNQUFNO1lBQ05DLFFBQVE7Z0JBQ05SLFFBQVE7b0JBQ05DLElBQUk7b0JBQ0pRLE1BQU07b0JBQ05DLFlBQVk7Z0JBQ2Q7WUFDRjtRQUNGO0lBQ0Y7SUFDQUMsTUFBTTtRQUNKWCxRQUFRO1lBQ05DLElBQUk7WUFDSlcsT0FBTztZQUNQQyxXQUFXO1FBQ2I7SUFDRjtJQUNBQyxZQUFZO1FBQ1ZkLFFBQVE7WUFDTkMsSUFBSTtZQUNKQyxXQUFXO1lBQ1hDLFVBQVU7UUFDWjtJQUNGO0FBQ0Y7QUFNQSxNQUFNWSwwQkFBMEI7SUFDOUJULFNBQVM7UUFDUE4sUUFBUTtZQUNOQyxJQUFJO1lBQ0plLFVBQVU7UUFDWjtJQUNGO0lBQ0FMLE1BQU07QUFDUjtBQXVCTyxNQUFNTSw4QkFBOEIsQ0FDekNDLE1BQ0FDLFVBQTZCLENBQUMsQ0FBQztJQUUvQixNQUFNQyxRQUEyQyxDQUFDO0lBQ2xELE1BQU1DLGlCQUFtRCxDQUFDO0lBRTFELElBQUlGLFFBQVFHLE1BQU0sRUFBRTtRQUNsQkYsTUFBTUUsTUFBTSxHQUFHSCxRQUFRRyxNQUFNO0lBQy9CO0lBRUEsSUFBSUgsUUFBUUksU0FBUyxFQUFFO1FBQ3JCSCxNQUFNRyxTQUFTLEdBQUdKLFFBQVFJLFNBQVM7SUFDckM7SUFFQSxJQUFJTCxLQUFLTSxJQUFJLEtBQUssZUFBZTtRQUMvQixJQUFJLENBQUNOLEtBQUtPLE9BQU8sRUFBRTtZQUNqQixNQUFNLElBQUloQyx1REFBY0Es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YTtRQUMxQkwsTUFBTTtZQUNKbkIsUUFBUWUsTUFBTWYsTUFBTTtZQUNwQjRCLGNBQWNiLE1BQU1mLE1BQU0sS0FBS2xDLDREQUFnQkEsQ0FBQytELFFBQVEsR0FBR2pDLEtBQUtqQixFQUFFLEdBQUc7UUFDdkU7UUFDQWdDLFNBQVNuQztJQUNYO0lBRUEsSUFBSXVDLE1BQU1mLE1BQU0sS0FBS2xDLDREQUFnQkEsQ0FBQytELFFBQVEsRUFBRTtRQUM5QyxNQUFNQyxZQUFZZixNQUFNZSxTQUFTLElBQUk7UUFDckMsSUFBSUEsV0FBVztZQUNiLE1BQU16QyxPQUFPLE1BQU1mLDhFQUFzQkEsQ0FBQ2tEO1lBQzFDLE9BQU87Z0JBQUVPLFlBQVlMO2dCQUFTckM7WUFBSztRQUNyQztJQUNGO0lBRUEsSUFBSTBCLE1BQU1mLE1BQU0sS0FBS2xDLDREQUFnQkEsQ0FBQ2tFLE9BQU8sSUFBSU4sUUFBUXJDLElBQUksRUFBRTtRQUM3RCxNQUFNZCxrRUFBVUEsQ0FBQ2lEO0lBQ25CO0lBRUEsT0FBTztRQUFFTyxZQUFZTDtJQUFRO0FBQy9CLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZGEtYmFja2VuZC8uL3NyYy9zZXJ2aWNlcy9hdHRlbmRhbmNlLnNlcnZpY2UudHM/N2Y1OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBdHRlbmRhbmNlU3RhdHVzLCBQcmlzbWEsIHR5cGUgVXNlciB9IGZyb20gXCJAcHJpc21hL2NsaWVudFwiO1xuXG5pbXBvcnQgeyBBdHRlbmRhbmNlTW9kZWwgfSBmcm9tIFwiQC9tb2RlbHMvYXR0ZW5kYW5jZS5tb2RlbFwiO1xuaW1wb3J0IHsgU2Vzc2lvbk1vZGVsIH0gZnJvbSBcIkAvbW9kZWxzL3Nlc3Npb24ubW9kZWxcIjtcbmltcG9ydCB7IFVzZXJNb2RlbCB9IGZyb20gXCJAL21vZGVscy91c2VyLm1vZGVsXCI7XG5pbXBvcnQgeyBGb3JiaWRkZW5FcnJvciwgTm90Rm91bmRFcnJvciwgQ29uZmxpY3RFcnJvciB9IGZyb20gXCJAL2xpYi9lcnJvcnNcIjtcbmltcG9ydCB7IGlzc3VlUGFzc0ZvckF0dGVuZGFuY2UsIHJldm9rZVBhc3MgfSBmcm9tIFwiQC9zZXJ2aWNlcy9wYXNzLnNlcnZpY2VcIjtcblxuY29uc3QgYXR0ZW5kYW5jZUluY2x1ZGUgPSB7XG4gIG1lbWJlcjoge1xuICAgIHNlbGVjdDoge1xuICAgICAgaWQ6IHRydWUsXG4gICAgICBmaXJzdE5hbWU6IHRydWUsXG4gICAgICBsYXN0TmFtZTogdHJ1ZSxcbiAgICAgIG5hdGlvbmFsSWQ6IHRydWUsXG4gICAgICBwaG9uZU51bWJlcjogdHJ1ZSxcbiAgICB9LFxuICB9LFxuICBzZXNzaW9uOiB7XG4gICAgc2VsZWN0OiB7XG4gICAgICBpZDogdHJ1ZSxcbiAgICAgIGRhdGU6IHRydWUsXG4gICAgICBjaHVyY2g6IHtcbiAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgICAgICBkaXN0cmljdElkOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9LFxuICBwYXNzOiB7XG4gICAgc2VsZWN0OiB7XG4gICAgICBpZDogdHJ1ZSxcbiAgICAgIHRva2VuOiB0cnVlLFxuICAgICAgc21zU2VudEF0OiB0cnVlLFxuICAgIH0sXG4gIH0sXG4gIGFwcHJvdmVkQnk6IHtcbiAgICBzZWxlY3Q6IHtcbiAgICAgIGlkOiB0cnVlLFxuICAgICAgZmlyc3ROYW1lOiB0cnVlLFxuICAgICAgbGFzdE5hbWU6IHRydWUsXG4gICAgfSxcbiAgfSxcbn0gc2F0aXNmaWVzIFByaXNtYS5BdHRlbmRhbmNlUmVjb3JkSW5jbHVkZTtcblxudHlwZSBBdHRlbmRhbmNlV2l0aFJlbGF0aW9ucyA9IFByaXNtYS5BdHRlbmRhbmNlUmVjb3JkR2V0UGF5bG9hZDx7XG4gIGluY2x1ZGU6IHR5cGVvZiBhdHRlbmRhbmNlSW5jbHVkZTtcbn0+O1xuXG5jb25zdCBhdHRlbmRhbmNlVXBkYXRlSW5jbHVkZSA9IHtcbiAgc2Vzc2lvbjoge1xuICAgIHNlbGVjdDoge1xuICAgICAgaWQ6IHRydWUsXG4gICAgICBjaHVyY2hJZDogdHJ1ZSxcbiAgICB9LFxuICB9LFxuICBwYXNzOiB0cnVlLFxufSBzYXRpc2ZpZXMgUHJpc21hLkF0dGVuZGFuY2VSZWNvcmRJbmNsdWRlO1xuXG50eXBlIEF0dGVuZGFuY2VGb3JVcGRhdGUgPSBQcmlzbWEuQXR0ZW5kYW5jZVJlY29yZEdldFBheWxvYWQ8e1xuICBpbmNsdWRlOiB0eXBlb2YgYXR0ZW5kYW5jZVVwZGF0ZUluY2x1ZGU7XG59PjtcblxuZXhwb3J0IGludGVyZmFjZSBBdHRlbmRhbmNlRmlsdGVycyB7XG4gIGRpc3RyaWN0SWQ/OiBzdHJpbmcgfCBudWxsO1xuICBjaHVyY2hJZD86IHN0cmluZyB8IG51bGw7XG4gIHNlc3Npb25JZD86IHN0cmluZyB8IG51bGw7XG4gIHN0YXR1cz86IEF0dGVuZGFuY2VTdGF0dXMgfCBudWxsO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENyZWF0ZUF0dGVuZGFuY2VJbnB1dCB7XG4gIHNlc3Npb25JZDogc3RyaW5nO1xuICBtZW1iZXJJZDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFVwZGF0ZUF0dGVuZGFuY2VJbnB1dCB7XG4gIHN0YXR1czogQXR0ZW5kYW5jZVN0YXR1cztcbiAgaXNzdWVQYXNzPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNvbnN0IGJ1aWxkQXR0ZW5kYW5jZVdoZXJlRm9yVXNlciA9IChcbiAgdXNlcjogVXNlcixcbiAgZmlsdGVyczogQXR0ZW5kYW5jZUZpbHRlcnMgPSB7fSxcbikgPT4ge1xuICBjb25zdCB3aGVyZTogUHJpc21hLkF0dGVuZGFuY2VSZWNvcmRXaGVyZUlucHV0ID0ge307XG4gIGNvbnN0IHNlc3Npb25GaWx0ZXJzOiBQcmlzbWEuVW11Z2FuZGFTZXNzaW9uV2hlcmVJbnB1dCA9IHt9O1xuXG4gIGlmIChmaWx0ZXJzLnN0YXR1cykge1xuICAgIHdoZXJlLnN0YXR1cyA9IGZpbHRlcnMuc3RhdHVzO1xuICB9XG5cbiAgaWYgKGZpbHRlcnMuc2Vzc2lvbklkKSB7XG4gICAgd2hlcmUuc2Vzc2lvbklkID0gZmlsdGVycy5zZXNzaW9uSWQ7XG4gIH1cblxuICBpZiAodXNlci5yb2xlID09PSBcIlVOSU9OX0FETUlOXCIpIHtcbiAgICBpZiAoIXVzZXIudW5pb25JZCkge1xuICAgICAgdGhyb3cgbmV3IEZvcmJpZGRlbkVycm9yKFwiTm8gdW5pb24gYXNzaWduZWQgdG8gdGhpcyBhY2NvdW50XCIpO1xuICAgIH1cblxuICAgIHNlc3Npb25GaWx0ZXJzLmNodXJjaCA9IHtcbiAgICAgIGlzOiB7XG4gICAgICAgIGRpc3RyaWN0OiB7XG4gICAgICAgICAgaXM6IHtcbiAgICAgICAgICAgIHVuaW9uSWQ6IHVzZXIudW5pb25JZCxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICAuLi4oZmlsdGVycy5kaXN0cmljdElkID8geyBkaXN0cmljdElkOiBmaWx0ZXJzLmRpc3RyaWN0SWQgfSA6IHt9KSxcbiAgICAgICAgLi4uKGZpbHRlcnMuY2h1cmNoSWQgPyB7IGlkOiBmaWx0ZXJzLmNodXJjaElkIH0gOiB7fSksXG4gICAgICB9LFxuICAgIH07XG4gIH0gZWxzZSBpZiAodXNlci5yb2xlID09PSBcIkRJU1RSSUNUX0FETUlOXCIpIHtcbiAgICBpZiAoIXVzZXIuZGlzdHJpY3RJZCkge1xuICAgICAgdGhyb3cgbmV3IEZvcmJpZGRlbkVycm9yKFwiTm8gZGlzdHJpY3QgYXNzaWduZWQgdG8gdGhpcyBhY2NvdW50XCIpO1xuICAgIH1cblxuICAgIGlmIChmaWx0ZXJzLmRpc3RyaWN0SWQgJiYgZmlsdGVycy5kaXN0cmljdElkICE9PSB1c2VyLmRpc3RyaWN0SWQpIHtcbiAgICAgIHRocm93IG5ldyBGb3JiaWRkZW5FcnJvcihcIkNhbm5vdCB2aWV3IGF0dGVuZGFuY2Ugb3V0c2lkZSB5b3VyIGRpc3RyaWN0XCIpO1xuICAgIH1cblxuICAgIHNlc3Npb25GaWx0ZXJzLmNodXJjaCA9IHtcbiAgICAgIGlzOiB7XG4gICAgICAgIGRpc3RyaWN0SWQ6IHVzZXIuZGlzdHJpY3RJZCxcbiAgICAgICAgLi4uKGZpbHRlcnMuY2h1cmNoSWQgPyB7IGlkOiBmaWx0ZXJzLmNodXJjaElkIH0gOiB7fSksXG4gICAgICB9LFxuICAgIH07XG4gIH0gZWxzZSBpZiAodXNlci5yb2xlID09PSBcIkNIVVJDSF9BRE1JTlwiKSB7XG4gICAgaWYgKCF1c2VyLmNodXJjaElkKSB7XG4gICAgICB0aHJvdyBuZXcgRm9yYmlkZGVuRXJyb3IoXCJObyBjaHVyY2ggYXNzaWduZWQgdG8gdGhpcyBhY2NvdW50XCIpO1xuICAgIH1cblxuICAgIGlmIChmaWx0ZXJzLmNodXJjaElkICYmIGZpbHRlcnMuY2h1cmNoSWQgIT09IHVzZXIuY2h1cmNoSWQpIHtcbiAgICAgIHRocm93IG5ldyBGb3JiaWRkZW5FcnJvcihcIkNhbm5vdCB2aWV3IGF0dGVuZGFuY2Ugb3V0c2lkZSB5b3VyIGNodXJjaFwiKTtcbiAgICB9XG5cbiAgICBzZXNzaW9uRmlsdGVycy5jaHVyY2hJZCA9IHVzZXIuY2h1cmNoSWQ7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEZvcmJpZGRlbkVycm9yKFwiTm90IGFsbG93ZWQgdG8gdmlldyBhdHRlbmRhbmNlXCIpO1xuICB9XG5cbiAgaWYgKE9iamVjdC5rZXlzKHNlc3Npb25GaWx0ZXJzKS5sZW5ndGggPiAwKSB7XG4gICAgd2hlcmUuc2Vzc2lvbiA9IHsgaXM6IHNlc3Npb25GaWx0ZXJzIH07XG4gIH1cblxuICByZXR1cm4gd2hlcmU7XG59O1xuXG5leHBvcnQgY29uc3QgbGlzdEF0dGVuZGFuY2VGb3JVc2VyID0gYXN5bmMgKHVzZXI6IFVzZXIsIGZpbHRlcnM6IEF0dGVuZGFuY2VGaWx0ZXJzID0ge30pID0+IHtcbiAgY29uc3Qgd2hlcmUgPSBidWlsZEF0dGVuZGFuY2VXaGVyZUZvclVzZXIodXNlciwgZmlsdGVycyk7XG5cbiAgcmV0dXJuIEF0dGVuZGFuY2VNb2RlbC5maW5kTWFueSh7XG4gICAgd2hlcmUsXG4gICAgaW5jbHVkZTogYXR0ZW5kYW5jZUluY2x1ZGUsXG4gICAgb3JkZXJCeTogeyBjcmVhdGVkQXQ6IFwiZGVzY1wiIH0sXG4gIH0pO1xufTtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUF0dGVuZGFuY2UgPSBhc3luYyAodXNlcjogVXNlciwgaW5wdXQ6IENyZWF0ZUF0dGVuZGFuY2VJbnB1dCkgPT4ge1xuICBpZiAodXNlci5yb2xlICE9PSBcIkNIVVJDSF9BRE1JTlwiKSB7XG4gICAgdGhyb3cgbmV3IEZvcmJpZGRlbkVycm9yKFwiT25seSBjaHVyY2ggYWRtaW5zIGNhbiByZWNvcmQgYXR0ZW5kYW5jZVwiKTtcbiAgfVxuXG4gIGlmICghdXNlci5jaHVyY2hJZCkge1xuICAgIHRocm93IG5ldyBGb3JiaWRkZW5FcnJvcihcIk5vIGNodXJjaCBhc3NpZ25lZCB0byB0aGlzIGFjY291bnRcIik7XG4gIH1cblxuICBjb25zdCBzZXNzaW9uID0gYXdhaXQgU2Vzc2lvbk1vZGVsLmZpbmRCeUlkKGlucHV0LnNlc3Npb25JZCwge1xuICAgIGluY2x1ZGU6IHtcbiAgICAgIGNodXJjaDoge1xuICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSk7XG5cbiAgaWYgKCFzZXNzaW9uKSB7XG4gICAgdGhyb3cgbmV3IE5vdEZvdW5kRXJyb3IoXCJTZXNzaW9uIG5vdCBmb3VuZFwiKTtcbiAgfVxuXG4gIGlmIChzZXNzaW9uLmNodXJjaElkICE9PSB1c2VyLmNodXJjaElkKSB7XG4gICAgdGhyb3cgbmV3IEZvcmJpZGRlbkVycm9yKFwiQ2Fubm90IHJlY29yZCBhdHRlbmRhbmNlIGZvciBhbm90aGVyIGNodXJjaFwiKTtcbiAgfVxuXG4gIGNvbnN0IG1lbWJlciA9IGF3YWl0IFVzZXJNb2RlbC5maW5kQnlJZChpbnB1dC5tZW1iZXJJZCwge1xuICAgIHNlbGVjdDoge1xuICAgICAgaWQ6IHRydWUsXG4gICAgICByb2xlOiB0cnVlLFxuICAgICAgY2h1cmNoSWQ6IHRydWUsXG4gICAgfSxcbiAgfSk7XG5cbiAgaWYgKCFtZW1iZXIgfHwgbWVtYmVyLnJvbGUgIT09IFwiTUVNQkVSXCIpIHtcbiAgICB0aHJvdyBuZXcgTm90Rm91bmRFcnJvcihcIk1lbWJlciBub3QgZm91bmRcIik7XG4gIH1cblxuICBpZiAobWVtYmVyLmNodXJjaElkICE9PSB1c2VyLmNodXJjaElkKSB7XG4gICAgdGhyb3cgbmV3IEZvcmJpZGRlbkVycm9yKFwiTWVtYmVyIGJlbG9uZ3MgdG8gYW5vdGhlciBjaHVyY2hcIik7XG4gIH1cblxuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCBBdHRlbmRhbmNlTW9kZWwuY3JlYXRlKHtcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgc2Vzc2lvbklkOiBpbnB1dC5zZXNzaW9uSWQsXG4gICAgICAgIG1lbWJlcklkOiBpbnB1dC5tZW1iZXJJZCxcbiAgICAgIH0sXG4gICAgICBpbmNsdWRlOiBhdHRlbmRhbmNlSW5jbHVkZSxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3I6IHVua25vd24pIHtcbiAgICBpZiAoXG4gICAgICBlcnJvciBpbnN0YW5jZW9mIFByaXNtYS5QcmlzbWFDbGllbnRLbm93blJlcXVlc3RFcnJvciAmJlxuICAgICAgZXJyb3IuY29kZSA9PT0gXCJQMjAwMlwiXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgQ29uZmxpY3RFcnJvcihcIkF0dGVuZGFuY2UgYWxyZWFkeSByZWNvcmRlZCBmb3IgdGhpcyBtZW1iZXJcIik7XG4gICAgfVxuXG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCB1cGRhdGVBdHRlbmRhbmNlID0gYXN5bmMgKFxuICB1c2VyOiBVc2VyLFxuICBhdHRlbmRhbmNlSWQ6IHN0cmluZyxcbiAgaW5wdXQ6IFVwZGF0ZUF0dGVuZGFuY2VJbnB1dCxcbikgPT4ge1xuICBpZiAodXNlci5yb2xlICE9PSBcIkNIVVJDSF9BRE1JTlwiKSB7XG4gICAgdGhyb3cgbmV3IEZvcmJpZGRlbkVycm9yKFwiT25seSBjaHVyY2ggYWRtaW5zIGNhbiB1cGRhdGUgYXR0ZW5kYW5jZVwiKTtcbiAgfVxuXG4gIGlmICghdXNlci5jaHVyY2hJZCkge1xuICAgIHRocm93IG5ldyBGb3JiaWRkZW5FcnJvcihcIk5vIGNodXJjaCBhc3NpZ25lZCB0byB0aGlzIGFjY291bnRcIik7XG4gIH1cblxuICBjb25zdCBleGlzdGluZyA9IChhd2FpdCBBdHRlbmRhbmNlTW9kZWwuZmluZEJ5SWQoYXR0ZW5kYW5jZUlkLCB7XG4gICAgaW5jbHVkZTogYXR0ZW5kYW5jZVVwZGF0ZUluY2x1ZGUsXG4gIH0pKSBhcyBBdHRlbmRhbmNlRm9yVXBkYXRlIHwgbnVsbDtcblxuICBpZiAoIWV4aXN0aW5nKSB7XG4gICAgdGhyb3cgbmV3IE5vdEZvdW5kRXJyb3IoXCJBdHRlbmRhbmNlIHJlY29yZCBub3QgZm91bmRcIik7XG4gIH1cblxuICBpZiAoZXhpc3Rpbmcuc2Vzc2lvbi5jaHVyY2hJZCAhPT0gdXNlci5jaHVyY2hJZCkge1xuICAgIHRocm93IG5ldyBGb3JiaWRkZW5FcnJvcihcIkNhbm5vdCBtb2RpZnkgYXR0ZW5kYW5jZSBvdXRzaWRlIHlvdXIgY2h1cmNoXCIpO1xuICB9XG5cbiAgY29uc3QgdXBkYXRlZCA9IChhd2FpdCBBdHRlbmRhbmNlTW9kZWwudXBkYXRlKHtcbiAgICB3aGVyZTogeyBpZDogYXR0ZW5kYW5jZUlkIH0sXG4gICAgZGF0YToge1xuICAgICAgc3RhdHVzOiBpbnB1dC5zdGF0dXMsXG4gICAgICBhcHByb3ZlZEJ5SWQ6IGlucHV0LnN0YXR1cyA9PT0gQXR0ZW5kYW5jZVN0YXR1cy5BUFBST1ZFRCA/IHVzZXIuaWQgOiBudWxsLFxuICAgIH0sXG4gICAgaW5jbHVkZTogYXR0ZW5kYW5jZUluY2x1ZGUsXG4gIH0pKSBhcyBBdHRlbmRhbmNlV2l0aFJlbGF0aW9ucztcblxuICBpZiAoaW5wdXQuc3RhdHVzID09PSBBdHRlbmRhbmNlU3RhdHVzLkFQUFJPVkVEKSB7XG4gICAgY29uc3QgaXNzdWVQYXNzID0gaW5wdXQuaXNzdWVQYXNzID8/IHRydWU7XG4gICAgaWYgKGlzc3VlUGFzcykge1xuICAgICAgY29uc3QgcGFzcyA9IGF3YWl0IGlzc3VlUGFzc0ZvckF0dGVuZGFuY2UoYXR0ZW5kYW5jZUlkKTtcbiAgICAgIHJldHVybiB7IGF0dGVuZGFuY2U6IHVwZGF0ZWQsIHBhc3MgfTtcbiAgICB9XG4gIH1cblxuICBpZiAoaW5wdXQuc3RhdHVzID09PSBBdHRlbmRhbmNlU3RhdHVzLlBFTkRJTkcgJiYgdXBkYXRlZC5wYXNzKSB7XG4gICAgYXdhaXQgcmV2b2tlUGFzcyhhdHRlbmRhbmNlSWQpO1xuICB9XG5cbiAgcmV0dXJuIHsgYXR0ZW5kYW5jZTogdXBkYXRlZCB9O1xufTtcbiJdLCJuYW1lcyI6WyJBdHRlbmRhbmNlU3RhdHVzIiwiUHJpc21hIiwiQXR0ZW5kYW5jZU1vZGVsIiwiU2Vzc2lvbk1vZGVsIiwiVXNlck1vZGVsIiwiRm9yYmlkZGVuRXJyb3IiLCJOb3RGb3VuZEVycm9yIiwiQ29uZmxpY3RFcnJvciIsImlzc3VlUGFzc0ZvckF0dGVuZGFuY2UiLCJyZXZva2VQYXNzIiwiYXR0ZW5kYW5jZUluY2x1ZGUiLCJtZW1iZXIiLCJzZWxlY3QiLCJpZCIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwibmF0aW9uYWxJZCIsInBob25lTnVtYmVyIiwic2Vzc2lvbiIsImRhdGUiLCJjaHVyY2giLCJuYW1lIiwiZGlzdHJpY3RJZCIsInBhc3MiLCJ0b2tlbiIsInNtc1NlbnRBdCIsImFwcHJvdmVkQnkiLCJhdHRlbmRhbmNlVXBkYXRlSW5jbHVkZSIsImNodXJjaElkIiwiYnVpbGRBdHRlbmRhbmNlV2hlcmVGb3JVc2VyIiwidXNlciIsImZpbHRlcnMiLCJ3aGVyZSIsInNlc3Npb25GaWx0ZXJzIiwic3RhdHVzIiwic2Vzc2lvbklkIiwicm9sZSIsInVuaW9uSWQiLCJpcyIsImRpc3RyaWN0IiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsImxpc3RBdHRlbmRhbmNlRm9yVXNlciIsImZpbmRNYW55IiwiaW5jbHVkZSIsIm9yZGVyQnkiLCJjcmVhdGVkQXQiLCJjcmVhdGVBdHRlbmRhbmNlIiwiaW5wdXQiLCJmaW5kQnlJZCIsIm1lbWJlcklkIiwiY3JlYXRlIiwiZGF0YSIsImVycm9yIiwiUHJpc21hQ2xpZW50S25vd25SZXF1ZXN0RXJyb3IiLCJjb2RlIiwidXBkYXRlQXR0ZW5kYW5jZSIsImF0dGVuZGFuY2VJZCIsImV4aXN0aW5nIiwidXBkYXRlZCIsInVwZGF0ZSIsImFwcHJvdmVkQnlJZCIsIkFQUFJPVkVEIiwiaXNzdWVQYXNzIiwiYXR0ZW5kYW5jZSIsIlBFTkRJTkciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/services/attendance.service.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/auth.service.ts":
/*!**************************************!*\
  !*** ./src/services/auth.service.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authenticateWithCredentials: () => (/* binding */ authenticateWithCredentials),\n/* harmony export */   getUserFromToken: () => (/* binding */ getUserFromToken),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   signToken: () => (/* binding */ signToken),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword)\n/* harmony export */ });\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var _lib_env__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/env */ \"(rsc)/./src/lib/env.ts\");\n/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/errors */ \"(rsc)/./src/lib/errors.ts\");\n/* harmony import */ var _models_user_model__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/models/user.model */ \"(rsc)/./src/models/user.model.ts\");\n\n\n\n\n\n\n\nconst TOKEN_TTL_SECONDS = 60 * 60 * 12; // 12 hours\nconst hashPassword = async (password)=>{\n    const salt = await bcryptjs__WEBPACK_IMPORTED_MODULE_0___default().genSalt(10);\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_0___default().hash(password, salt);\n};\nconst verifyPassword = async (password, hash)=>{\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_0___default().compare(password, hash);\n};\nconst signToken = (user)=>{\n    const payload = {\n        sub: user.id,\n        role: user.role,\n        unionId: user.unionId,\n        districtId: user.districtId,\n        churchId: user.churchId\n    };\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().sign(payload, _lib_env__WEBPACK_IMPORTED_MODULE_4__.env.JWT_SECRET, {\n        expiresIn: TOKEN_TTL_SECONDS\n    });\n};\nconst getUserFromToken = async (token)=>{\n    try {\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().verify(token, _lib_env__WEBPACK_IMPORTED_MODULE_4__.env.JWT_SECRET);\n        const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__.prisma.user.findUnique({\n            where: {\n                id: decoded.sub\n            }\n        });\n        if (!user) {\n            throw new _lib_errors__WEBPACK_IMPORTED_MODULE_5__.UnauthorizedError(\"User not found\");\n        }\n        if (!user.isActive) {\n            throw new _lib_errors__WEBPACK_IMPORTED_MODULE_5__.UnauthorizedError(\"Account disabled\");\n        }\n        return user;\n    } catch (error) {\n        if (error instanceof _lib_errors__WEBPACK_IMPORTED_MODULE_5__.UnauthorizedError) {\n            throw error;\n        }\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_5__.UnauthorizedError(\"Invalid token\");\n    }\n};\nconst authenticateWithCredentials = async ({ email, phoneNumber, password })=>{\n    let user = null;\n    if (phoneNumber) {\n        user = await _models_user_model__WEBPACK_IMPORTED_MODULE_6__.UserModel.findByPhoneNumber(phoneNumber);\n        if (!user || !user.isActive) {\n            throw new _lib_errors__WEBPACK_IMPORTED_MODULE_5__.UnauthorizedError(\"Invalid credentials\");\n        }\n        if (user.role !== _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Role.MEMBER) {\n            throw new _lib_errors__WEBPACK_IMPORTED_MODULE_5__.UnauthorizedError(\"Phone number login is restricted to members\");\n        }\n    } else if (email) {\n        user = await _models_user_model__WEBPACK_IMPORTED_MODULE_6__.UserModel.findByEmail(email);\n        if (!user || !user.isActive) {\n            throw new _lib_errors__WEBPACK_IMPORTED_MODULE_5__.UnauthorizedError(\"Invalid credentials\");\n        }\n        if (user.role === _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Role.MEMBER) {\n            throw new _lib_errors__WEBPACK_IMPORTED_MODULE_5__.UnauthorizedError(\"Members must sign in with their phone number\");\n        }\n    } else {\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_5__.UnauthorizedError(\"Email or phone number is required\");\n    }\n    const validPassword = await verifyPassword(password, user.passwordHash);\n    if (!validPassword) {\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_5__.UnauthorizedError(\"Invalid credentials\");\n    }\n    const token = signToken({\n        id: user.id,\n        role: user.role,\n        unionId: user.unionId,\n        districtId: user.districtId,\n        churchId: user.churchId\n    });\n    const { passwordHash, ...safeUser } = user;\n    return {\n        token,\n        user: safeUser\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQU1KLEtBQUtJLElBQUk7UUFDZkMsU0FBU0wsS0FBS0ssT0FBTztRQUNyQkMsWUFBWU4sS0FBS00sVUFBVTtRQUMzQkMsVUFBVVAsS0FBS08sUUFBUTtJQUN6QjtJQUVBLE1BQU0sRUFBRW1CLFlBQVksRUFBRSxHQUFHQyxVQUFVLEdBQUczQjtJQUV0QyxPQUFPO1FBQ0xZO1FBQ0FaLE1BQU0yQjtJQUNSO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3NkYS1iYWNrZW5kLy4vc3JjL3NlcnZpY2VzL2F1dGguc2VydmljZS50cz9kNmZhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBiY3J5cHQgZnJvbSBcImJjcnlwdGpzXCI7XG5pbXBvcnQgand0IGZyb20gXCJqc29ud2VidG9rZW5cIjtcbmltcG9ydCB7IFJvbGUsIHR5cGUgVXNlciB9IGZyb20gXCJAcHJpc21hL2NsaWVudFwiO1xuXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tIFwiQC9saWIvcHJpc21hXCI7XG5pbXBvcnQgeyBlbnYgfSBmcm9tIFwiQC9saWIvZW52XCI7XG5pbXBvcnQgeyBVbmF1dGhvcml6ZWRFcnJvciB9IGZyb20gXCJAL2xpYi9lcnJvcnNcIjtcbmltcG9ydCB7IFVzZXJNb2RlbCB9IGZyb20gXCJAL21vZGVscy91c2VyLm1vZGVsXCI7XG5cbmNvbnN0IFRPS0VOX1RUTF9TRUNPTkRTID0gNjAgKiA2MCAqIDEyOyAvLyAxMiBob3Vyc1xuXG50eXBlIEp3dFBheWxvYWQgPSB7XG4gIHN1Yjogc3RyaW5nO1xuICByb2xlOiBSb2xlO1xuICB1bmlvbklkPzogc3RyaW5nIHwgbnVsbDtcbiAgZGlzdHJpY3RJZD86IHN0cmluZyB8IG51bGw7XG4gIGNodXJjaElkPzogc3RyaW5nIHwgbnVsbDtcbn07XG5cbmV4cG9ydCB0eXBlIFRva2VuU3ViamVjdCA9IFBpY2s8VXNlciwgXCJpZFwiIHwgXCJyb2xlXCIgfCBcInVuaW9uSWRcIiB8IFwiZGlzdHJpY3RJZFwiIHwgXCJjaHVyY2hJZFwiPjtcblxuZXhwb3J0IHR5cGUgQXV0aFVzZXIgPSBPbWl0PFVzZXIsIFwicGFzc3dvcmRIYXNoXCI+O1xuXG5leHBvcnQgY29uc3QgaGFzaFBhc3N3b3JkID0gYXN5bmMgKHBhc3N3b3JkOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4gPT4ge1xuICBjb25zdCBzYWx0ID0gYXdhaXQgYmNyeXB0LmdlblNhbHQoMTApO1xuICByZXR1cm4gYmNyeXB0Lmhhc2gocGFzc3dvcmQsIHNhbHQpO1xufTtcblxuZXhwb3J0IGNvbnN0IHZlcmlmeVBhc3N3b3JkID0gYXN5bmMgKHBhc3N3b3JkOiBzdHJpbmcsIGhhc2g6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4gPT4ge1xuICByZXR1cm4gYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIGhhc2gpO1xufTtcblxuZXhwb3J0IGNvbnN0IHNpZ25Ub2tlbiA9ICh1c2VyOiBUb2tlblN1YmplY3QpOiBzdHJpbmcgPT4ge1xuICBjb25zdCBwYXlsb2FkOiBKd3RQYXlsb2FkID0ge1xuICAgIHN1YjogdXNlci5pZCxcbiAgICByb2xlOiB1c2VyLnJvbGUsXG4gICAgdW5pb25JZDogdXNlci51bmlvbklkLFxuICAgIGRpc3RyaWN0SWQ6IHVzZXIuZGlzdHJpY3RJZCxcbiAgICBjaHVyY2hJZDogdXNlci5jaHVyY2hJZCxcbiAgfTtcblxuICByZXR1cm4gand0LnNpZ24ocGF5bG9hZCwgZW52LkpXVF9TRUNSRVQsIHtcbiAgICBleHBpcmVzSW46IFRPS0VOX1RUTF9TRUNPTkRTLFxuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRVc2VyRnJvbVRva2VuID0gYXN5bmMgKHRva2VuOiBzdHJpbmcpOiBQcm9taXNlPFVzZXI+ID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgZW52LkpXVF9TRUNSRVQpIGFzIEp3dFBheWxvYWQ7XG5cbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZTogeyBpZDogZGVjb2RlZC5zdWIgfSxcbiAgICB9KTtcblxuICAgIGlmICghdXNlcikge1xuICAgICAgdGhyb3cgbmV3IFVuYXV0aG9yaXplZEVycm9yKFwiVXNlciBub3QgZm91bmRcIik7XG4gICAgfVxuXG4gICAgaWYgKCF1c2VyLmlzQWN0aXZlKSB7XG4gICAgICB0aHJvdyBuZXcgVW5hdXRob3JpemVkRXJyb3IoXCJBY2NvdW50IGRpc2FibGVkXCIpO1xuICAgIH1cblxuICAgIHJldHVybiB1c2VyO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFVuYXV0aG9yaXplZEVycm9yKSB7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG5cbiAgICB0aHJvdyBuZXcgVW5hdXRob3JpemVkRXJyb3IoXCJJbnZhbGlkIHRva2VuXCIpO1xuICB9XG59O1xuXG50eXBlIENyZWRlbnRpYWxJbnB1dCA9IHtcbiAgZW1haWw/OiBzdHJpbmc7XG4gIHBob25lTnVtYmVyPzogc3RyaW5nO1xuICBwYXNzd29yZDogc3RyaW5nO1xufTtcblxuZXhwb3J0IGNvbnN0IGF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFscyA9IGFzeW5jICh7XG4gIGVtYWlsLFxuICBwaG9uZU51bWJlcixcbiAgcGFzc3dvcmQsXG59OiBDcmVkZW50aWFsSW5wdXQpID0+IHtcbiAgbGV0IHVzZXI6IFVzZXIgfCBudWxsID0gbnVsbDtcblxuICBpZiAocGhvbmVOdW1iZXIpIHtcbiAgICB1c2VyID0gYXdhaXQgVXNlck1vZGVsLmZpbmRCeVBob25lTnVtYmVyKHBob25lTnVtYmVyKTtcblxuICAgIGlmICghdXNlciB8fCAhdXNlci5pc0FjdGl2ZSkge1xuICAgICAgdGhyb3cgbmV3IFVuYXV0aG9yaXplZEVycm9yKFwiSW52YWxpZCBjcmVkZW50aWFsc1wiKTtcbiAgICB9XG5cbiAgICBpZiAodXNlci5yb2xlICE9PSBSb2xlLk1FTUJFUikge1xuICAgICAgdGhyb3cgbmV3IFVuYXV0aG9yaXplZEVycm9yKFwiUGhvbmUgbnVtYmVyIGxvZ2luIGlzIHJlc3RyaWN0ZWQgdG8gbWVtYmVyc1wiKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoZW1haWwpIHtcbiAgICB1c2VyID0gYXdhaXQgVXNlck1vZGVsLmZpbmRCeUVtYWlsKGVtYWlsKTtcblxuICAgIGlmICghdXNlciB8fCAhdXNlci5pc0FjdGl2ZSkge1xuICAgICAgdGhyb3cgbmV3IFVuYXV0aG9yaXplZEVycm9yKFwiSW52YWxpZCBjcmVkZW50aWFsc1wiKTtcbiAgICB9XG5cbiAgICBpZiAodXNlci5yb2xlID09PSBSb2xlLk1FTUJFUikge1xuICAgICAgdGhyb3cgbmV3IFVuYXV0aG9yaXplZEVycm9yKFwiTWVtYmVycyBtdXN0IHNpZ24gaW4gd2l0aCB0aGVpciBwaG9uZSBudW1iZXJcIik7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBVbmF1dGhvcml6ZWRFcnJvcihcIkVtYWlsIG9yIHBob25lIG51bWJlciBpcyByZXF1aXJlZFwiKTtcbiAgfVxuXG4gIGNvbnN0IHZhbGlkUGFzc3dvcmQgPSBhd2FpdCB2ZXJpZnlQYXNzd29yZChwYXNzd29yZCwgdXNlci5wYXNzd29yZEhhc2gpO1xuXG4gIGlmICghdmFsaWRQYXNzd29yZCkge1xuICAgIHRocm93IG5ldyBVbmF1dGhvcml6ZWRFcnJvcihcIkludmFsaWQgY3JlZGVudGlhbHNcIik7XG4gIH1cblxuICBjb25zdCB0b2tlbiA9IHNpZ25Ub2tlbih7XG4gICAgaWQ6IHVzZXIuaWQsXG4gICAgcm9sZTogdXNlci5yb2xlLFxuICAgIHVuaW9uSWQ6IHVzZXIudW5pb25JZCxcbiAgICBkaXN0cmljdElkOiB1c2VyLmRpc3RyaWN0SWQsXG4gICAgY2h1cmNoSWQ6IHVzZXIuY2h1cmNoSWQsXG4gIH0pO1xuXG4gIGNvbnN0IHsgcGFzc3dvcmRIYXNoLCAuLi5zYWZlVXNlciB9ID0gdXNlcjtcblxuICByZXR1cm4ge1xuICAgIHRva2VuLFxuICAgIHVzZXI6IHNhZmVVc2VyIGFzIEF1dGhVc2VyLFxuICB9IHNhdGlzZmllcyB7IHRva2VuOiBzdHJpbmc7IHVzZXI6IEF1dGhVc2VyIH07XG59O1xuIl0sIm5hbWVzIjpbImJjcnlwdCIsImp3dCIsIlJvbGUiLCJwcmlzbWEiLCJlbnYiLCJVbmF1dGhvcml6ZWRFcnJvciIsIlVzZXJNb2RlbCIsIlRPS0VOX1RUTF9TRUNPTkRTIiwiaGFzaFBhc3N3b3JkIiwicGFzc3dvcmQiLCJzYWx0IiwiZ2VuU2FsdCIsImhhc2giLCJ2ZXJpZnlQYXNzd29yZCIsImNvbXBhcmUiLCJzaWduVG9rZW4iLCJ1c2VyIiwicGF5bG9hZCIsInN1YiIsImlkIiwicm9sZSIsInVuaW9uSWQiLCJkaXN0cmljdElkIiwiY2h1cmNoSWQiLCJzaWduIiwiSldUX1NFQ1JFVCIsImV4cGlyZXNJbiIsImdldFVzZXJGcm9tVG9rZW4iLCJ0b2tlbiIsImRlY29kZWQiLCJ2ZXJpZnkiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJpc0FjdGl2ZSIsImVycm9yIiwiYXV0aGVudGljYXRlV2l0aENyZWRlbnRpYWxzIiwiZW1haWwiLCJwaG9uZU51bWJlciIsImZpbmRCeVBob25lTnVtYmVyIiwiTUVNQkVSIiwiZmluZEJ5RW1haWwiLCJ2YWxpZFBhc3N3b3JkIiwicGFzc3dvcmRIYXNoIiwic2FmZVVzZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/services/auth.service.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/pass.service.ts":
/*!**************************************!*\
  !*** ./src/services/pass.service.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   issuePassForAttendance: () => (/* binding */ issuePassForAttendance),\n/* harmony export */   revokePass: () => (/* binding */ revokePass),\n/* harmony export */   verifyPassToken: () => (/* binding */ verifyPassToken)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _models_pass_model__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/models/pass.model */ \"(rsc)/./src/models/pass.model.ts\");\n/* harmony import */ var _models_attendance_model__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/models/attendance.model */ \"(rsc)/./src/models/attendance.model.ts\");\n/* harmony import */ var _utils_qr__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/utils/qr */ \"(rsc)/./src/utils/qr.ts\");\n/* harmony import */ var _lib_sms__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/sms */ \"(rsc)/./src/lib/sms.ts\");\n/* harmony import */ var _lib_env__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/env */ \"(rsc)/./src/lib/env.ts\");\n/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/lib/errors */ \"(rsc)/./src/lib/errors.ts\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n\n\n\n\n\n\n\n\nconst attendanceWithPassInclude = {\n    member: true,\n    session: {\n        include: {\n            church: {\n                include: {\n                    district: {\n                        include: {\n                            union: true\n                        }\n                    }\n                }\n            }\n        }\n    },\n    pass: true\n};\nconst passWithRelationsInclude = {\n    attendance: {\n        include: {\n            session: {\n                include: {\n                    church: {\n                        select: {\n                            id: true,\n                            name: true\n                        }\n                    }\n                }\n            }\n        }\n    },\n    member: {\n        select: {\n            id: true,\n            firstName: true,\n            lastName: true,\n            nationalId: true,\n            church: {\n                select: {\n                    id: true,\n                    name: true\n                }\n            }\n        }\n    },\n    church: {\n        select: {\n            id: true,\n            name: true\n        }\n    }\n};\nconst issuePassForAttendance = async (attendanceId)=>{\n    const attendance = await _models_attendance_model__WEBPACK_IMPORTED_MODULE_2__.AttendanceModel.findById(attendanceId, {\n        include: attendanceWithPassInclude\n    });\n    if (!attendance) {\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_6__.NotFoundError(\"Attendance record not found\");\n    }\n    const attendanceWithRelations = attendance;\n    if (attendanceWithRelations.status !== \"APPROVED\") {\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_6__.AppError(\"Attendance must be approved before issuing a pass\", 400);\n    }\n    if (attendanceWithRelations.pass) {\n        return attendanceWithRelations.pass;\n    }\n    const token = crypto__WEBPACK_IMPORTED_MODULE_0___default().randomUUID();\n    const qrPayload = await (0,_utils_qr__WEBPACK_IMPORTED_MODULE_3__.generateQrPayload)(token);\n    const pass = await _models_pass_model__WEBPACK_IMPORTED_MODULE_1__.PassModel.create({\n        data: {\n            attendanceId: attendanceWithRelations.id,\n            memberId: attendanceWithRelations.member.id,\n            churchId: attendanceWithRelations.session.church?.id ?? null,\n            token,\n            qrPayload,\n            sessionDate: attendanceWithRelations.session.date\n        }\n    });\n    const message = `Umuganda pass: ${attendanceWithRelations.member.firstName} ${attendanceWithRelations.member.lastName} (${attendanceWithRelations.session.date.toISOString().slice(0, 10)})`;\n    if (_lib_env__WEBPACK_IMPORTED_MODULE_5__.env.SMS_API_KEY && attendanceWithRelations.member.phoneNumber) {\n        await (0,_lib_sms__WEBPACK_IMPORTED_MODULE_4__.sendSms)({\n            to: attendanceWithRelations.member.phoneNumber,\n            message\n        });\n        await _models_pass_model__WEBPACK_IMPORTED_MODULE_1__.PassModel.update({\n            where: {\n                id: pass.id\n            },\n            data: {\n                smsSentAt: new Date()\n            }\n        });\n    }\n    return pass;\n};\nconst verifyPassToken = async (token)=>{\n    let pass = await _models_pass_model__WEBPACK_IMPORTED_MODULE_1__.PassModel.findByToken(token, {\n        include: passWithRelationsInclude\n    });\n    if (!pass) {\n        const memberPass = await _lib_prisma__WEBPACK_IMPORTED_MODULE_7__.prisma.memberPass.findUnique({\n            where: {\n                token\n            },\n            include: {\n                member: {\n                    select: {\n                        id: true,\n                        churchId: true,\n                        church: {\n                            select: {\n                                id: true,\n                                name: true\n                            }\n                        }\n                    }\n                }\n            }\n        });\n        if (!memberPass) {\n            return {\n                valid: false\n            };\n        }\n        const churchId = memberPass.member?.church?.id ?? memberPass.member?.churchId ?? null;\n        const sessionDate = memberPass.updatedAt ?? new Date();\n        await _models_pass_model__WEBPACK_IMPORTED_MODULE_1__.PassModel.upsert({\n            where: {\n                memberId: memberPass.memberId\n            },\n            update: {\n                token: memberPass.token,\n                qrPayload: memberPass.qrPayload,\n                churchId,\n                sessionDate,\n                expiresAt: memberPass.expiresAt ?? null,\n                smsSentAt: memberPass.smsSentAt ?? null\n            },\n            create: {\n                memberId: memberPass.memberId,\n                churchId,\n                token: memberPass.token,\n                qrPayload: memberPass.qrPayload,\n                sessionDate,\n                expiresAt: memberPass.expiresAt ?? null,\n                smsSentAt: memberPass.smsSentAt ?? null\n            }\n        });\n        pass = await _models_pass_model__WEBPACK_IMPORTED_MODULE_1__.PassModel.findByToken(token, {\n            include: passWithRelationsInclude\n        });\n        if (!pass) {\n            return {\n                valid: false\n            };\n        }\n    }\n    if (pass.expiresAt && pass.expiresAt.getTime() < Date.now()) {\n        return {\n            valid: false,\n            reason: \"expired\"\n        };\n    }\n    const passWithRelations = pass;\n    const church = passWithRelations.attendance?.session.church ?? passWithRelations.church ?? passWithRelations.member?.church ?? null;\n    const sessionDate = passWithRelations.attendance?.session.date ?? passWithRelations.sessionDate ?? passWithRelations.createdAt;\n    // Get member details if available\n    let member = null;\n    if (passWithRelations.member) {\n        member = {\n            firstName: passWithRelations.member.firstName,\n            lastName: passWithRelations.member.lastName,\n            nationalId: passWithRelations.member.nationalId\n        };\n    } else {\n        // If member is not included in the relations, fetch it separately\n        const memberRecord = await _lib_prisma__WEBPACK_IMPORTED_MODULE_7__.prisma.user.findUnique({\n            where: {\n                id: passWithRelations.memberId\n            },\n            select: {\n                firstName: true,\n                lastName: true,\n                nationalId: true\n            }\n        });\n        if (memberRecord) {\n            member = {\n                firstName: memberRecord.firstName,\n                lastName: memberRecord.lastName,\n                nationalId: memberRecord.nationalId\n            };\n        }\n    }\n    return {\n        valid: true,\n        passId: passWithRelations.id,\n        issuedAt: passWithRelations.createdAt,\n        sessionDate,\n        church,\n        member\n    };\n};\nconst revokePass = async (attendanceId)=>{\n    const existing = await _models_pass_model__WEBPACK_IMPORTED_MODULE_1__.PassModel.findMany({\n        where: {\n            attendanceId\n        },\n        take: 1\n    });\n    if (!existing.length) {\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_6__.AppError(\"No pass associated with this attendance\", 400);\n    }\n    await _models_pass_model__WEBPACK_IMPORTED_MODULE_1__.PassModel.delete(existing[0].id);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNGO0lBRUEsT0FBTztRQUNMNkIsT0FBTztRQUNQVyxRQUFRSixrQkFBa0J4QyxFQUFFO1FBQzVCNkMsVUFBVUwsa0JBQWtCQyxTQUFTO1FBQ3JDeEI7UUFDQXhCO1FBQ0FIO0lBQ0Y7QUFDRixFQUFFO0FBRUssTUFBTXdELGFBQWEsT0FBT3hDO0lBQy9CLE1BQU15QyxXQUFXLE1BQU1sRSx5REFBU0EsQ0FBQ21FLFFBQVEsQ0FBQztRQUN4Q3RCLE9BQU87WUFBRXBCO1FBQWE7UUFDdEIyQyxNQUFNO0lBQ1I7SUFFQSxJQUFJLENBQUNGLFNBQVNHLE1BQU0sRUFBRTtRQUNwQixNQUFNLElBQUloRSxpREFBUUEsQ0FBQywyQ0FBMkM7SUFDaEU7SUFFQSxNQUFNTCx5REFBU0EsQ0FBQ3NFLE1BQU0sQ0FBQ0osUUFBUSxDQUFDLEVBQUUsQ0FBQy9DLEVBQUU7QUFDdkMsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3NkYS1iYWNrZW5kLy4vc3JjL3NlcnZpY2VzL3Bhc3Muc2VydmljZS50cz83YzU1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjcnlwdG8gZnJvbSBcImNyeXB0b1wiO1xuaW1wb3J0IHR5cGUgeyBQcmlzbWEgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcblxuaW1wb3J0IHsgUGFzc01vZGVsIH0gZnJvbSBcIkAvbW9kZWxzL3Bhc3MubW9kZWxcIjtcbmltcG9ydCB7IEF0dGVuZGFuY2VNb2RlbCB9IGZyb20gXCJAL21vZGVscy9hdHRlbmRhbmNlLm1vZGVsXCI7XG5pbXBvcnQgeyBnZW5lcmF0ZVFyUGF5bG9hZCB9IGZyb20gXCJAL3V0aWxzL3FyXCI7XG5pbXBvcnQgeyBzZW5kU21zIH0gZnJvbSBcIkAvbGliL3Ntc1wiO1xuaW1wb3J0IHsgZW52IH0gZnJvbSBcIkAvbGliL2VudlwiO1xuaW1wb3J0IHsgQXBwRXJyb3IsIE5vdEZvdW5kRXJyb3IgfSBmcm9tIFwiQC9saWIvZXJyb3JzXCI7XG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tIFwiQC9saWIvcHJpc21hXCI7XG5cbmNvbnN0IGF0dGVuZGFuY2VXaXRoUGFzc0luY2x1ZGUgPSB7XG4gIG1lbWJlcjogdHJ1ZSxcbiAgc2Vzc2lvbjoge1xuICAgIGluY2x1ZGU6IHtcbiAgICAgIGNodXJjaDoge1xuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgZGlzdHJpY3Q6IHtcbiAgICAgICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICAgICAgdW5pb246IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gIH0sXG4gIHBhc3M6IHRydWUsXG59IHNhdGlzZmllcyBQcmlzbWEuQXR0ZW5kYW5jZVJlY29yZEluY2x1ZGU7XG5cbnR5cGUgQXR0ZW5kYW5jZVdpdGhQYXNzID0gUHJpc21hLkF0dGVuZGFuY2VSZWNvcmRHZXRQYXlsb2FkPHtcbiAgaW5jbHVkZTogdHlwZW9mIGF0dGVuZGFuY2VXaXRoUGFzc0luY2x1ZGU7XG59PjtcblxuY29uc3QgcGFzc1dpdGhSZWxhdGlvbnNJbmNsdWRlID0ge1xuICBhdHRlbmRhbmNlOiB7XG4gICAgaW5jbHVkZToge1xuICAgICAgc2Vzc2lvbjoge1xuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgY2h1cmNoOiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICAgIG5hbWU6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gIH0sXG4gIG1lbWJlcjoge1xuICAgIHNlbGVjdDoge1xuICAgICAgaWQ6IHRydWUsXG4gICAgICBmaXJzdE5hbWU6IHRydWUsXG4gICAgICBsYXN0TmFtZTogdHJ1ZSxcbiAgICAgIG5hdGlvbmFsSWQ6IHRydWUsXG4gICAgICBjaHVyY2g6IHtcbiAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSxcbiAgY2h1cmNoOiB7XG4gICAgc2VsZWN0OiB7XG4gICAgICBpZDogdHJ1ZSxcbiAgICAgIG5hbWU6IHRydWUsXG4gICAgfSxcbiAgfSxcbn0gc2F0aXNmaWVzIFByaXNtYS5QYXNzSW5jbHVkZTtcblxudHlwZSBQYXNzV2l0aFJlbGF0aW9ucyA9IFByaXNtYS5QYXNzR2V0UGF5bG9hZDx7XG4gIGluY2x1ZGU6IHR5cGVvZiBwYXNzV2l0aFJlbGF0aW9uc0luY2x1ZGU7XG59PjtcblxuZXhwb3J0IGNvbnN0IGlzc3VlUGFzc0ZvckF0dGVuZGFuY2UgPSBhc3luYyAoYXR0ZW5kYW5jZUlkOiBzdHJpbmcpID0+IHtcbiAgY29uc3QgYXR0ZW5kYW5jZSA9IGF3YWl0IEF0dGVuZGFuY2VNb2RlbC5maW5kQnlJZChhdHRlbmRhbmNlSWQsIHtcbiAgICBpbmNsdWRlOiBhdHRlbmRhbmNlV2l0aFBhc3NJbmNsdWRlLFxuICB9KTtcblxuICBpZiAoIWF0dGVuZGFuY2UpIHtcbiAgICB0aHJvdyBuZXcgTm90Rm91bmRFcnJvcihcIkF0dGVuZGFuY2UgcmVjb3JkIG5vdCBmb3VuZFwiKTtcbiAgfVxuXG4gIGNvbnN0IGF0dGVuZGFuY2VXaXRoUmVsYXRpb25zID0gYXR0ZW5kYW5jZSBhcyBBdHRlbmRhbmNlV2l0aFBhc3M7XG5cbiAgaWYgKGF0dGVuZGFuY2VXaXRoUmVsYXRpb25zLnN0YXR1cyAhPT0gXCJBUFBST1ZFRFwiKSB7XG4gICAgdGhyb3cgbmV3IEFwcEVycm9yKFwiQXR0ZW5kYW5jZSBtdXN0IGJlIGFwcHJvdmVkIGJlZm9yZSBpc3N1aW5nIGEgcGFzc1wiLCA0MDApO1xuICB9XG5cbiAgaWYgKGF0dGVuZGFuY2VXaXRoUmVsYXRpb25zLnBhc3MpIHtcbiAgICByZXR1cm4gYXR0ZW5kYW5jZVdpdGhSZWxhdGlvbnMucGFzcztcbiAgfVxuXG4gIGNvbnN0IHRva2VuID0gY3J5cHRvLnJhbmRvbVVVSUQoKTtcbiAgY29uc3QgcXJQYXlsb2FkID0gYXdhaXQgZ2VuZXJhdGVRclBheWxvYWQodG9rZW4pO1xuXG4gIGNvbnN0IHBhc3MgPSBhd2FpdCBQYXNzTW9kZWwuY3JlYXRlKHtcbiAgICBkYXRhOiB7XG4gICAgICBhdHRlbmRhbmNlSWQ6IGF0dGVuZGFuY2VXaXRoUmVsYXRpb25zLmlkLFxuICAgICAgbWVtYmVySWQ6IGF0dGVuZGFuY2VXaXRoUmVsYXRpb25zLm1lbWJlci5pZCxcbiAgICAgIGNodXJjaElkOiBhdHRlbmRhbmNlV2l0aFJlbGF0aW9ucy5zZXNzaW9uLmNodXJjaD8uaWQgPz8gbnVsbCxcbiAgICAgIHRva2VuLFxuICAgICAgcXJQYXlsb2FkLFxuICAgICAgc2Vzc2lvbkRhdGU6IGF0dGVuZGFuY2VXaXRoUmVsYXRpb25zLnNlc3Npb24uZGF0ZSxcbiAgICB9LFxuICB9KTtcblxuICBjb25zdCBtZXNzYWdlID0gYFVtdWdhbmRhIHBhc3M6ICR7YXR0ZW5kYW5jZVdpdGhSZWxhdGlvbnMubWVtYmVyLmZpcnN0TmFtZX0gJHthdHRlbmRhbmNlV2l0aFJlbGF0aW9ucy5tZW1iZXIubGFzdE5hbWV9ICgke2F0dGVuZGFuY2VXaXRoUmVsYXRpb25zLnNlc3Npb24uZGF0ZVxuICAgIC50b0lTT1N0cmluZygpXG4gICAgLnNsaWNlKDAsIDEwKX0pYDtcblxuICBpZiAoZW52LlNNU19BUElfS0VZICYmIGF0dGVuZGFuY2VXaXRoUmVsYXRpb25zLm1lbWJlci5waG9uZU51bWJlcikge1xuICAgIGF3YWl0IHNlbmRTbXMoe1xuICAgICAgdG86IGF0dGVuZGFuY2VXaXRoUmVsYXRpb25zLm1lbWJlci5waG9uZU51bWJlcixcbiAgICAgIG1lc3NhZ2UsXG4gICAgfSk7XG4gICAgYXdhaXQgUGFzc01vZGVsLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogcGFzcy5pZCB9LFxuICAgICAgZGF0YTogeyBzbXNTZW50QXQ6IG5ldyBEYXRlKCkgfSxcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBwYXNzO1xufTtcblxuZXhwb3J0IGNvbnN0IHZlcmlmeVBhc3NUb2tlbiA9IGFzeW5jICh0b2tlbjogc3RyaW5nKSA9PiB7XG4gIGxldCBwYXNzID0gYXdhaXQgUGFzc01vZGVsLmZpbmRCeVRva2VuKHRva2VuLCB7XG4gICAgaW5jbHVkZTogcGFzc1dpdGhSZWxhdGlvbnNJbmNsdWRlLFxuICB9KTtcblxuICBpZiAoIXBhc3MpIHtcbiAgICBjb25zdCBtZW1iZXJQYXNzID0gYXdhaXQgcHJpc21hLm1lbWJlclBhc3MuZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZTogeyB0b2tlbiB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBtZW1iZXI6IHtcbiAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgICAgY2h1cmNoSWQ6IHRydWUsXG4gICAgICAgICAgICBjaHVyY2g6IHtcbiAgICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBpZiAoIW1lbWJlclBhc3MpIHtcbiAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSB9IGFzIGNvbnN0O1xuICAgIH1cblxuICAgIGNvbnN0IGNodXJjaElkID0gbWVtYmVyUGFzcy5tZW1iZXI/LmNodXJjaD8uaWQgPz8gbWVtYmVyUGFzcy5tZW1iZXI/LmNodXJjaElkID8/IG51bGw7XG4gICAgY29uc3Qgc2Vzc2lvbkRhdGUgPSBtZW1iZXJQYXNzLnVwZGF0ZWRBdCA/PyBuZXcgRGF0ZSgpO1xuXG4gICAgYXdhaXQgUGFzc01vZGVsLnVwc2VydCh7XG4gICAgICB3aGVyZTogeyBtZW1iZXJJZDogbWVtYmVyUGFzcy5tZW1iZXJJZCB9LFxuICAgICAgdXBkYXRlOiB7XG4gICAgICAgIHRva2VuOiBtZW1iZXJQYXNzLnRva2VuLFxuICAgICAgICBxclBheWxvYWQ6IG1lbWJlclBhc3MucXJQYXlsb2FkLFxuICAgICAgICBjaHVyY2hJZCxcbiAgICAgICAgc2Vzc2lvbkRhdGUsXG4gICAgICAgIGV4cGlyZXNBdDogbWVtYmVyUGFzcy5leHBpcmVzQXQgPz8gbnVsbCxcbiAgICAgICAgc21zU2VudEF0OiBtZW1iZXJQYXNzLnNtc1NlbnRBdCA/PyBudWxsLFxuICAgICAgfSxcbiAgICAgIGNyZWF0ZToge1xuICAgICAgICBtZW1iZXJJZDogbWVtYmVyUGFzcy5tZW1iZXJJZCxcbiAgICAgICAgY2h1cmNoSWQsXG4gICAgICAgIHRva2VuOiBtZW1iZXJQYXNzLnRva2VuLFxuICAgICAgICBxclBheWxvYWQ6IG1lbWJlclBhc3MucXJQYXlsb2FkLFxuICAgICAgICBzZXNzaW9uRGF0ZSxcbiAgICAgICAgZXhwaXJlc0F0OiBtZW1iZXJQYXNzLmV4cGlyZXNBdCA/PyBudWxsLFxuICAgICAgICBzbXNTZW50QXQ6IG1lbWJlclBhc3Muc21zU2VudEF0ID8/IG51bGwsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgcGFzcyA9IGF3YWl0IFBhc3NNb2RlbC5maW5kQnlUb2tlbih0b2tlbiwge1xuICAgICAgaW5jbHVkZTogcGFzc1dpdGhSZWxhdGlvbnNJbmNsdWRlLFxuICAgIH0pO1xuXG4gICAgaWYgKCFwYXNzKSB7XG4gICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UgfSBhcyBjb25zdDtcbiAgICB9XG4gIH1cblxuICBpZiAocGFzcy5leHBpcmVzQXQgJiYgcGFzcy5leHBpcmVzQXQuZ2V0VGltZSgpIDwgRGF0ZS5ub3coKSkge1xuICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgcmVhc29uOiBcImV4cGlyZWRcIiB9IGFzIGNvbnN0O1xuICB9XG5cbiAgY29uc3QgcGFzc1dpdGhSZWxhdGlvbnMgPSBwYXNzIGFzIFBhc3NXaXRoUmVsYXRpb25zO1xuXG4gIGNvbnN0IGNodXJjaCA9XG4gICAgcGFzc1dpdGhSZWxhdGlvbnMuYXR0ZW5kYW5jZT8uc2Vzc2lvbi5jaHVyY2ggPz9cbiAgICBwYXNzV2l0aFJlbGF0aW9ucy5jaHVyY2ggPz9cbiAgICBwYXNzV2l0aFJlbGF0aW9ucy5tZW1iZXI/LmNodXJjaCA/P1xuICAgIG51bGw7XG5cbiAgY29uc3Qgc2Vzc2lvbkRhdGUgPVxuICAgIHBhc3NXaXRoUmVsYXRpb25zLmF0dGVuZGFuY2U/LnNlc3Npb24uZGF0ZSA/P1xuICAgIHBhc3NXaXRoUmVsYXRpb25zLnNlc3Npb25EYXRlID8/XG4gICAgcGFzc1dpdGhSZWxhdGlvbnMuY3JlYXRlZEF0O1xuXG4gIC8vIEdldCBtZW1iZXIgZGV0YWlscyBpZiBhdmFpbGFibGVcbiAgbGV0IG1lbWJlciA9IG51bGw7XG4gIGlmIChwYXNzV2l0aFJlbGF0aW9ucy5tZW1iZXIpIHtcbiAgICBtZW1iZXIgPSB7XG4gICAgICBmaXJzdE5hbWU6IHBhc3NXaXRoUmVsYXRpb25zLm1lbWJlci5maXJzdE5hbWUsXG4gICAgICBsYXN0TmFtZTogcGFzc1dpdGhSZWxhdGlvbnMubWVtYmVyLmxhc3ROYW1lLFxuICAgICAgbmF0aW9uYWxJZDogcGFzc1dpdGhSZWxhdGlvbnMubWVtYmVyLm5hdGlvbmFsSWRcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIC8vIElmIG1lbWJlciBpcyBub3QgaW5jbHVkZWQgaW4gdGhlIHJlbGF0aW9ucywgZmV0Y2ggaXQgc2VwYXJhdGVseVxuICAgIGNvbnN0IG1lbWJlclJlY29yZCA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHsgaWQ6IHBhc3NXaXRoUmVsYXRpb25zLm1lbWJlcklkIH0sXG4gICAgICBzZWxlY3Q6IHtcbiAgICAgICAgZmlyc3ROYW1lOiB0cnVlLFxuICAgICAgICBsYXN0TmFtZTogdHJ1ZSxcbiAgICAgICAgbmF0aW9uYWxJZDogdHJ1ZSxcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgXG4gICAgaWYgKG1lbWJlclJlY29yZCkge1xuICAgICAgbWVtYmVyID0ge1xuICAgICAgICBmaXJzdE5hbWU6IG1lbWJlclJlY29yZC5maXJzdE5hbWUsXG4gICAgICAgIGxhc3ROYW1lOiBtZW1iZXJSZWNvcmQubGFzdE5hbWUsXG4gICAgICAgIG5hdGlvbmFsSWQ6IG1lbWJlclJlY29yZC5uYXRpb25hbElkXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgdmFsaWQ6IHRydWUsXG4gICAgcGFzc0lkOiBwYXNzV2l0aFJlbGF0aW9ucy5pZCxcbiAgICBpc3N1ZWRBdDogcGFzc1dpdGhSZWxhdGlvbnMuY3JlYXRlZEF0LFxuICAgIHNlc3Npb25EYXRlLFxuICAgIGNodXJjaCxcbiAgICBtZW1iZXIsXG4gIH0gYXMgY29uc3Q7XG59O1xuXG5leHBvcnQgY29uc3QgcmV2b2tlUGFzcyA9IGFzeW5jIChhdHRlbmRhbmNlSWQ6IHN0cmluZykgPT4ge1xuICBjb25zdCBleGlzdGluZyA9IGF3YWl0IFBhc3NNb2RlbC5maW5kTWFueSh7XG4gICAgd2hlcmU6IHsgYXR0ZW5kYW5jZUlkIH0sXG4gICAgdGFrZTogMSxcbiAgfSk7XG5cbiAgaWYgKCFleGlzdGluZy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgQXBwRXJyb3IoXCJObyBwYXNzIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGF0dGVuZGFuY2VcIiwgNDAwKTtcbiAgfVxuXG4gIGF3YWl0IFBhc3NNb2RlbC5kZWxldGUoZXhpc3RpbmdbMF0uaWQpO1xufTtcbiJdLCJuYW1lcyI6WyJjcnlwdG8iLCJQYXNzTW9kZWwiLCJBdHRlbmRhbmNlTW9kZWwiLCJnZW5lcmF0ZVFyUGF5bG9hZCIsInNlbmRTbXMiLCJlbnYiLCJBcHBFcnJvciIsIk5vdEZvdW5kRXJyb3IiLCJwcmlzbWEiLCJhdHRlbmRhbmNlV2l0aFBhc3NJbmNsdWRlIiwibWVtYmVyIiwic2Vzc2lvbiIsImluY2x1ZGUiLCJjaHVyY2giLCJkaXN0cmljdCIsInVuaW9uIiwicGFzcyIsInBhc3NXaXRoUmVsYXRpb25zSW5jbHVkZSIsImF0dGVuZGFuY2UiLCJzZWxlY3QiLCJpZCIsIm5hbWUiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsIm5hdGlvbmFsSWQiLCJpc3N1ZVBhc3NGb3JBdHRlbmRhbmNlIiwiYXR0ZW5kYW5jZUlkIiwiZmluZEJ5SWQiLCJhdHRlbmRhbmNlV2l0aFJlbGF0aW9ucyIsInN0YXR1cyIsInRva2VuIiwicmFuZG9tVVVJRCIsInFyUGF5bG9hZCIsImNyZWF0ZSIsImRhdGEiLCJtZW1iZXJJZCIsImNodXJjaElkIiwic2Vzc2lvbkRhdGUiLCJkYXRlIiwibWVzc2FnZSIsInRvSVNPU3RyaW5nIiwic2xpY2UiLCJTTVNfQVBJX0tFWSIsInBob25lTnVtYmVyIiwidG8iLCJ1cGRhdGUiLCJ3aGVyZSIsInNtc1NlbnRBdCIsIkRhdGUiLCJ2ZXJpZnlQYXNzVG9rZW4iLCJmaW5kQnlUb2tlbiIsIm1lbWJlclBhc3MiLCJmaW5kVW5pcXVlIiwidmFsaWQiLCJ1cGRhdGVkQXQiLCJ1cHNlcnQiLCJleHBpcmVzQXQiLCJnZXRUaW1lIiwibm93IiwicmVhc29uIiwicGFzc1dpdGhSZWxhdGlvbnMiLCJjcmVhdGVkQXQiLCJtZW1iZXJSZWNvcmQiLCJ1c2VyIiwicGFzc0lkIiwiaXNzdWVkQXQiLCJyZXZva2VQYXNzIiwiZXhpc3RpbmciLCJmaW5kTWFueSIsInRha2UiLCJsZW5ndGgiLCJkZWxldGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/services/pass.service.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/report.service.ts":
/*!****************************************!*\
  !*** ./src/services/report.service.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAttendanceBreakdownByChurch: () => (/* binding */ getAttendanceBreakdownByChurch),\n/* harmony export */   getAttendanceBreakdownByDistrict: () => (/* binding */ getAttendanceBreakdownByDistrict),\n/* harmony export */   getAttendanceSummaryForUser: () => (/* binding */ getAttendanceSummaryForUser)\n/* harmony export */ });\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var _services_attendance_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/services/attendance.service */ \"(rsc)/./src/services/attendance.service.ts\");\n/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/errors */ \"(rsc)/./src/lib/errors.ts\");\n\n\n\nconst parseDate = (value)=>{\n    if (!value) {\n        return undefined;\n    }\n    const date = new Date(value);\n    if (Number.isNaN(date.getTime())) {\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_2__.ForbiddenError(`Invalid date value: ${value}`);\n    }\n    return date;\n};\nconst applyRoleScopedFilters = (user, filters)=>{\n    if (user.role === \"UNION_ADMIN\") {\n        return filters;\n    }\n    if (user.role === \"DISTRICT_ADMIN\") {\n        if (!user.districtId) {\n            throw new _lib_errors__WEBPACK_IMPORTED_MODULE_2__.ForbiddenError(\"No district assigned to this account\");\n        }\n        if (filters.districtId && filters.districtId !== user.districtId) {\n            throw new _lib_errors__WEBPACK_IMPORTED_MODULE_2__.ForbiddenError(\"Cannot view reports outside your district\");\n        }\n        return {\n            ...filters,\n            districtId: user.districtId\n        };\n    }\n    if (user.role === \"CHURCH_ADMIN\") {\n        if (!user.churchId) {\n            throw new _lib_errors__WEBPACK_IMPORTED_MODULE_2__.ForbiddenError(\"No church assigned to this account\");\n        }\n        if (filters.churchId && filters.churchId !== user.churchId) {\n            throw new _lib_errors__WEBPACK_IMPORTED_MODULE_2__.ForbiddenError(\"Cannot view reports outside your church\");\n        }\n        return {\n            ...filters,\n            churchId: user.churchId,\n            districtId: user.districtId ?? filters.districtId\n        };\n    }\n    throw new _lib_errors__WEBPACK_IMPORTED_MODULE_2__.ForbiddenError(\"Not allowed to view reports\");\n};\nconst buildWhereForReports = (user, filters)=>{\n    const where = (0,_services_attendance_service__WEBPACK_IMPORTED_MODULE_1__.buildAttendanceWhereForUser)(user, filters);\n    const from = parseDate(filters.fromDate);\n    const to = parseDate(filters.toDate);\n    if (from || to) {\n        const createdAtFilter = {\n            ...from ? {\n                gte: from\n            } : {},\n            ...to ? {\n                lte: to\n            } : {}\n        };\n        where.createdAt = createdAtFilter;\n    }\n    return where;\n};\nconst getAttendanceSummaryForUser = async (user, filters = {})=>{\n    const scoped = applyRoleScopedFilters(user, filters);\n    const where = buildWhereForReports(user, scoped);\n    const [total, approved] = await Promise.all([\n        _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.attendanceRecord.count({\n            where\n        }),\n        _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.attendanceRecord.count({\n            where: {\n                ...where,\n                status: \"APPROVED\"\n            }\n        })\n    ]);\n    const pending = total - approved;\n    return {\n        total,\n        approved,\n        pending\n    };\n};\nconst getAttendanceBreakdownByChurch = async (user, filters = {})=>{\n    const scoped = applyRoleScopedFilters(user, filters);\n    const where = buildWhereForReports(user, scoped);\n    const rows = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.attendanceRecord.groupBy({\n        where,\n        by: [\n            \"sessionId\"\n        ],\n        _count: {\n            _all: true\n        }\n    });\n    if (!rows.length) {\n        return [];\n    }\n    const sessionIds = rows.map((row)=>row.sessionId);\n    const sessions = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.umugandaSession.findMany({\n        where: {\n            id: {\n                in: sessionIds\n            }\n        },\n        select: {\n            id: true,\n            church: {\n                select: {\n                    id: true,\n                    name: true,\n                    districtId: true\n                }\n            }\n        }\n    });\n    const sessionMap = new Map(sessions.map((session)=>[\n            session.id,\n            session.church\n        ]));\n    const breakdown = new Map();\n    for (const row of rows){\n        const church = sessionMap.get(row.sessionId);\n        const churchId = church?.id ?? \"unknown\";\n        const current = breakdown.get(churchId);\n        const count = row._count._all;\n        if (current) {\n            current.attendanceCount += count;\n        } else {\n            breakdown.set(churchId, {\n                churchId,\n                churchName: church?.name ?? \"Unknown Church\",\n                districtId: church?.districtId ?? null,\n                attendanceCount: count\n            });\n        }\n    }\n    return Array.from(breakdown.values());\n};\nconst getAttendanceBreakdownByDistrict = async (user, filters = {})=>{\n    const scoped = applyRoleScopedFilters(user, filters);\n    const where = buildWhereForReports(user, scoped);\n    const rows = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.attendanceRecord.groupBy({\n        where,\n        by: [\n            \"sessionId\"\n        ],\n        _count: {\n            _all: true\n        }\n    });\n    if (!rows.length) {\n        return [];\n    }\n    const sessionIds = rows.map((row)=>row.sessionId);\n    const sessions = await _lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.umugandaSession.findMany({\n        where: {\n            id: {\n                in: sessionIds\n            }\n        },\n        select: {\n            id: true,\n            church: {\n                select: {\n                    district: {\n                        select: {\n                            id: true,\n                            name: true\n                        }\n                    }\n                }\n            }\n        }\n    });\n    const sessionDistrictMap = new Map(sessions.map((session)=>[\n            session.id,\n            session.church?.district\n        ]));\n    const breakdown = new Map();\n    for (const row of rows){\n        const district = sessionDistrictMap.get(row.sessionId);\n        const districtId = district?.id ?? \"unknown\";\n        const current = breakdown.get(districtId);\n        const count = row._count._all;\n        if (current) {\n            current.attendanceCount += count;\n        } else {\n            breakdown.set(districtId, {\n                districtId,\n                districtName: district?.name ?? \"Unknown District\",\n                attendanceCount: count\n            });\n        }\n    }\n    return Array.from(breakdown.values());\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmljZXMvcmVwb3J0LnNlcnZpY2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBRXNDO0FBSUM7QUFDTztBQU85QyxNQUFNRyxZQUFZLENBQUNDO0lBQ2pCLElBQUksQ0FBQ0EsT0FBTztRQUNWLE9BQU9DO0lBQ1Q7SUFFQSxNQUFNQyxPQUFPLElBQUlDLEtBQUtIO0lBQ3RCLElBQUlJLE9BQU9DLEtBQUssQ0FBQ0gsS0FBS0ksT0FBTyxLQUFLO1FBQ2hDLE1BQU0sSUFBSVIsdURBQWNBLENBQUMsQ0FBQyxvQkFBb0IsRUFBRUUsTUFBTSxDQUFDO0lBQ3pEO0lBRUEsT0FBT0U7QUFDVDtBQUVBLE1BQU1LLHlCQUF5QixDQUFDQyxNQUFZQztJQUMxQyxJQUFJRCxLQUFLRSxJQUFJLEtBQUssZUFBZTtRQUMvQixPQUFPRDtJQUNUO0lBRUEsSUFBSUQsS0FBS0UsSUFBSSxLQUFLLGtCQUFrQjtRQUNsQyxJQUFJLENBQUNGLEtBQUtHLFVBQVUsRUFBRTtZQUNwQixNQUFNLElBQUliLHVEQUFjQSxDQUFDO1FBQzNCO1FBRUEsSUFBSVcsUUFBUUUsVUFBVSxJQUFJRixRQUFRRSxVQUFVLEtBQUtILEtBQUtHLFVBQVUsRUFBRTtZQUNoRSxNQUFNLElBQUliLHVEQUFjQSxDQUFDO1FBQzNCO1FBRUEsT0FBTztZQUNMLEdBQUdXLE9BQU87WUFDVkUsWUFBWUgsS0FBS0csVUFBVTtRQUM3QjtJQUNGO0lBRUEsSUFBSUgsS0FBS0UsSUFBSSxLQUFLLGdCQUFnQjtRQUNoQyxJQUFJLENBQUNGLEtBQUtJLFFBQVEsRUFBRTtZQUNsQixNQUFNLElBQUlkLHVEQUFjQSxDQUFDO1FBQzNCO1FBRUEsSUFBSVcsUUFBUUcsUUFBUSxJQUFJSCxRQUFRRyxRQUFRLEtBQUtKLEtBQUtJLFFBQVEsRUFBRTtZQUMxRCxNQUFNLElBQUlkLHVEQUFjQSxDQUFDO1FBQzNCO1FBRUEsT0FBTztZQUNMLEdBQUdXLE9BQU87WUFDVkcsVUFBVUosS0FBS0ksUUFBUTtZQUN2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QUFhcUQsVUFBVWpCLE1BQU07UUFDbkMsTUFBTVUsVUFBVUYsVUFBVUMsR0FBRyxDQUFDN0M7UUFDOUIsTUFBTW1CLFFBQVFZLElBQUlMLE1BQU0sQ0FBQ0MsSUFBSTtRQUU3QixJQUFJbUIsU0FBUztZQUNYQSxRQUFRQyxlQUFlLElBQUk1QjtRQUM3QixPQUFPO1lBQ0x5QixVQUFVSSxHQUFHLENBQUNoRCxZQUFZO2dCQUN4QkE7Z0JBQ0F1RCxjQUFjRixVQUFVYixRQUFRO2dCQUNoQ08saUJBQWlCNUI7WUFDbkI7UUFDRjtJQUNGO0lBRUEsT0FBTytCLE1BQU05QyxJQUFJLENBQUN3QyxVQUFVTyxNQUFNO0FBQ3BDLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZGEtYmFja2VuZC8uL3NyYy9zZXJ2aWNlcy9yZXBvcnQuc2VydmljZS50cz8zMjJjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgUHJpc21hLCBVc2VyIH0gZnJvbSBcIkBwcmlzbWEvY2xpZW50XCI7XG5cbmltcG9ydCB7IHByaXNtYSB9IGZyb20gXCJAL2xpYi9wcmlzbWFcIjtcbmltcG9ydCB7XG4gIGJ1aWxkQXR0ZW5kYW5jZVdoZXJlRm9yVXNlcixcbiAgdHlwZSBBdHRlbmRhbmNlRmlsdGVycyxcbn0gZnJvbSBcIkAvc2VydmljZXMvYXR0ZW5kYW5jZS5zZXJ2aWNlXCI7XG5pbXBvcnQgeyBGb3JiaWRkZW5FcnJvciB9IGZyb20gXCJAL2xpYi9lcnJvcnNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBBdHRlbmRhbmNlU3VtbWFyeUZpbHRlcnMgZXh0ZW5kcyBBdHRlbmRhbmNlRmlsdGVycyB7XG4gIGZyb21EYXRlPzogc3RyaW5nIHwgbnVsbDtcbiAgdG9EYXRlPzogc3RyaW5nIHwgbnVsbDtcbn1cblxuY29uc3QgcGFyc2VEYXRlID0gKHZhbHVlOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkKTogRGF0ZSB8IHVuZGVmaW5lZCA9PiB7XG4gIGlmICghdmFsdWUpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHZhbHVlKTtcbiAgaWYgKE51bWJlci5pc05hTihkYXRlLmdldFRpbWUoKSkpIHtcbiAgICB0aHJvdyBuZXcgRm9yYmlkZGVuRXJyb3IoYEludmFsaWQgZGF0ZSB2YWx1ZTogJHt2YWx1ZX1gKTtcbiAgfVxuXG4gIHJldHVybiBkYXRlO1xufTtcblxuY29uc3QgYXBwbHlSb2xlU2NvcGVkRmlsdGVycyA9ICh1c2VyOiBVc2VyLCBmaWx0ZXJzOiBBdHRlbmRhbmNlU3VtbWFyeUZpbHRlcnMpID0+IHtcbiAgaWYgKHVzZXIucm9sZSA9PT0gXCJVTklPTl9BRE1JTlwiKSB7XG4gICAgcmV0dXJuIGZpbHRlcnM7XG4gIH1cblxuICBpZiAodXNlci5yb2xlID09PSBcIkRJU1RSSUNUX0FETUlOXCIpIHtcbiAgICBpZiAoIXVzZXIuZGlzdHJpY3RJZCkge1xuICAgICAgdGhyb3cgbmV3IEZvcmJpZGRlbkVycm9yKFwiTm8gZGlzdHJpY3QgYXNzaWduZWQgdG8gdGhpcyBhY2NvdW50XCIpO1xuICAgIH1cblxuICAgIGlmIChmaWx0ZXJzLmRpc3RyaWN0SWQgJiYgZmlsdGVycy5kaXN0cmljdElkICE9PSB1c2VyLmRpc3RyaWN0SWQpIHtcbiAgICAgIHRocm93IG5ldyBGb3JiaWRkZW5FcnJvcihcIkNhbm5vdCB2aWV3IHJlcG9ydHMgb3V0c2lkZSB5b3VyIGRpc3RyaWN0XCIpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAuLi5maWx0ZXJzLFxuICAgICAgZGlzdHJpY3RJZDogdXNlci5kaXN0cmljdElkLFxuICAgIH0gc2F0aXNmaWVzIEF0dGVuZGFuY2VTdW1tYXJ5RmlsdGVycztcbiAgfVxuXG4gIGlmICh1c2VyLnJvbGUgPT09IFwiQ0hVUkNIX0FETUlOXCIpIHtcbiAgICBpZiAoIXVzZXIuY2h1cmNoSWQpIHtcbiAgICAgIHRocm93IG5ldyBGb3JiaWRkZW5FcnJvcihcIk5vIGNodXJjaCBhc3NpZ25lZCB0byB0aGlzIGFjY291bnRcIik7XG4gICAgfVxuXG4gICAgaWYgKGZpbHRlcnMuY2h1cmNoSWQgJiYgZmlsdGVycy5jaHVyY2hJZCAhPT0gdXNlci5jaHVyY2hJZCkge1xuICAgICAgdGhyb3cgbmV3IEZvcmJpZGRlbkVycm9yKFwiQ2Fubm90IHZpZXcgcmVwb3J0cyBvdXRzaWRlIHlvdXIgY2h1cmNoXCIpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAuLi5maWx0ZXJzLFxuICAgICAgY2h1cmNoSWQ6IHVzZXIuY2h1cmNoSWQsXG4gICAgICBkaXN0cmljdElkOiB1c2VyLmRpc3RyaWN0SWQgPz8gZmlsdGVycy5kaXN0cmljdElkLFxuICAgIH0gc2F0aXNmaWVzIEF0dGVuZGFuY2VTdW1tYXJ5RmlsdGVycztcbiAgfVxuXG4gIHRocm93IG5ldyBGb3JiaWRkZW5FcnJvcihcIk5vdCBhbGxvd2VkIHRvIHZpZXcgcmVwb3J0c1wiKTtcbn07XG5cbmNvbnN0IGJ1aWxkV2hlcmVGb3JSZXBvcnRzID0gKFxuICB1c2VyOiBVc2VyLFxuICBmaWx0ZXJzOiBBdHRlbmRhbmNlU3VtbWFyeUZpbHRlcnMsXG4pOiBQcmlzbWEuQXR0ZW5kYW5jZVJlY29yZFdoZXJlSW5wdXQgPT4ge1xuICBjb25zdCB3aGVyZSA9IGJ1aWxkQXR0ZW5kYW5jZVdoZXJlRm9yVXNlcih1c2VyLCBmaWx0ZXJzKTtcblxuICBjb25zdCBmcm9tID0gcGFyc2VEYXRlKGZpbHRlcnMuZnJvbURhdGUpO1xuICBjb25zdCB0byA9IHBhcnNlRGF0ZShmaWx0ZXJzLnRvRGF0ZSk7XG5cbiAgaWYgKGZyb20gfHwgdG8pIHtcbiAgICBjb25zdCBjcmVhdGVkQXRGaWx0ZXI6IFByaXNtYS5EYXRlVGltZUZpbHRlciA9IHtcbiAgICAgIC4uLihmcm9tID8geyBndGU6IGZyb20gfSA6IHt9KSxcbiAgICAgIC4uLih0byA/IHsgbHRlOiB0byB9IDoge30pLFxuICAgIH07XG5cbiAgICB3aGVyZS5jcmVhdGVkQXQgPSBjcmVhdGVkQXRGaWx0ZXI7XG4gIH1cblxuICByZXR1cm4gd2hlcmU7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0QXR0ZW5kYW5jZVN1bW1hcnlGb3JVc2VyID0gYXN5bmMgKFxuICB1c2VyOiBVc2VyLFxuICBmaWx0ZXJzOiBBdHRlbmRhbmNlU3VtbWFyeUZpbHRlcnMgPSB7fSxcbikgPT4ge1xuICBjb25zdCBzY29wZWQgPSBhcHBseVJvbGVTY29wZWRGaWx0ZXJzKHVzZXIsIGZpbHRlcnMpO1xuICBjb25zdCB3aGVyZSA9IGJ1aWxkV2hlcmVGb3JSZXBvcnRzKHVzZXIsIHNjb3BlZCk7XG5cbiAgY29uc3QgW3RvdGFsLCBhcHByb3ZlZF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgcHJpc21hLmF0dGVuZGFuY2VSZWNvcmQuY291bnQoeyB3aGVyZSB9KSxcbiAgICBwcmlzbWEuYXR0ZW5kYW5jZVJlY29yZC5jb3VudCh7XG4gICAgICB3aGVyZToge1xuICAgICAgICAuLi53aGVyZSxcbiAgICAgICAgc3RhdHVzOiBcIkFQUFJPVkVEXCIsXG4gICAgICB9LFxuICAgIH0pLFxuICBdKTtcblxuICBjb25zdCBwZW5kaW5nID0gdG90YWwgLSBhcHByb3ZlZDtcblxuICByZXR1cm4ge1xuICAgIHRvdGFsLFxuICAgIGFwcHJvdmVkLFxuICAgIHBlbmRpbmcsXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0QXR0ZW5kYW5jZUJyZWFrZG93bkJ5Q2h1cmNoID0gYXN5bmMgKFxuICB1c2VyOiBVc2VyLFxuICBmaWx0ZXJzOiBBdHRlbmRhbmNlU3VtbWFyeUZpbHRlcnMgPSB7fSxcbikgPT4ge1xuICBjb25zdCBzY29wZWQgPSBhcHBseVJvbGVTY29wZWRGaWx0ZXJzKHVzZXIsIGZpbHRlcnMpO1xuICBjb25zdCB3aGVyZSA9IGJ1aWxkV2hlcmVGb3JSZXBvcnRzKHVzZXIsIHNjb3BlZCk7XG5cbiAgY29uc3Qgcm93cyA9IGF3YWl0IHByaXNtYS5hdHRlbmRhbmNlUmVjb3JkLmdyb3VwQnkoe1xuICAgIHdoZXJlLFxuICAgIGJ5OiBbXCJzZXNzaW9uSWRcIl0sXG4gICAgX2NvdW50OiB7IF9hbGw6IHRydWUgfSxcbiAgfSk7XG5cbiAgaWYgKCFyb3dzLmxlbmd0aCkge1xuICAgIHJldHVybiBbXSBhcyBjb25zdDtcbiAgfVxuXG4gIGNvbnN0IHNlc3Npb25JZHMgPSByb3dzLm1hcCgocm93KSA9PiByb3cuc2Vzc2lvbklkKTtcbiAgY29uc3Qgc2Vzc2lvbnMgPSBhd2FpdCBwcmlzbWEudW11Z2FuZGFTZXNzaW9uLmZpbmRNYW55KHtcbiAgICB3aGVyZTogeyBpZDogeyBpbjogc2Vzc2lvbklkcyB9IH0sXG4gICAgc2VsZWN0OiB7XG4gICAgICBpZDogdHJ1ZSxcbiAgICAgIGNodXJjaDoge1xuICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICAgIGRpc3RyaWN0SWQ6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gIH0pO1xuXG4gIGNvbnN0IHNlc3Npb25NYXAgPSBuZXcgTWFwKHNlc3Npb25zLm1hcCgoc2Vzc2lvbikgPT4gW3Nlc3Npb24uaWQsIHNlc3Npb24uY2h1cmNoXSkpO1xuXG4gIGNvbnN0IGJyZWFrZG93biA9IG5ldyBNYXA8XG4gICAgc3RyaW5nLFxuICAgIHtcbiAgICAgIGNodXJjaElkOiBzdHJpbmc7XG4gICAgICBjaHVyY2hOYW1lOiBzdHJpbmc7XG4gICAgICBkaXN0cmljdElkOiBzdHJpbmcgfCBudWxsO1xuICAgICAgYXR0ZW5kYW5jZUNvdW50OiBudW1iZXI7XG4gICAgfVxuICA+KCk7XG5cbiAgZm9yIChjb25zdCByb3cgb2Ygcm93cykge1xuICAgIGNvbnN0IGNodXJjaCA9IHNlc3Npb25NYXAuZ2V0KHJvdy5zZXNzaW9uSWQpO1xuICAgIGNvbnN0IGNodXJjaElkID0gY2h1cmNoPy5pZCA/PyBcInVua25vd25cIjtcbiAgICBjb25zdCBjdXJyZW50ID0gYnJlYWtkb3duLmdldChjaHVyY2hJZCk7XG4gICAgY29uc3QgY291bnQgPSByb3cuX2NvdW50Ll9hbGw7XG5cbiAgICBpZiAoY3VycmVudCkge1xuICAgICAgY3VycmVudC5hdHRlbmRhbmNlQ291bnQgKz0gY291bnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJyZWFrZG93bi5zZXQoY2h1cmNoSWQsIHtcbiAgICAgICAgY2h1cmNoSWQsXG4gICAgICAgIGNodXJjaE5hbWU6IGNodXJjaD8ubmFtZSA/PyBcIlVua25vd24gQ2h1cmNoXCIsXG4gICAgICAgIGRpc3RyaWN0SWQ6IGNodXJjaD8uZGlzdHJpY3RJZCA/PyBudWxsLFxuICAgICAgICBhdHRlbmRhbmNlQ291bnQ6IGNvdW50LFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIEFycmF5LmZyb20oYnJlYWtkb3duLnZhbHVlcygpKTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRBdHRlbmRhbmNlQnJlYWtkb3duQnlEaXN0cmljdCA9IGFzeW5jIChcbiAgdXNlcjogVXNlcixcbiAgZmlsdGVyczogQXR0ZW5kYW5jZVN1bW1hcnlGaWx0ZXJzID0ge30sXG4pID0+IHtcbiAgY29uc3Qgc2NvcGVkID0gYXBwbHlSb2xlU2NvcGVkRmlsdGVycyh1c2VyLCBmaWx0ZXJzKTtcbiAgY29uc3Qgd2hlcmUgPSBidWlsZFdoZXJlRm9yUmVwb3J0cyh1c2VyLCBzY29wZWQpO1xuXG4gIGNvbnN0IHJvd3MgPSBhd2FpdCBwcmlzbWEuYXR0ZW5kYW5jZVJlY29yZC5ncm91cEJ5KHtcbiAgICB3aGVyZSxcbiAgICBieTogW1wic2Vzc2lvbklkXCJdLFxuICAgIF9jb3VudDogeyBfYWxsOiB0cnVlIH0sXG4gIH0pO1xuXG4gIGlmICghcm93cy5sZW5ndGgpIHtcbiAgICByZXR1cm4gW10gYXMgY29uc3Q7XG4gIH1cblxuICBjb25zdCBzZXNzaW9uSWRzID0gcm93cy5tYXAoKHJvdykgPT4gcm93LnNlc3Npb25JZCk7XG4gIGNvbnN0IHNlc3Npb25zID0gYXdhaXQgcHJpc21hLnVtdWdhbmRhU2Vzc2lvbi5maW5kTWFueSh7XG4gICAgd2hlcmU6IHsgaWQ6IHsgaW46IHNlc3Npb25JZHMgfSB9LFxuICAgIHNlbGVjdDoge1xuICAgICAgaWQ6IHRydWUsXG4gICAgICBjaHVyY2g6IHtcbiAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgZGlzdHJpY3Q6IHtcbiAgICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSk7XG5cbiAgY29uc3Qgc2Vzc2lvbkRpc3RyaWN0TWFwID0gbmV3IE1hcChcbiAgICBzZXNzaW9ucy5tYXAoKHNlc3Npb24pID0+IFtzZXNzaW9uLmlkLCBzZXNzaW9uLmNodXJjaD8uZGlzdHJpY3RdKSxcbiAgKTtcblxuICBjb25zdCBicmVha2Rvd24gPSBuZXcgTWFwPFxuICAgIHN0cmluZyxcbiAgICB7XG4gICAgICBkaXN0cmljdElkOiBzdHJpbmc7XG4gICAgICBkaXN0cmljdE5hbWU6IHN0cmluZztcbiAgICAgIGF0dGVuZGFuY2VDb3VudDogbnVtYmVyO1xuICAgIH1cbiAgPigpO1xuXG4gIGZvciAoY29uc3Qgcm93IG9mIHJvd3MpIHtcbiAgICBjb25zdCBkaXN0cmljdCA9IHNlc3Npb25EaXN0cmljdE1hcC5nZXQocm93LnNlc3Npb25JZCk7XG4gICAgY29uc3QgZGlzdHJpY3RJZCA9IGRpc3RyaWN0Py5pZCA/PyBcInVua25vd25cIjtcbiAgICBjb25zdCBjdXJyZW50ID0gYnJlYWtkb3duLmdldChkaXN0cmljdElkKTtcbiAgICBjb25zdCBjb3VudCA9IHJvdy5fY291bnQuX2FsbDtcblxuICAgIGlmIChjdXJyZW50KSB7XG4gICAgICBjdXJyZW50LmF0dGVuZGFuY2VDb3VudCArPSBjb3VudDtcbiAgICB9IGVsc2Uge1xuICAgICAgYnJlYWtkb3duLnNldChkaXN0cmljdElkLCB7XG4gICAgICAgIGRpc3RyaWN0SWQsXG4gICAgICAgIGRpc3RyaWN0TmFtZTogZGlzdHJpY3Q/Lm5hbWUgPz8gXCJVbmtub3duIERpc3RyaWN0XCIsXG4gICAgICAgIGF0dGVuZGFuY2VDb3VudDogY291bnQsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gQXJyYXkuZnJvbShicmVha2Rvd24udmFsdWVzKCkpO1xufTtcbiJdLCJuYW1lcyI6WyJwcmlzbWEiLCJidWlsZEF0dGVuZGFuY2VXaGVyZUZvclVzZXIiLCJGb3JiaWRkZW5FcnJvciIsInBhcnNlRGF0ZSIsInZhbHVlIiwidW5kZWZpbmVkIiwiZGF0ZSIsIkRhdGUiLCJOdW1iZXIiLCJpc05hTiIsImdldFRpbWUiLCJhcHBseVJvbGVTY29wZWRGaWx0ZXJzIiwidXNlciIsImZpbHRlcnMiLCJyb2xlIiwiZGlzdHJpY3RJZCIsImNodXJjaElkIiwiYnVpbGRXaGVyZUZvclJlcG9ydHMiLCJ3aGVyZSIsImZyb20iLCJmcm9tRGF0ZSIsInRvIiwidG9EYXRlIiwiY3JlYXRlZEF0RmlsdGVyIiwiZ3RlIiwibHRlIiwiY3JlYXRlZEF0IiwiZ2V0QXR0ZW5kYW5jZVN1bW1hcnlGb3JVc2VyIiwic2NvcGVkIiwidG90YWwiLCJhcHByb3ZlZCIsIlByb21pc2UiLCJhbGwiLCJhdHRlbmRhbmNlUmVjb3JkIiwiY291bnQiLCJzdGF0dXMiLCJwZW5kaW5nIiwiZ2V0QXR0ZW5kYW5jZUJyZWFrZG93bkJ5Q2h1cmNoIiwicm93cyIsImdyb3VwQnkiLCJieSIsIl9jb3VudCIsIl9hbGwiLCJsZW5ndGgiLCJzZXNzaW9uSWRzIiwibWFwIiwicm93Iiwic2Vzc2lvbklkIiwic2Vzc2lvbnMiLCJ1bXVnYW5kYVNlc3Npb24iLCJmaW5kTWFueSIsImlkIiwiaW4iLCJzZWxlY3QiLCJjaHVyY2giLCJuYW1lIiwic2Vzc2lvbk1hcCIsIk1hcCIsInNlc3Npb24iLCJicmVha2Rvd24iLCJnZXQiLCJjdXJyZW50IiwiYXR0ZW5kYW5jZUNvdW50Iiwic2V0IiwiY2h1cmNoTmFtZSIsIkFycmF5IiwidmFsdWVzIiwiZ2V0QXR0ZW5kYW5jZUJyZWFrZG93bkJ5RGlzdHJpY3QiLCJkaXN0cmljdCIsInNlc3Npb25EaXN0cmljdE1hcCIsImRpc3RyaWN0TmFtZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/services/report.service.ts\n");

/***/ }),

/***/ "(rsc)/./src/utils/qr.ts":
/*!*************************!*\
  !*** ./src/utils/qr.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateQrPayload: () => (/* binding */ generateQrPayload)\n/* harmony export */ });\n/* harmony import */ var qrcode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! qrcode */ \"(rsc)/./node_modules/qrcode/lib/index.js\");\n\nconst generateQrPayload = async (token)=>{\n    return qrcode__WEBPACK_IMPORTED_MODULE_0__.toDataURL(JSON.stringify({\n        token\n    }));\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvdXRpbHMvcXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBNEI7QUFFckIsTUFBTUMsb0JBQW9CLE9BQU9DO0lBQ3RDLE9BQU9GLDZDQUFnQixDQUFDSSxLQUFLQyxTQUFTLENBQUM7UUFBRUg7SUFBTTtBQUNqRCxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2RhLWJhY2tlbmQvLi9zcmMvdXRpbHMvcXIudHM/MjY0NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUVJDb2RlIGZyb20gXCJxcmNvZGVcIjtcblxuZXhwb3J0IGNvbnN0IGdlbmVyYXRlUXJQYXlsb2FkID0gYXN5bmMgKHRva2VuOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4gPT4ge1xuICByZXR1cm4gUVJDb2RlLnRvRGF0YVVSTChKU09OLnN0cmluZ2lmeSh7IHRva2VuIH0pKTtcbn07XG4iXSwibmFtZXMiOlsiUVJDb2RlIiwiZ2VuZXJhdGVRclBheWxvYWQiLCJ0b2tlbiIsInRvRGF0YVVSTCIsIkpTT04iLCJzdHJpbmdpZnkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/utils/qr.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/zod","vendor-chunks/semver","vendor-chunks/bcryptjs","vendor-chunks/jsonwebtoken","vendor-chunks/lodash.includes","vendor-chunks/jws","vendor-chunks/lodash.once","vendor-chunks/jwa","vendor-chunks/lodash.isinteger","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/lodash.isplainobject","vendor-chunks/ms","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isboolean","vendor-chunks/safe-buffer","vendor-chunks/buffer-equal-constant-time","vendor-chunks/twilio","vendor-chunks/xmlbuilder","vendor-chunks/mime-db","vendor-chunks/axios","vendor-chunks/qrcode","vendor-chunks/pngjs","vendor-chunks/qs","vendor-chunks/follow-redirects","vendor-chunks/object-inspect","vendor-chunks/debug","vendor-chunks/url-parse","vendor-chunks/form-data","vendor-chunks/get-intrinsic","vendor-chunks/https-proxy-agent","vendor-chunks/dayjs","vendor-chunks/agent-base","vendor-chunks/asynckit","vendor-chunks/dijkstrajs","vendor-chunks/combined-stream","vendor-chunks/mime-types","vendor-chunks/side-channel-list","vendor-chunks/proxy-from-env","vendor-chunks/supports-color","vendor-chunks/side-channel-weakmap","vendor-chunks/querystringify","vendor-chunks/has-symbols","vendor-chunks/delayed-stream","vendor-chunks/function-bind","vendor-chunks/side-channel-map","vendor-chunks/es-set-tostringtag","vendor-chunks/side-channel","vendor-chunks/scmp","vendor-chunks/get-proto","vendor-chunks/call-bind-apply-helpers","vendor-chunks/dunder-proto","vendor-chunks/math-intrinsics","vendor-chunks/requires-port","vendor-chunks/call-bound","vendor-chunks/es-errors","vendor-chunks/has-flag","vendor-chunks/gopd","vendor-chunks/es-define-property","vendor-chunks/hasown","vendor-chunks/has-tostringtag","vendor-chunks/es-object-atoms"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Freports%2Fattendance%2Froute&page=%2Fapi%2Freports%2Fattendance%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Freports%2Fattendance%2Froute.ts&appDir=%2FVolumes%2FMacintosh%20HD%20-%20Data%2Fsda%2Fsda-backend%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FVolumes%2FMacintosh%20HD%20-%20Data%2Fsda%2Fsda-backend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();