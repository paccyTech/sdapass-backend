"use strict";(()=>{var t={};t.id=158,t.ids=[158],t.modules={53524:t=>{t.exports=require("@prisma/client")},20399:t=>{t.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:t=>{t.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:t=>{t.exports=require("buffer")},84770:t=>{t.exports=require("crypto")},76162:t=>{t.exports=require("stream")},21764:t=>{t.exports=require("util")},3799:(t,e,r)=>{r.r(e),r.d(e,{originalPathname:()=>v,patchFetch:()=>x,requestAsyncStorage:()=>N,routeModule:()=>D,serverHooks:()=>A,staticGenerationAsyncStorage:()=>q});var i={};r.r(i),r.d(i,{DELETE:()=>f,GET:()=>w,OPTIONS:()=>m,PATCH:()=>y});var o=r(49303),a=r(88716),n=r(60670),s=r(87070),d=r(91585),u=r(5754),c=r(9846),l=r(38553),p=r(9867),h=r(46526);let I=d.Ry({unionId:d.Z_().min(1).optional(),name:d.Z_().min(1).optional(),location:d.Z_().optional().nullable()}),w=(0,u.o)({middlewares:[(0,c.k)(["UNION_ADMIN","DISTRICT_ADMIN"]),(0,h.J$)({key:"districtId"})],controller:p.p7}),y=(0,u.o)({middlewares:[(0,c.k)(["UNION_ADMIN"]),(0,l.m)(I.partial({}))],controller:p.fg}),f=(0,u.o)({middlewares:[(0,c.k)(["UNION_ADMIN"])],controller:p.Aw}),m=(0,u.o)({controller:async()=>new s.NextResponse(null,{status:204})}),D=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/districts/[districtId]/route",pathname:"/api/districts/[districtId]",filename:"route",bundlePath:"app/api/districts/[districtId]/route"},resolvedPagePath:"/Volumes/Macintosh HD - Data/sda/sda-backend/app/api/districts/[districtId]/route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:N,staticGenerationAsyncStorage:q,serverHooks:A}=D,v="/api/districts/[districtId]/route";function x(){return(0,n.patchFetch)({serverHooks:A,staticGenerationAsyncStorage:q})}},46526:(t,e,r)=>{r.d(e,{Dy:()=>c,J$:()=>u});var i=r(13538),o=r(47833);let a=async(t,e)=>{let r=await i._.district.findUnique({where:{id:e},include:{union:!0}});if(!r)throw new o.dR("District not found");if("UNION_ADMIN"===t.role||"DISTRICT_ADMIN"===t.role&&t.districtId===e)return r;throw new o.lY("Not allowed to access this district")},n=async(t,e)=>{let r=await i._.church.findUnique({where:{id:e},include:{district:{include:{union:!0}}}});if(!r)throw new o.dR("Church not found");if("UNION_ADMIN"===t.role||"DISTRICT_ADMIN"===t.role&&t.districtId===r.districtId||"CHURCH_ADMIN"===t.role&&t.churchId===e)return r;throw new o.lY("Not allowed to access this church")},s=(t,e)=>{let r="paramsData"in t&&t.paramsData&&"object"==typeof t.paramsData?t.paramsData[e]:void 0,i=t.params?.[e],o="queryData"in t&&t.queryData&&"object"==typeof t.queryData?t.queryData[e]:void 0,a="body"in t&&t.body&&"object"==typeof t.body?t.body[e]:void 0,n=r??i??o??a;return"string"==typeof n&&n.trim().length>0?n:void 0},d=(t,e,{optional:r}={})=>{let i=s(t,e);if(!i&&!r)throw new o.p8(`Missing or invalid identifier for ${e}`);return i},u=(t={})=>{let e=t.key??"districtId",r=t.optional??!1;return async t=>{if(!t.user)throw new o.yj("Authentication required");let i=d(t,e,{optional:r});if(!i)return{...t,district:t.district};let n=await a(t.user,i);return{...t,district:n}}},c=(t={})=>{let e=t.key??"churchId",r=t.optional??!1;return async t=>{if(!t.user)throw new o.yj("Authentication required");let i=d(t,e,{optional:r});if(!i)return{...t,church:t.church};let a=await n(t.user,i);return{...t,church:a}}}}};var e=require("../../../../webpack-runtime.js");e.C(t);var r=t=>e(e.s=t),i=e.X(0,[416,585,263],()=>r(3799));module.exports=i})();