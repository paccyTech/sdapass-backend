"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/auth/password-reset/request/route";
exports.ids = ["app/api/auth/password-reset/request/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "dns":
/*!**********************!*\
  !*** external "dns" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("dns");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "http2":
/*!************************!*\
  !*** external "http2" ***!
  \************************/
/***/ ((module) => {

module.exports = require("http2");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fpassword-reset%2Frequest%2Froute&page=%2Fapi%2Fauth%2Fpassword-reset%2Frequest%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fpassword-reset%2Frequest%2Froute.ts&appDir=%2FVolumes%2FMacintosh%20HD%20-%20Data%2Fsda%2Fsda-backend%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FVolumes%2FMacintosh%20HD%20-%20Data%2Fsda%2Fsda-backend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fpassword-reset%2Frequest%2Froute&page=%2Fapi%2Fauth%2Fpassword-reset%2Frequest%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fpassword-reset%2Frequest%2Froute.ts&appDir=%2FVolumes%2FMacintosh%20HD%20-%20Data%2Fsda%2Fsda-backend%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FVolumes%2FMacintosh%20HD%20-%20Data%2Fsda%2Fsda-backend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Volumes_Macintosh_HD_Data_sda_sda_backend_app_api_auth_password_reset_request_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/auth/password-reset/request/route.ts */ \"(rsc)/./app/api/auth/password-reset/request/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/auth/password-reset/request/route\",\n        pathname: \"/api/auth/password-reset/request\",\n        filename: \"route\",\n        bundlePath: \"app/api/auth/password-reset/request/route\"\n    },\n    resolvedPagePath: \"/Volumes/Macintosh HD - Data/sda/sda-backend/app/api/auth/password-reset/request/route.ts\",\n    nextConfigOutput,\n    userland: _Volumes_Macintosh_HD_Data_sda_sda_backend_app_api_auth_password_reset_request_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/auth/password-reset/request/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhdXRoJTJGcGFzc3dvcmQtcmVzZXQlMkZyZXF1ZXN0JTJGcm91dGUmcGFnZT0lMkZhcGklMkZhdXRoJTJGcGFzc3dvcmQtcmVzZXQlMkZyZXF1ZXN0JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYXV0aCUyRnBhc3N3b3JkLXJlc2V0JTJGcmVxdWVzdCUyRnJvdXRlLnRzJmFwcERpcj0lMkZWb2x1bWVzJTJGTWFjaW50b3NoJTIwSEQlMjAtJTIwRGF0YSUyRnNkYSUyRnNkYS1iYWNrZW5kJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZWb2x1bWVzJTJGTWFjaW50b3NoJTIwSEQlMjAtJTIwRGF0YSUyRnNkYSUyRnNkYS1iYWNrZW5kJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUN5QztBQUN0SDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3NkYS1iYWNrZW5kLz8xNTQ3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Wb2x1bWVzL01hY2ludG9zaCBIRCAtIERhdGEvc2RhL3NkYS1iYWNrZW5kL2FwcC9hcGkvYXV0aC9wYXNzd29yZC1yZXNldC9yZXF1ZXN0L3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hdXRoL3Bhc3N3b3JkLXJlc2V0L3JlcXVlc3Qvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hdXRoL3Bhc3N3b3JkLXJlc2V0L3JlcXVlc3RcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2F1dGgvcGFzc3dvcmQtcmVzZXQvcmVxdWVzdC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Wb2x1bWVzL01hY2ludG9zaCBIRCAtIERhdGEvc2RhL3NkYS1iYWNrZW5kL2FwcC9hcGkvYXV0aC9wYXNzd29yZC1yZXNldC9yZXF1ZXN0L3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9hdXRoL3Bhc3N3b3JkLXJlc2V0L3JlcXVlc3Qvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fpassword-reset%2Frequest%2Froute&page=%2Fapi%2Fauth%2Fpassword-reset%2Frequest%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fpassword-reset%2Frequest%2Froute.ts&appDir=%2FVolumes%2FMacintosh%20HD%20-%20Data%2Fsda%2Fsda-backend%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FVolumes%2FMacintosh%20HD%20-%20Data%2Fsda%2Fsda-backend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/auth/password-reset/request/route.ts":
/*!******************************************************!*\
  !*** ./app/api/auth/password-reset/request/route.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OPTIONS: () => (/* binding */ OPTIONS),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _lib_route__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/route */ \"(rsc)/./src/lib/route.ts\");\n/* harmony import */ var _middlewares_body_middleware__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/middlewares/body.middleware */ \"(rsc)/./src/middlewares/body.middleware.ts\");\n/* harmony import */ var _controllers_passwordReset_controller__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/controllers/passwordReset.controller */ \"(rsc)/./src/controllers/passwordReset.controller.ts\");\n\n\n\n\n\nconst requestSchema = zod__WEBPACK_IMPORTED_MODULE_4__.object({\n    nationalId: zod__WEBPACK_IMPORTED_MODULE_4__.string().min(1).optional(),\n    email: zod__WEBPACK_IMPORTED_MODULE_4__.string().email().optional()\n}).refine((data)=>Boolean(data.email || data.nationalId), {\n    message: \"Provide either email or nationalId\",\n    path: [\n        \"email\"\n    ]\n});\nconst POST = (0,_lib_route__WEBPACK_IMPORTED_MODULE_1__.createHandler)({\n    middlewares: [\n        (0,_middlewares_body_middleware__WEBPACK_IMPORTED_MODULE_2__.jsonBodyMiddleware)(requestSchema)\n    ],\n    controller: _controllers_passwordReset_controller__WEBPACK_IMPORTED_MODULE_3__.requestPasswordResetController\n});\nconst OPTIONS = (0,_lib_route__WEBPACK_IMPORTED_MODULE_1__.createHandler)({\n    controller: async ()=>new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(null, {\n            status: 204\n        })\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2F1dGgvcGFzc3dvcmQtcmVzZXQvcmVxdWVzdC9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTJDO0FBQ25CO0FBRW9CO0FBQ3VCO0FBQ3FCO0FBRXhGLE1BQU1LLGdCQUFnQkosdUNBQ2IsQ0FBQztJQUNOTSxZQUFZTix1Q0FBUSxHQUFHUSxHQUFHLENBQUMsR0FBR0MsUUFBUTtJQUN0Q0MsT0FBT1YsdUNBQVEsR0FBR1UsS0FBSyxHQUFHRCxRQUFRO0FBQ3BDLEdBQ0NFLE1BQU0sQ0FBQyxDQUFDQyxPQUFTQyxRQUFRRCxLQUFLRixLQUFLLElBQUlFLEtBQUtOLFVBQVUsR0FBRztJQUN4RFEsU0FBUztJQUNUQyxNQUFNO1FBQUM7S0FBUTtBQUNqQjtBQUVLLE1BQU1DLE9BQU9mLHlEQUFhQSxDQUFDO0lBQ2hDZ0IsYUFBYTtRQUFDZixnRkFBa0JBLENBQUNFO0tBQWU7SUFDaERjLFlBQVlmLGlHQUE4QkE7QUFDNUMsR0FBRztBQUVJLE1BQU1nQixVQUFVbEIseURBQWFBLENBQUM7SUFDbkNpQixZQUFZLFVBQVksSUFBSW5CLHFEQUFZQSxDQUFDLE1BQU07WUFBRXFCLFFBQVE7UUFBSTtBQUMvRCxHQUFHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2RhLWJhY2tlbmQvLi9hcHAvYXBpL2F1dGgvcGFzc3dvcmQtcmVzZXQvcmVxdWVzdC9yb3V0ZS50cz9kYWMzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xuaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2RcIjtcblxuaW1wb3J0IHsgY3JlYXRlSGFuZGxlciB9IGZyb20gXCJAL2xpYi9yb3V0ZVwiO1xuaW1wb3J0IHsganNvbkJvZHlNaWRkbGV3YXJlIH0gZnJvbSBcIkAvbWlkZGxld2FyZXMvYm9keS5taWRkbGV3YXJlXCI7XG5pbXBvcnQgeyByZXF1ZXN0UGFzc3dvcmRSZXNldENvbnRyb2xsZXIgfSBmcm9tIFwiQC9jb250cm9sbGVycy9wYXNzd29yZFJlc2V0LmNvbnRyb2xsZXJcIjtcblxuY29uc3QgcmVxdWVzdFNjaGVtYSA9IHpcbiAgLm9iamVjdCh7XG4gICAgbmF0aW9uYWxJZDogei5zdHJpbmcoKS5taW4oMSkub3B0aW9uYWwoKSxcbiAgICBlbWFpbDogei5zdHJpbmcoKS5lbWFpbCgpLm9wdGlvbmFsKCksXG4gIH0pXG4gIC5yZWZpbmUoKGRhdGEpID0+IEJvb2xlYW4oZGF0YS5lbWFpbCB8fCBkYXRhLm5hdGlvbmFsSWQpLCB7XG4gICAgbWVzc2FnZTogXCJQcm92aWRlIGVpdGhlciBlbWFpbCBvciBuYXRpb25hbElkXCIsXG4gICAgcGF0aDogW1wiZW1haWxcIl0sXG4gIH0pO1xuXG5leHBvcnQgY29uc3QgUE9TVCA9IGNyZWF0ZUhhbmRsZXIoe1xuICBtaWRkbGV3YXJlczogW2pzb25Cb2R5TWlkZGxld2FyZShyZXF1ZXN0U2NoZW1hKV0sXG4gIGNvbnRyb2xsZXI6IHJlcXVlc3RQYXNzd29yZFJlc2V0Q29udHJvbGxlcixcbn0pO1xuXG5leHBvcnQgY29uc3QgT1BUSU9OUyA9IGNyZWF0ZUhhbmRsZXIoe1xuICBjb250cm9sbGVyOiBhc3luYyAoKSA9PiBuZXcgTmV4dFJlc3BvbnNlKG51bGwsIHsgc3RhdHVzOiAyMDQgfSksXG59KTtcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJ6IiwiY3JlYXRlSGFuZGxlciIsImpzb25Cb2R5TWlkZGxld2FyZSIsInJlcXVlc3RQYXNzd29yZFJlc2V0Q29udHJvbGxlciIsInJlcXVlc3RTY2hlbWEiLCJvYmplY3QiLCJuYXRpb25hbElkIiwic3RyaW5nIiwibWluIiwib3B0aW9uYWwiLCJlbWFpbCIsInJlZmluZSIsImRhdGEiLCJCb29sZWFuIiwibWVzc2FnZSIsInBhdGgiLCJQT1NUIiwibWlkZGxld2FyZXMiLCJjb250cm9sbGVyIiwiT1BUSU9OUyIsInN0YXR1cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/auth/password-reset/request/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/controllers/passwordReset.controller.ts":
/*!*****************************************************!*\
  !*** ./src/controllers/passwordReset.controller.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   confirmPasswordResetController: () => (/* binding */ confirmPasswordResetController),\n/* harmony export */   requestPasswordResetController: () => (/* binding */ requestPasswordResetController)\n/* harmony export */ });\n/* harmony import */ var _services_passwordReset_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/services/passwordReset.service */ \"(rsc)/./src/services/passwordReset.service.ts\");\n\nconst requestPasswordResetController = async (context)=>{\n    if (!context.body) {\n        throw new Error(\"Missing request body\");\n    }\n    const result = await (0,_services_passwordReset_service__WEBPACK_IMPORTED_MODULE_0__.requestPasswordReset)(context.body);\n    return result;\n};\nconst confirmPasswordResetController = async (context)=>{\n    if (!context.body) {\n        throw new Error(\"Missing request body\");\n    }\n    const result = await (0,_services_passwordReset_service__WEBPACK_IMPORTED_MODULE_0__.confirmPasswordReset)(context.body);\n    return result;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvY29udHJvbGxlcnMvcGFzc3dvcmRSZXNldC5jb250cm9sbGVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQU0wQztBQUVuQyxNQUFNRSxpQ0FBaUMsT0FDNUNDO0lBRUEsSUFBSSxDQUFDQSxRQUFRQyxJQUFJLEVBQUU7UUFDakIsTUFBTSxJQUFJQyxNQUFNO0lBQ2xCO0lBRUEsTUFBTUMsU0FBUyxNQUFNTCxxRkFBb0JBLENBQUNFLFFBQVFDLElBQUk7SUFDdEQsT0FBT0U7QUFDVCxFQUFFO0FBRUssTUFBTUMsaUNBQWlDLE9BQzVDSjtJQUVBLElBQUksQ0FBQ0EsUUFBUUMsSUFBSSxFQUFFO1FBQ2pCLE1BQU0sSUFBSUMsTUFBTTtJQUNsQjtJQUVBLE1BQU1DLFNBQVMsTUFBTU4scUZBQW9CQSxDQUFDRyxRQUFRQyxJQUFJO0lBQ3RELE9BQU9FO0FBQ1QsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3NkYS1iYWNrZW5kLy4vc3JjL2NvbnRyb2xsZXJzL3Bhc3N3b3JkUmVzZXQuY29udHJvbGxlci50cz9iMGU5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgQm9keUNvbnRleHQgfSBmcm9tIFwiQC9taWRkbGV3YXJlcy90eXBlc1wiO1xuaW1wb3J0IHtcbiAgY29uZmlybVBhc3N3b3JkUmVzZXQsXG4gIHJlcXVlc3RQYXNzd29yZFJlc2V0LFxuICB0eXBlIFBhc3N3b3JkUmVzZXRDb25maXJtSW5wdXQsXG4gIHR5cGUgUGFzc3dvcmRSZXNldFJlcXVlc3RJbnB1dCxcbn0gZnJvbSBcIkAvc2VydmljZXMvcGFzc3dvcmRSZXNldC5zZXJ2aWNlXCI7XG5cbmV4cG9ydCBjb25zdCByZXF1ZXN0UGFzc3dvcmRSZXNldENvbnRyb2xsZXIgPSBhc3luYyAoXG4gIGNvbnRleHQ6IEJvZHlDb250ZXh0PFBhc3N3b3JkUmVzZXRSZXF1ZXN0SW5wdXQ+LFxuKSA9PiB7XG4gIGlmICghY29udGV4dC5ib2R5KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzc2luZyByZXF1ZXN0IGJvZHlcIik7XG4gIH1cblxuICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXF1ZXN0UGFzc3dvcmRSZXNldChjb250ZXh0LmJvZHkpO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuZXhwb3J0IGNvbnN0IGNvbmZpcm1QYXNzd29yZFJlc2V0Q29udHJvbGxlciA9IGFzeW5jIChcbiAgY29udGV4dDogQm9keUNvbnRleHQ8UGFzc3dvcmRSZXNldENvbmZpcm1JbnB1dD4sXG4pID0+IHtcbiAgaWYgKCFjb250ZXh0LmJvZHkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIHJlcXVlc3QgYm9keVwiKTtcbiAgfVxuXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbmZpcm1QYXNzd29yZFJlc2V0KGNvbnRleHQuYm9keSk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuIl0sIm5hbWVzIjpbImNvbmZpcm1QYXNzd29yZFJlc2V0IiwicmVxdWVzdFBhc3N3b3JkUmVzZXQiLCJyZXF1ZXN0UGFzc3dvcmRSZXNldENvbnRyb2xsZXIiLCJjb250ZXh0IiwiYm9keSIsIkVycm9yIiwicmVzdWx0IiwiY29uZmlybVBhc3N3b3JkUmVzZXRDb250cm9sbGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/controllers/passwordReset.controller.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/email.ts":
/*!**************************!*\
  !*** ./src/lib/email.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getStoredEmails: () => (/* binding */ getStoredEmails),\n/* harmony export */   sendEmail: () => (/* binding */ sendEmail),\n/* harmony export */   sendPasswordResetEmail: () => (/* binding */ sendPasswordResetEmail)\n/* harmony export */ });\n/* harmony import */ var nodemailer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nodemailer */ \"(rsc)/./node_modules/nodemailer/lib/nodemailer.js\");\n/* harmony import */ var _env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./env */ \"(rsc)/./src/lib/env.ts\");\n\n\n// Log environment variables for debugging\nconsole.log(\"Email Config:\", {\n    hasUser: !!_env__WEBPACK_IMPORTED_MODULE_1__.env.GMAIL_USER,\n    hasPass: !!_env__WEBPACK_IMPORTED_MODULE_1__.env.GMAIL_APP_PASSWORD,\n    smtpHost: _env__WEBPACK_IMPORTED_MODULE_1__.env.SMTP_HOST,\n    smtpPort: _env__WEBPACK_IMPORTED_MODULE_1__.env.SMTP_PORT,\n    smtpSecure: _env__WEBPACK_IMPORTED_MODULE_1__.env.SMTP_SECURE\n});\n// Create a simple in-memory email store for development\nconst devEmailStore = [];\n// Only create transporter if we have the required config\nconst transporter = _env__WEBPACK_IMPORTED_MODULE_1__.env.GMAIL_USER && _env__WEBPACK_IMPORTED_MODULE_1__.env.GMAIL_APP_PASSWORD ? nodemailer__WEBPACK_IMPORTED_MODULE_0__.createTransport({\n    host: _env__WEBPACK_IMPORTED_MODULE_1__.env.SMTP_HOST || \"smtp.gmail.com\",\n    port: _env__WEBPACK_IMPORTED_MODULE_1__.env.SMTP_PORT ? parseInt(_env__WEBPACK_IMPORTED_MODULE_1__.env.SMTP_PORT) : 587,\n    secure: _env__WEBPACK_IMPORTED_MODULE_1__.env.SMTP_SECURE === \"true\",\n    auth: {\n        user: _env__WEBPACK_IMPORTED_MODULE_1__.env.GMAIL_USER,\n        pass: _env__WEBPACK_IMPORTED_MODULE_1__.env.GMAIL_APP_PASSWORD\n    },\n    tls: {\n        rejectUnauthorized: false\n    }\n}) : null;\n// Only verify connection if we have a transporter\nif (transporter) {\n    transporter.verify(function(error) {\n        if (error) {\n            console.error(\"SMTP connection error:\", error);\n        } else {\n            console.log(\"SMTP server is ready to take our messages\");\n        }\n    });\n} else {\n    console.log(\"Running in development mode without email configuration\");\n    console.log(\"Emails will be logged to the console instead of being sent\");\n}\nconst sendEmail = async ({ to, subject, text, html })=>{\n    // In development without email config, store the email in memory\n    if (!transporter) {\n        console.warn(\"Email not sent - no email configuration. Storing in dev email store.\");\n        devEmailStore.push({\n            to,\n            subject,\n            text\n        });\n        console.log(\"Dev Email Store:\", devEmailStore);\n        return {\n            success: true,\n            devMode: true,\n            stored: true\n        };\n    }\n    const from = `\"${_env__WEBPACK_IMPORTED_MODULE_1__.env.GMAIL_FROM_NAME || \"Umuganda SDA\"}\" <${_env__WEBPACK_IMPORTED_MODULE_1__.env.GMAIL_USER}>`;\n    try {\n        const info = await transporter.sendMail({\n            from,\n            to,\n            subject,\n            text,\n            html: html || text\n        });\n        console.log(\"Email sent:\", info.messageId);\n        return {\n            success: true,\n            messageId: info.messageId\n        };\n    } catch (error) {\n        console.error(\"Error sending email:\", error);\n        // In development, still store the email even if sending fails\n        if (true) {\n            devEmailStore.push({\n                to,\n                subject,\n                text\n            });\n            console.log(\"Email stored in dev store due to error:\", {\n                to,\n                subject\n            });\n            return {\n                success: true,\n                devMode: true,\n                error: \"Email stored in dev mode\",\n                stored: true\n            };\n        }\n        throw new Error(\"Failed to send email\");\n    }\n};\n// Helper to get stored emails in development\nconst getStoredEmails = ()=>[\n        ...devEmailStore\n    ];\nconst sendPasswordResetEmail = async (email, token, expiresInMinutes)=>{\n    const resetLink = `${_env__WEBPACK_IMPORTED_MODULE_1__.env.PRIMARY_ORIGIN || \"http://localhost:3000\"}/reset-password/confirm?token=${encodeURIComponent(token)}`;\n    const subject = \"Password Reset Request\";\n    const text = `\n    You have requested to reset your password for the Umuganda SDA platform.\n    \n    Please click the following link to reset your password (valid for ${expiresInMinutes} minutes):\n    ${resetLink}\n    \n    If you did not request this, please ignore this email.\n  `;\n    const html = `\n    <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;\">\n      <h2>Password Reset Request</h2>\n      <p>You have requested to reset your password for the Umuganda SDA platform.</p>\n      <p>Please click the button below to reset your password (valid for ${expiresInMinutes} minutes):</p>\n      <div style=\"margin: 25px 0;\">\n        <a href=\"${resetLink}\" \n           style=\"display: inline-block; padding: 10px 20px; background-color: #2d3748; color: white; \n                  text-decoration: none; border-radius: 5px; font-weight: bold;\">\n          Reset Password\n        </a>\n      </div>\n      <p>Or copy and paste this link into your browser:</p>\n      <p style=\"word-break: break-all; color: #3182ce;\">${resetLink}</p>\n      <p>If you did not request this, please ignore this email.</p>\n      <hr style=\"border: none; border-top: 1px solid #e2e8f0; margin: 20px 0;\">\n      <p style=\"font-size: 0.875rem; color: #718096;\">\n        This is an automated message, please do not reply directly to this email.\n      </p>\n    </div>\n  `;\n    return sendEmail({\n        to: email,\n        subject,\n        text,\n        html\n    });\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQU1DLGtCQUFrQixJQUFNO1dBQUkvQjtLQUFjLENBQUM7QUFFakQsTUFBTWdDLHlCQUF5QixPQUFPQyxPQUFlQyxPQUFlQztJQUN6RSxNQUFNQyxZQUFZLENBQUMsRUFBRWpELHFDQUFHQSxDQUFDa0QsY0FBYyxJQUFJLHdCQUF3Qiw4QkFBOEIsRUFBRUMsbUJBQW1CSixPQUFPLENBQUM7SUFFOUgsTUFBTWxCLFVBQVU7SUFDaEIsTUFBTUMsT0FBTyxDQUFDOzs7c0VBR3NELEVBQUVrQixpQkFBaUI7SUFDckYsRUFBRUMsVUFBVTs7O0VBR2QsQ0FBQztJQUVELE1BQU1sQixPQUFPLENBQUM7Ozs7eUVBSXlELEVBQUVpQixpQkFBaUI7O2lCQUUzRSxFQUFFQyxVQUFVOzs7Ozs7O3dEQU8yQixFQUFFQSxVQUFVOzs7Ozs7O0VBT2xFLENBQUM7SUFFRCxPQUFPdEIsVUFBVTtRQUNmQyxJQUFJa0I7UUFDSmpCO1FBQ0FDO1FBQ0FDO0lBQ0Y7QUFDRixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2RhLWJhY2tlbmQvLi9zcmMvbGliL2VtYWlsLnRzPzRjMTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG5vZGVtYWlsZXIgZnJvbSAnbm9kZW1haWxlcic7XG5pbXBvcnQgeyBlbnYgfSBmcm9tICcuL2Vudic7XG5cbi8vIExvZyBlbnZpcm9ubWVudCB2YXJpYWJsZXMgZm9yIGRlYnVnZ2luZ1xuY29uc29sZS5sb2coJ0VtYWlsIENvbmZpZzonLCB7XG4gIGhhc1VzZXI6ICEhZW52LkdNQUlMX1VTRVIsXG4gIGhhc1Bhc3M6ICEhZW52LkdNQUlMX0FQUF9QQVNTV09SRCxcbiAgc210cEhvc3Q6IGVudi5TTVRQX0hPU1QsXG4gIHNtdHBQb3J0OiBlbnYuU01UUF9QT1JULFxuICBzbXRwU2VjdXJlOiBlbnYuU01UUF9TRUNVUkVcbn0pO1xuXG4vLyBDcmVhdGUgYSBzaW1wbGUgaW4tbWVtb3J5IGVtYWlsIHN0b3JlIGZvciBkZXZlbG9wbWVudFxuY29uc3QgZGV2RW1haWxTdG9yZTogQXJyYXk8e3RvOiBzdHJpbmc7IHN1YmplY3Q6IHN0cmluZzsgdGV4dDogc3RyaW5nfT4gPSBbXTtcblxuLy8gT25seSBjcmVhdGUgdHJhbnNwb3J0ZXIgaWYgd2UgaGF2ZSB0aGUgcmVxdWlyZWQgY29uZmlnXG5jb25zdCB0cmFuc3BvcnRlciA9IGVudi5HTUFJTF9VU0VSICYmIGVudi5HTUFJTF9BUFBfUEFTU1dPUkRcbiAgPyBub2RlbWFpbGVyLmNyZWF0ZVRyYW5zcG9ydCh7XG4gICAgICBob3N0OiBlbnYuU01UUF9IT1NUIHx8ICdzbXRwLmdtYWlsLmNvbScsXG4gICAgICBwb3J0OiBlbnYuU01UUF9QT1JUID8gcGFyc2VJbnQoZW52LlNNVFBfUE9SVCkgOiA1ODcsXG4gICAgICBzZWN1cmU6IGVudi5TTVRQX1NFQ1VSRSA9PT0gJ3RydWUnLFxuICAgICAgYXV0aDoge1xuICAgICAgICB1c2VyOiBlbnYuR01BSUxfVVNFUixcbiAgICAgICAgcGFzczogZW52LkdNQUlMX0FQUF9QQVNTV09SRCxcbiAgICAgIH0sXG4gICAgICB0bHM6IHtcbiAgICAgICAgcmVqZWN0VW5hdXRob3JpemVkOiBmYWxzZVxuICAgICAgfVxuICAgIH0pXG4gIDogbnVsbDtcblxuLy8gT25seSB2ZXJpZnkgY29ubmVjdGlvbiBpZiB3ZSBoYXZlIGEgdHJhbnNwb3J0ZXJcbmlmICh0cmFuc3BvcnRlcikge1xuICB0cmFuc3BvcnRlci52ZXJpZnkoZnVuY3Rpb24oZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1NNVFAgY29ubmVjdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKCdTTVRQIHNlcnZlciBpcyByZWFkeSB0byB0YWtlIG91ciBtZXNzYWdlcycpO1xuICAgIH1cbiAgfSk7XG59IGVsc2Uge1xuICBjb25zb2xlLmxvZygnUnVubmluZyBpbiBkZXZlbG9wbWVudCBtb2RlIHdpdGhvdXQgZW1haWwgY29uZmlndXJhdGlvbicpO1xuICBjb25zb2xlLmxvZygnRW1haWxzIHdpbGwgYmUgbG9nZ2VkIHRvIHRoZSBjb25zb2xlIGluc3RlYWQgb2YgYmVpbmcgc2VudCcpO1xufVxuXG50eXBlIFNlbmRNYWlsT3B0aW9ucyA9IHtcbiAgdG86IHN0cmluZztcbiAgc3ViamVjdDogc3RyaW5nO1xuICB0ZXh0OiBzdHJpbmc7XG4gIGh0bWw/OiBzdHJpbmc7XG59O1xuXG5leHBvcnQgY29uc3Qgc2VuZEVtYWlsID0gYXN5bmMgKHsgdG8sIHN1YmplY3QsIHRleHQsIGh0bWwgfTogU2VuZE1haWxPcHRpb25zKSA9PiB7XG4gIC8vIEluIGRldmVsb3BtZW50IHdpdGhvdXQgZW1haWwgY29uZmlnLCBzdG9yZSB0aGUgZW1haWwgaW4gbWVtb3J5XG4gIGlmICghdHJhbnNwb3J0ZXIpIHtcbiAgICBjb25zb2xlLndhcm4oJ0VtYWlsIG5vdCBzZW50IC0gbm8gZW1haWwgY29uZmlndXJhdGlvbi4gU3RvcmluZyBpbiBkZXYgZW1haWwgc3RvcmUuJyk7XG4gICAgZGV2RW1haWxTdG9yZS5wdXNoKHsgdG8sIHN1YmplY3QsIHRleHQgfSk7XG4gICAgY29uc29sZS5sb2coJ0RldiBFbWFpbCBTdG9yZTonLCBkZXZFbWFpbFN0b3JlKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkZXZNb2RlOiB0cnVlLCBzdG9yZWQ6IHRydWUgfTtcbiAgfVxuXG4gIGNvbnN0IGZyb20gPSBgXCIke2Vudi5HTUFJTF9GUk9NX05BTUUgfHwgJ1VtdWdhbmRhIFNEQSd9XCIgPCR7ZW52LkdNQUlMX1VTRVJ9PmA7XG4gIFxuICB0cnkge1xuICAgIGNvbnN0IGluZm8gPSBhd2FpdCB0cmFuc3BvcnRlci5zZW5kTWFpbCh7XG4gICAgICBmcm9tLFxuICAgICAgdG8sXG4gICAgICBzdWJqZWN0LFxuICAgICAgdGV4dCxcbiAgICAgIGh0bWw6IGh0bWwgfHwgdGV4dCxcbiAgICB9KTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygnRW1haWwgc2VudDonLCBpbmZvLm1lc3NhZ2VJZCk7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZUlkOiBpbmZvLm1lc3NhZ2VJZCB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNlbmRpbmcgZW1haWw6JywgZXJyb3IpO1xuICAgIFxuICAgIC8vIEluIGRldmVsb3BtZW50LCBzdGlsbCBzdG9yZSB0aGUgZW1haWwgZXZlbiBpZiBzZW5kaW5nIGZhaWxzXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGRldkVtYWlsU3RvcmUucHVzaCh7IHRvLCBzdWJqZWN0LCB0ZXh0IH0pO1xuICAgICAgY29uc29sZS5sb2coJ0VtYWlsIHN0b3JlZCBpbiBkZXYgc3RvcmUgZHVlIHRvIGVycm9yOicsIHsgdG8sIHN1YmplY3QgfSk7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkZXZNb2RlOiB0cnVlLCBlcnJvcjogJ0VtYWlsIHN0b3JlZCBpbiBkZXYgbW9kZScsIHN0b3JlZDogdHJ1ZSB9O1xuICAgIH1cbiAgICBcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBzZW5kIGVtYWlsJyk7XG4gIH1cbn07XG5cbi8vIEhlbHBlciB0byBnZXQgc3RvcmVkIGVtYWlscyBpbiBkZXZlbG9wbWVudFxuZXhwb3J0IGNvbnN0IGdldFN0b3JlZEVtYWlscyA9ICgpID0+IFsuLi5kZXZFbWFpbFN0b3JlXTtcblxuZXhwb3J0IGNvbnN0IHNlbmRQYXNzd29yZFJlc2V0RW1haWwgPSBhc3luYyAoZW1haWw6IHN0cmluZywgdG9rZW46IHN0cmluZywgZXhwaXJlc0luTWludXRlczogbnVtYmVyKSA9PiB7XG4gIGNvbnN0IHJlc2V0TGluayA9IGAke2Vudi5QUklNQVJZX09SSUdJTiB8fCAnaHR0cDovL2xvY2FsaG9zdDozMDAwJ30vcmVzZXQtcGFzc3dvcmQvY29uZmlybT90b2tlbj0ke2VuY29kZVVSSUNvbXBvbmVudCh0b2tlbil9YDtcbiAgXG4gIGNvbnN0IHN1YmplY3QgPSAnUGFzc3dvcmQgUmVzZXQgUmVxdWVzdCc7XG4gIGNvbnN0IHRleHQgPSBgXG4gICAgWW91IGhhdmUgcmVxdWVzdGVkIHRvIHJlc2V0IHlvdXIgcGFzc3dvcmQgZm9yIHRoZSBVbXVnYW5kYSBTREEgcGxhdGZvcm0uXG4gICAgXG4gICAgUGxlYXNlIGNsaWNrIHRoZSBmb2xsb3dpbmcgbGluayB0byByZXNldCB5b3VyIHBhc3N3b3JkICh2YWxpZCBmb3IgJHtleHBpcmVzSW5NaW51dGVzfSBtaW51dGVzKTpcbiAgICAke3Jlc2V0TGlua31cbiAgICBcbiAgICBJZiB5b3UgZGlkIG5vdCByZXF1ZXN0IHRoaXMsIHBsZWFzZSBpZ25vcmUgdGhpcyBlbWFpbC5cbiAgYDtcbiAgXG4gIGNvbnN0IGh0bWwgPSBgXG4gICAgPGRpdiBzdHlsZT1cImZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsgbWF4LXdpZHRoOiA2MDBweDsgbWFyZ2luOiAwIGF1dG87IHBhZGRpbmc6IDIwcHg7XCI+XG4gICAgICA8aDI+UGFzc3dvcmQgUmVzZXQgUmVxdWVzdDwvaDI+XG4gICAgICA8cD5Zb3UgaGF2ZSByZXF1ZXN0ZWQgdG8gcmVzZXQgeW91ciBwYXNzd29yZCBmb3IgdGhlIFVtdWdhbmRhIFNEQSBwbGF0Zm9ybS48L3A+XG4gICAgICA8cD5QbGVhc2UgY2xpY2sgdGhlIGJ1dHRvbiBiZWxvdyB0byByZXNldCB5b3VyIHBhc3N3b3JkICh2YWxpZCBmb3IgJHtleHBpcmVzSW5NaW51dGVzfSBtaW51dGVzKTo8L3A+XG4gICAgICA8ZGl2IHN0eWxlPVwibWFyZ2luOiAyNXB4IDA7XCI+XG4gICAgICAgIDxhIGhyZWY9XCIke3Jlc2V0TGlua31cIiBcbiAgICAgICAgICAgc3R5bGU9XCJkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHBhZGRpbmc6IDEwcHggMjBweDsgYmFja2dyb3VuZC1jb2xvcjogIzJkMzc0ODsgY29sb3I6IHdoaXRlOyBcbiAgICAgICAgICAgICAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsgYm9yZGVyLXJhZGl1czogNXB4OyBmb250LXdlaWdodDogYm9sZDtcIj5cbiAgICAgICAgICBSZXNldCBQYXNzd29yZFxuICAgICAgICA8L2E+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxwPk9yIGNvcHkgYW5kIHBhc3RlIHRoaXMgbGluayBpbnRvIHlvdXIgYnJvd3Nlcjo8L3A+XG4gICAgICA8cCBzdHlsZT1cIndvcmQtYnJlYWs6IGJyZWFrLWFsbDsgY29sb3I6ICMzMTgyY2U7XCI+JHtyZXNldExpbmt9PC9wPlxuICAgICAgPHA+SWYgeW91IGRpZCBub3QgcmVxdWVzdCB0aGlzLCBwbGVhc2UgaWdub3JlIHRoaXMgZW1haWwuPC9wPlxuICAgICAgPGhyIHN0eWxlPVwiYm9yZGVyOiBub25lOyBib3JkZXItdG9wOiAxcHggc29saWQgI2UyZThmMDsgbWFyZ2luOiAyMHB4IDA7XCI+XG4gICAgICA8cCBzdHlsZT1cImZvbnQtc2l6ZTogMC44NzVyZW07IGNvbG9yOiAjNzE4MDk2O1wiPlxuICAgICAgICBUaGlzIGlzIGFuIGF1dG9tYXRlZCBtZXNzYWdlLCBwbGVhc2UgZG8gbm90IHJlcGx5IGRpcmVjdGx5IHRvIHRoaXMgZW1haWwuXG4gICAgICA8L3A+XG4gICAgPC9kaXY+XG4gIGA7XG4gIFxuICByZXR1cm4gc2VuZEVtYWlsKHtcbiAgICB0bzogZW1haWwsXG4gICAgc3ViamVjdCxcbiAgICB0ZXh0LFxuICAgIGh0bWwsXG4gIH0pO1xufTtcbiJdLCJuYW1lcyI6WyJub2RlbWFpbGVyIiwiZW52IiwiY29uc29sZSIsImxvZyIsImhhc1VzZXIiLCJHTUFJTF9VU0VSIiwiaGFzUGFzcyIsIkdNQUlMX0FQUF9QQVNTV09SRCIsInNtdHBIb3N0IiwiU01UUF9IT1NUIiwic210cFBvcnQiLCJTTVRQX1BPUlQiLCJzbXRwU2VjdXJlIiwiU01UUF9TRUNVUkUiLCJkZXZFbWFpbFN0b3JlIiwidHJhbnNwb3J0ZXIiLCJjcmVhdGVUcmFuc3BvcnQiLCJob3N0IiwicG9ydCIsInBhcnNlSW50Iiwic2VjdXJlIiwiYXV0aCIsInVzZXIiLCJwYXNzIiwidGxzIiwicmVqZWN0VW5hdXRob3JpemVkIiwidmVyaWZ5IiwiZXJyb3IiLCJzZW5kRW1haWwiLCJ0byIsInN1YmplY3QiLCJ0ZXh0IiwiaHRtbCIsIndhcm4iLCJwdXNoIiwic3VjY2VzcyIsImRldk1vZGUiLCJzdG9yZWQiLCJmcm9tIiwiR01BSUxfRlJPTV9OQU1FIiwiaW5mbyIsInNlbmRNYWlsIiwibWVzc2FnZUlkIiwicHJvY2VzcyIsIkVycm9yIiwiZ2V0U3RvcmVkRW1haWxzIiwic2VuZFBhc3N3b3JkUmVzZXRFbWFpbCIsImVtYWlsIiwidG9rZW4iLCJleHBpcmVzSW5NaW51dGVzIiwicmVzZXRMaW5rIiwiUFJJTUFSWV9PUklHSU4iLCJlbmNvZGVVUklDb21wb25lbnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/email.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/env.ts":
/*!************************!*\
  !*** ./src/lib/env.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   env: () => (/* binding */ env)\n/* harmony export */ });\nconst requireEnv = (key)=>{\n    const value = process.env[key];\n    if (!value) {\n        throw new Error(`Missing required environment variable: ${key}`);\n    }\n    return value;\n};\nconst DEFAULT_ORIGIN = \"http://localhost:3000\";\nconst parseOrigins = (value)=>value.split(\",\").map((origin)=>origin.trim()).filter(Boolean);\nconst parsedOrigins = parseOrigins(process.env.CORS_ORIGIN ?? DEFAULT_ORIGIN);\nconst env = {\n    // Required\n    DATABASE_URL: requireEnv(\"DATABASE_URL\"),\n    JWT_SECRET: requireEnv(\"JWT_SECRET\"),\n    // Optional with defaults\n    SMS_API_KEY: process.env.SMS_API_KEY ?? \"\",\n    CORS_ORIGIN: process.env.CORS_ORIGIN ?? DEFAULT_ORIGIN,\n    PRIMARY_ORIGIN: parsedOrigins[0] ?? DEFAULT_ORIGIN,\n    TWILIO_ACCOUNT_SID: process.env.TWILIO_ACCOUNT_SID ?? \"\",\n    TWILIO_AUTH_TOKEN: process.env.TWILIO_AUTH_TOKEN ?? \"\",\n    TWILIO_FROM_NUMBER: process.env.TWILIO_FROM_NUMBER ?? \"\",\n    // Email configuration\n    GMAIL_USER: process.env.GMAIL_USER,\n    GMAIL_APP_PASSWORD: process.env.GMAIL_APP_PASSWORD,\n    GMAIL_FROM_NAME: process.env.GMAIL_FROM_NAME || \"Umuganda SDA\",\n    SMTP_HOST: process.env.SMTP_HOST || \"smtp.gmail.com\",\n    SMTP_PORT: process.env.SMTP_PORT || \"587\",\n    SMTP_SECURE: process.env.SMTP_SECURE || \"false\"\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2Vudi50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsTUFBTUEsYUFBYSxDQUFDQztJQUNsQixNQUFNQyxRQUFRQyxRQUFRQyxHQUFHLENBQUNILElBQUk7SUFDOUIsSUFBSSxDQUFDQyxPQUFPO1FBQ1YsTUFBTSxJQUFJRyxNQUFNLENBQUMsdUNBQXVDLEVBQUVKLElBQUksQ0FBQztJQUNqRTtJQUNBLE9BQU9DO0FBQ1Q7QUFtQkEsTUFBTUksaUJBQWlCO0FBRXZCLE1BQU1DLGVBQWUsQ0FBQ0wsUUFDcEJBLE1BQ0dNLEtBQUssQ0FBQyxLQUNOQyxHQUFHLENBQUMsQ0FBQ0MsU0FBV0EsT0FBT0MsSUFBSSxJQUMzQkMsTUFBTSxDQUFDQztBQUVaLE1BQU1DLGdCQUFnQlAsYUFBYUosUUFBUUMsR0FBRyxDQUFDVyxXQUFXLElBQUlUO0FBRXZELE1BQU1GLE1BQVc7SUFDdEIsV0FBVztJQUNYWSxjQUFjaEIsV0FBVztJQUN6QmlCLFlBQVlqQixXQUFXO0lBRXZCLHlCQUF5QjtJQUN6QmtCLGFBQWFmLFFBQVFDLEdBQUcsQ0FBQ2MsV0FBVyxJQUFJO0lBQ3hDSCxhQUFhWixRQUFRQyxHQUFHLENBQUNXLFdBQVcsSUFBSVQ7SUFDeENhLGdCQUFnQkwsYUFBYSxDQUFDLEVBQUUsSUFBSVI7SUFDcENjLG9CQUFvQmpCLFFBQVFDLEdBQUcsQ0FBQ2dCLGtCQUFrQixJQUFJO0lBQ3REQyxtQkFBbUJsQixRQUFRQyxHQUFHLENBQUNpQixpQkFBaUIsSUFBSTtJQUNwREMsb0JBQW9CbkIsUUFBUUMsR0FBRyxDQUFDa0Isa0JBQWtCLElBQUk7SUFFdEQsc0JBQXNCO0lBQ3RCQyxZQUFZcEIsUUFBUUMsR0FBRyxDQUFDbUIsVUFBVTtJQUNsQ0Msb0JBQW9CckIsUUFBUUMsR0FBRyxDQUFDb0Isa0JBQWtCO0lBQ2xEQyxpQkFBaUJ0QixRQUFRQyxHQUFHLENBQUNxQixlQUFlLElBQUk7SUFDaERDLFdBQVd2QixRQUFRQyxHQUFHLENBQUNzQixTQUFTLElBQUk7SUFDcENDLFdBQVd4QixRQUFRQyxHQUFHLENBQUN1QixTQUFTLElBQUk7SUFDcENDLGFBQWF6QixRQUFRQyxHQUFHLENBQUN3QixXQUFXLElBQUk7QUFDMUMsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3NkYS1iYWNrZW5kLy4vc3JjL2xpYi9lbnYudHM/ODQ4NSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCByZXF1aXJlRW52ID0gKGtleTogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgY29uc3QgdmFsdWUgPSBwcm9jZXNzLmVudltrZXldO1xuICBpZiAoIXZhbHVlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIHJlcXVpcmVkIGVudmlyb25tZW50IHZhcmlhYmxlOiAke2tleX1gKTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59O1xuXG50eXBlIEVudiA9IHtcbiAgREFUQUJBU0VfVVJMOiBzdHJpbmc7XG4gIEpXVF9TRUNSRVQ6IHN0cmluZztcbiAgU01TX0FQSV9LRVk6IHN0cmluZztcbiAgQ09SU19PUklHSU46IHN0cmluZztcbiAgUFJJTUFSWV9PUklHSU46IHN0cmluZztcbiAgVFdJTElPX0FDQ09VTlRfU0lEOiBzdHJpbmc7XG4gIFRXSUxJT19BVVRIX1RPS0VOOiBzdHJpbmc7XG4gIFRXSUxJT19GUk9NX05VTUJFUjogc3RyaW5nO1xuICBHTUFJTF9VU0VSPzogc3RyaW5nO1xuICBHTUFJTF9BUFBfUEFTU1dPUkQ/OiBzdHJpbmc7XG4gIEdNQUlMX0ZST01fTkFNRT86IHN0cmluZztcbiAgU01UUF9IT1NUPzogc3RyaW5nO1xuICBTTVRQX1BPUlQ/OiBzdHJpbmc7XG4gIFNNVFBfU0VDVVJFPzogc3RyaW5nO1xufTtcblxuY29uc3QgREVGQVVMVF9PUklHSU4gPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMFwiO1xuXG5jb25zdCBwYXJzZU9yaWdpbnMgPSAodmFsdWU6IHN0cmluZyk6IHN0cmluZ1tdID0+XG4gIHZhbHVlXG4gICAgLnNwbGl0KFwiLFwiKVxuICAgIC5tYXAoKG9yaWdpbikgPT4gb3JpZ2luLnRyaW0oKSlcbiAgICAuZmlsdGVyKEJvb2xlYW4pO1xuXG5jb25zdCBwYXJzZWRPcmlnaW5zID0gcGFyc2VPcmlnaW5zKHByb2Nlc3MuZW52LkNPUlNfT1JJR0lOID8/IERFRkFVTFRfT1JJR0lOKTtcblxuZXhwb3J0IGNvbnN0IGVudjogRW52ID0ge1xuICAvLyBSZXF1aXJlZFxuICBEQVRBQkFTRV9VUkw6IHJlcXVpcmVFbnYoXCJEQVRBQkFTRV9VUkxcIiksXG4gIEpXVF9TRUNSRVQ6IHJlcXVpcmVFbnYoXCJKV1RfU0VDUkVUXCIpLFxuICBcbiAgLy8gT3B0aW9uYWwgd2l0aCBkZWZhdWx0c1xuICBTTVNfQVBJX0tFWTogcHJvY2Vzcy5lbnYuU01TX0FQSV9LRVkgPz8gXCJcIixcbiAgQ09SU19PUklHSU46IHByb2Nlc3MuZW52LkNPUlNfT1JJR0lOID8/IERFRkFVTFRfT1JJR0lOLFxuICBQUklNQVJZX09SSUdJTjogcGFyc2VkT3JpZ2luc1swXSA/PyBERUZBVUxUX09SSUdJTixcbiAgVFdJTElPX0FDQ09VTlRfU0lEOiBwcm9jZXNzLmVudi5UV0lMSU9fQUNDT1VOVF9TSUQgPz8gXCJcIixcbiAgVFdJTElPX0FVVEhfVE9LRU46IHByb2Nlc3MuZW52LlRXSUxJT19BVVRIX1RPS0VOID8/IFwiXCIsXG4gIFRXSUxJT19GUk9NX05VTUJFUjogcHJvY2Vzcy5lbnYuVFdJTElPX0ZST01fTlVNQkVSID8/IFwiXCIsXG4gIFxuICAvLyBFbWFpbCBjb25maWd1cmF0aW9uXG4gIEdNQUlMX1VTRVI6IHByb2Nlc3MuZW52LkdNQUlMX1VTRVIsXG4gIEdNQUlMX0FQUF9QQVNTV09SRDogcHJvY2Vzcy5lbnYuR01BSUxfQVBQX1BBU1NXT1JELFxuICBHTUFJTF9GUk9NX05BTUU6IHByb2Nlc3MuZW52LkdNQUlMX0ZST01fTkFNRSB8fCAnVW11Z2FuZGEgU0RBJyxcbiAgU01UUF9IT1NUOiBwcm9jZXNzLmVudi5TTVRQX0hPU1QgfHwgJ3NtdHAuZ21haWwuY29tJyxcbiAgU01UUF9QT1JUOiBwcm9jZXNzLmVudi5TTVRQX1BPUlQgfHwgJzU4NycsXG4gIFNNVFBfU0VDVVJFOiBwcm9jZXNzLmVudi5TTVRQX1NFQ1VSRSB8fCAnZmFsc2UnLFxufTtcbiJdLCJuYW1lcyI6WyJyZXF1aXJlRW52Iiwia2V5IiwidmFsdWUiLCJwcm9jZXNzIiwiZW52IiwiRXJyb3IiLCJERUZBVUxUX09SSUdJTiIsInBhcnNlT3JpZ2lucyIsInNwbGl0IiwibWFwIiwib3JpZ2luIiwidHJpbSIsImZpbHRlciIsIkJvb2xlYW4iLCJwYXJzZWRPcmlnaW5zIiwiQ09SU19PUklHSU4iLCJEQVRBQkFTRV9VUkwiLCJKV1RfU0VDUkVUIiwiU01TX0FQSV9LRVkiLCJQUklNQVJZX09SSUdJTiIsIlRXSUxJT19BQ0NPVU5UX1NJRCIsIlRXSUxJT19BVVRIX1RPS0VOIiwiVFdJTElPX0ZST01fTlVNQkVSIiwiR01BSUxfVVNFUiIsIkdNQUlMX0FQUF9QQVNTV09SRCIsIkdNQUlMX0ZST01fTkFNRSIsIlNNVFBfSE9TVCIsIlNNVFBfUE9SVCIsIlNNVFBfU0VDVVJFIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/env.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/errors.ts":
/*!***************************!*\
  !*** ./src/lib/errors.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AppError: () => (/* binding */ AppError),\n/* harmony export */   ConflictError: () => (/* binding */ ConflictError),\n/* harmony export */   ForbiddenError: () => (/* binding */ ForbiddenError),\n/* harmony export */   NotFoundError: () => (/* binding */ NotFoundError),\n/* harmony export */   UnauthorizedError: () => (/* binding */ UnauthorizedError),\n/* harmony export */   ValidationError: () => (/* binding */ ValidationError),\n/* harmony export */   isAppError: () => (/* binding */ isAppError)\n/* harmony export */ });\nclass AppError extends Error {\n    constructor(message, status = 400, details){\n        super(message);\n        this.name = \"AppError\";\n        this.status = status;\n        this.details = details;\n    }\n}\nclass UnauthorizedError extends AppError {\n    constructor(message = \"Unauthorized\"){\n        super(message, 401);\n        this.name = \"UnauthorizedError\";\n    }\n}\nclass ForbiddenError extends AppError {\n    constructor(message = \"Forbidden\"){\n        super(message, 403);\n        this.name = \"ForbiddenError\";\n    }\n}\nclass NotFoundError extends AppError {\n    constructor(message = \"Resource not found\"){\n        super(message, 404);\n        this.name = \"NotFoundError\";\n    }\n}\nclass ConflictError extends AppError {\n    constructor(message = \"Conflict\"){\n        super(message, 409);\n        this.name = \"ConflictError\";\n    }\n}\nclass ValidationError extends AppError {\n    constructor(message = \"Validation failed\", details){\n        super(message, 422, details);\n        this.name = \"ValidationError\";\n    }\n}\nconst isAppError = (error)=>{\n    return error instanceof AppError;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2Vycm9ycy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQU8sTUFBTUEsaUJBQWlCQztJQUk1QkMsWUFBWUMsT0FBZSxFQUFFQyxTQUFTLEdBQUcsRUFBRUMsT0FBaUIsQ0FBRTtRQUM1RCxLQUFLLENBQUNGO1FBQ04sSUFBSSxDQUFDRyxJQUFJLEdBQUc7UUFDWixJQUFJLENBQUNGLE1BQU0sR0FBR0E7UUFDZCxJQUFJLENBQUNDLE9BQU8sR0FBR0E7SUFDakI7QUFDRjtBQUVPLE1BQU1FLDBCQUEwQlA7SUFDckNFLFlBQVlDLFVBQVUsY0FBYyxDQUFFO1FBQ3BDLEtBQUssQ0FBQ0EsU0FBUztRQUNmLElBQUksQ0FBQ0csSUFBSSxHQUFHO0lBQ2Q7QUFDRjtBQUVPLE1BQU1FLHVCQUF1QlI7SUFDbENFLFlBQVlDLFVBQVUsV0FBVyxDQUFFO1FBQ2pDLEtBQUssQ0FBQ0EsU0FBUztRQUNmLElBQUksQ0FBQ0csSUFBSSxHQUFHO0lBQ2Q7QUFDRjtBQUVPLE1BQU1HLHNCQUFzQlQ7SUFDakNFLFlBQVlDLFVBQVUsb0JBQW9CLENBQUU7UUFDMUMsS0FBSyxDQUFDQSxTQUFTO1FBQ2YsSUFBSSxDQUFDRyxJQUFJLEdBQUc7SUFDZDtBQUNGO0FBRU8sTUFBTUksc0JBQXNCVjtJQUNqQ0UsWUFBWUMsVUFBVSxVQUFVLENBQUU7UUFDaEMsS0FBSyxDQUFDQSxTQUFTO1FBQ2YsSUFBSSxDQUFDRyxJQUFJLEdBQUc7SUFDZDtBQUNGO0FBRU8sTUFBTUssd0JBQXdCWDtJQUNuQ0UsWUFBWUMsVUFBVSxtQkFBbUIsRUFBRUUsT0FBaUIsQ0FBRTtRQUM1RCxLQUFLLENBQUNGLFNBQVMsS0FBS0U7UUFDcEIsSUFBSSxDQUFDQyxJQUFJLEdBQUc7SUFDZDtBQUNGO0FBRU8sTUFBTU0sYUFBYSxDQUFDQztJQUN6QixPQUFPQSxpQkFBaUJiO0FBQzFCLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZGEtYmFja2VuZC8uL3NyYy9saWIvZXJyb3JzLnRzPzQ1MWEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIEFwcEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBzdGF0dXM6IG51bWJlcjtcbiAgZGV0YWlscz86IHVua25vd247XG5cbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBzdGF0dXMgPSA0MDAsIGRldGFpbHM/OiB1bmtub3duKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5uYW1lID0gXCJBcHBFcnJvclwiO1xuICAgIHRoaXMuc3RhdHVzID0gc3RhdHVzO1xuICAgIHRoaXMuZGV0YWlscyA9IGRldGFpbHM7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFVuYXV0aG9yaXplZEVycm9yIGV4dGVuZHMgQXBwRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlID0gXCJVbmF1dGhvcml6ZWRcIikge1xuICAgIHN1cGVyKG1lc3NhZ2UsIDQwMSk7XG4gICAgdGhpcy5uYW1lID0gXCJVbmF1dGhvcml6ZWRFcnJvclwiO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBGb3JiaWRkZW5FcnJvciBleHRlbmRzIEFwcEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZSA9IFwiRm9yYmlkZGVuXCIpIHtcbiAgICBzdXBlcihtZXNzYWdlLCA0MDMpO1xuICAgIHRoaXMubmFtZSA9IFwiRm9yYmlkZGVuRXJyb3JcIjtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgTm90Rm91bmRFcnJvciBleHRlbmRzIEFwcEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZSA9IFwiUmVzb3VyY2Ugbm90IGZvdW5kXCIpIHtcbiAgICBzdXBlcihtZXNzYWdlLCA0MDQpO1xuICAgIHRoaXMubmFtZSA9IFwiTm90Rm91bmRFcnJvclwiO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb25mbGljdEVycm9yIGV4dGVuZHMgQXBwRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlID0gXCJDb25mbGljdFwiKSB7XG4gICAgc3VwZXIobWVzc2FnZSwgNDA5KTtcbiAgICB0aGlzLm5hbWUgPSBcIkNvbmZsaWN0RXJyb3JcIjtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgVmFsaWRhdGlvbkVycm9yIGV4dGVuZHMgQXBwRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlID0gXCJWYWxpZGF0aW9uIGZhaWxlZFwiLCBkZXRhaWxzPzogdW5rbm93bikge1xuICAgIHN1cGVyKG1lc3NhZ2UsIDQyMiwgZGV0YWlscyk7XG4gICAgdGhpcy5uYW1lID0gXCJWYWxpZGF0aW9uRXJyb3JcIjtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgaXNBcHBFcnJvciA9IChlcnJvcjogdW5rbm93bik6IGVycm9yIGlzIEFwcEVycm9yID0+IHtcbiAgcmV0dXJuIGVycm9yIGluc3RhbmNlb2YgQXBwRXJyb3I7XG59O1xuIl0sIm5hbWVzIjpbIkFwcEVycm9yIiwiRXJyb3IiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJkZXRhaWxzIiwibmFtZSIsIlVuYXV0aG9yaXplZEVycm9yIiwiRm9yYmlkZGVuRXJyb3IiLCJOb3RGb3VuZEVycm9yIiwiQ29uZmxpY3RFcnJvciIsIlZhbGlkYXRpb25FcnJvciIsImlzQXBwRXJyb3IiLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/errors.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/http.ts":
/*!*************************!*\
  !*** ./src/lib/http.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handleRequest: () => (/* binding */ handleRequest),\n/* harmony export */   jsonResponse: () => (/* binding */ jsonResponse)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/ZodError.js\");\n/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/errors */ \"(rsc)/./src/lib/errors.ts\");\n/* harmony import */ var _lib_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/env */ \"(rsc)/./src/lib/env.ts\");\n\n\n\n\nconst jsonResponse = (data, init)=>{\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(data, init);\n};\nconst handleRequest = async (req, handler)=>{\n    // Handle preflight requests\n    if (req.method === \"OPTIONS\") {\n        const response = new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(null, {\n            status: 204\n        });\n        return applyCors(response, req);\n    }\n    try {\n        const data = await handler();\n        let response;\n        if (data instanceof next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse) {\n            response = data;\n        } else {\n            response = jsonResponse({\n                data\n            });\n        }\n        // Ensure CORS is applied to successful responses\n        return applyCors(response, req);\n    } catch (err) {\n        const error = err;\n        let response;\n        if (error instanceof zod__WEBPACK_IMPORTED_MODULE_3__.ZodError) {\n            const validationError = new _lib_errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError(\"Validation failed\", error.flatten());\n            response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: validationError.message,\n                details: validationError.details\n            }, {\n                status: validationError.status\n            });\n        } else if ((0,_lib_errors__WEBPACK_IMPORTED_MODULE_1__.isAppError)(error)) {\n            response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: error.message,\n                details: error.details\n            }, {\n                status: error.status\n            });\n        } else if (error instanceof Error) {\n            console.error(error);\n            response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Internal Server Error\"\n            }, {\n                status: 500\n            });\n        } else {\n            console.error(\"Unknown error\", error);\n            response = next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Internal Server Error\"\n            }, {\n                status: 500\n            });\n        }\n        // Ensure CORS is applied to error responses\n        return applyCors(response, req);\n    }\n};\nconst stripQuotes = (origin)=>origin.replace(/^\"|\"$/g, \"\").replace(/^'|'$/g, \"\");\nconst normalizeOrigin = (origin)=>stripQuotes(origin).replace(/\\/$/, \"\");\nconst parseAllowedOrigins = ()=>{\n    if (!_lib_env__WEBPACK_IMPORTED_MODULE_2__.env.CORS_ORIGIN) {\n        return [];\n    }\n    return _lib_env__WEBPACK_IMPORTED_MODULE_2__.env.CORS_ORIGIN.split(\",\").map((value)=>value.trim()).filter(Boolean).map((value)=>normalizeOrigin(value));\n};\nconst applyCors = (response, request)=>{\n    const allowedOrigins = parseAllowedOrigins();\n    if (!allowedOrigins.length) {\n        return response;\n    }\n    const requestOriginHeader = request?.headers.get(\"origin\") ?? null;\n    const requestOrigin = requestOriginHeader ? normalizeOrigin(requestOriginHeader) : null;\n    if (true) {\n        console.log(\"[cors] request origin:\", requestOrigin, \"allowed origins:\", allowedOrigins);\n    }\n    let allowOrigin = null;\n    if (requestOrigin && allowedOrigins.includes(requestOrigin)) {\n        allowOrigin = requestOrigin;\n    } else if (requestOrigin && allowedOrigins.includes(\"*\")) {\n        allowOrigin = requestOrigin;\n    } else if (allowedOrigins.length === 1) {\n        allowOrigin = allowedOrigins[0];\n    }\n    if (!allowOrigin && allowedOrigins.length) {\n        allowOrigin = allowedOrigins[0];\n    }\n    if (true) {\n        console.log(\"[cors] resolved allowOrigin:\", allowOrigin);\n    }\n    if (!allowOrigin) {\n        return response;\n    }\n    response.headers.set(\"Access-Control-Allow-Origin\", allowOrigin);\n    if (true) {\n        console.log(\"[cors] setting Access-Control-Allow-Origin=\", allowOrigin);\n    }\n    const requestedHeaders = request?.headers.get(\"access-control-request-headers\");\n    response.headers.set(\"Access-Control-Allow-Methods\", \"GET,POST,PUT,PATCH,DELETE,OPTIONS\");\n    response.headers.set(\"Access-Control-Allow-Headers\", requestedHeaders && requestedHeaders.length ? requestedHeaders : \"Content-Type,Authorization,Accept\");\n    response.headers.set(\"Access-Control-Allow-Credentials\", \"true\");\n    response.headers.set(\"Access-Control-Max-Age\", \"600\");\n    response.headers.set(\"Vary\", \"Origin\");\n    return response;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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MDgzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xuaW1wb3J0IHsgWm9kRXJyb3IgfSBmcm9tIFwiem9kXCI7XG5cbmltcG9ydCB7IEFwcEVycm9yLCBpc0FwcEVycm9yLCBWYWxpZGF0aW9uRXJyb3IgfSBmcm9tIFwiQC9saWIvZXJyb3JzXCI7XG5pbXBvcnQgeyBlbnYgfSBmcm9tIFwiQC9saWIvZW52XCI7XG5cbmludGVyZmFjZSBIYW5kbGVyRm48UmV0dXJuVHlwZT4ge1xuICAoKTogUHJvbWlzZTxSZXR1cm5UeXBlPjtcbn1cblxuZXhwb3J0IGNvbnN0IGpzb25SZXNwb25zZSA9IDxUPihkYXRhOiBULCBpbml0PzogUmVzcG9uc2VJbml0KSA9PiB7XG4gIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihkYXRhLCBpbml0KTtcbn07XG5cbmV4cG9ydCBjb25zdCBoYW5kbGVSZXF1ZXN0ID0gYXN5bmMgPFQ+KHJlcTogUmVxdWVzdCwgaGFuZGxlcjogSGFuZGxlckZuPFQ+KSA9PiB7XG4gIC8vIEhhbmRsZSBwcmVmbGlnaHQgcmVxdWVzdHNcbiAgaWYgKHJlcS5tZXRob2QgPT09IFwiT1BUSU9OU1wiKSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBuZXcgTmV4dFJlc3BvbnNlKG51bGwsIHsgc3RhdHVzOiAyMDQgfSk7XG4gICAgcmV0dXJuIGFwcGx5Q29ycyhyZXNwb25zZSwgcmVxKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGhhbmRsZXIoKTtcbiAgICBsZXQgcmVzcG9uc2U6IE5leHRSZXNwb25zZTtcbiAgICBcbiAgICBpZiAoZGF0YSBpbnN0YW5jZW9mIE5leHRSZXNwb25zZSkge1xuICAgICAgcmVzcG9uc2UgPSBkYXRhO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNwb25zZSA9IGpzb25SZXNwb25zZSh7IGRhdGEgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIEVuc3VyZSBDT1JTIGlzIGFwcGxpZWQgdG8gc3VjY2Vzc2Z1bCByZXNwb25zZXNcbiAgICByZXR1cm4gYXBwbHlDb3JzKHJlc3BvbnNlLCByZXEpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zdCBlcnJvciA9IGVyciBhcyB1bmtub3duO1xuICAgIGxldCByZXNwb25zZTogTmV4dFJlc3BvbnNlO1xuXG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgWm9kRXJyb3IpIHtcbiAgICAgIGNvbnN0IHZhbGlkYXRpb25FcnJvciA9IG5ldyBWYWxpZGF0aW9uRXJyb3IoXCJWYWxpZGF0aW9uIGZhaWxlZFwiLCBlcnJvci5mbGF0dGVuKCkpO1xuICAgICAgcmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAge1xuICAgICAgICAgIGVycm9yOiB2YWxpZGF0aW9uRXJyb3IubWVzc2FnZSxcbiAgICAgICAgICBkZXRhaWxzOiB2YWxpZGF0aW9uRXJyb3IuZGV0YWlscyxcbiAgICAgICAgfSxcbiAgICAgICAgeyBzdGF0dXM6IHZhbGlkYXRpb25FcnJvci5zdGF0dXMgfSxcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmIChpc0FwcEVycm9yKGVycm9yKSkge1xuICAgICAgcmVzcG9uc2UgPSBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAge1xuICAgICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICAgIGRldGFpbHM6IGVycm9yLmRldGFpbHMsXG4gICAgICAgIH0sXG4gICAgICAgIHsgc3RhdHVzOiBlcnJvci5zdGF0dXMgfSxcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIHJlc3BvbnNlID0gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3InIH0sXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfSxcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJVbmtub3duIGVycm9yXCIsIGVycm9yKTtcbiAgICAgIHJlc3BvbnNlID0gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3InIH0sXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfSxcbiAgICAgICk7XG4gICAgfVxuICAgIFxuICAgIC8vIEVuc3VyZSBDT1JTIGlzIGFwcGxpZWQgdG8gZXJyb3IgcmVzcG9uc2VzXG4gICAgcmV0dXJuIGFwcGx5Q29ycyhyZXNwb25zZSwgcmVxKTtcbiAgfVxufTtcblxuY29uc3Qgc3RyaXBRdW90ZXMgPSAob3JpZ2luOiBzdHJpbmcpID0+IG9yaWdpbi5yZXBsYWNlKC9eXCJ8XCIkL2csIFwiXCIpLnJlcGxhY2UoL14nfCckL2csIFwiXCIpO1xuXG5jb25zdCBub3JtYWxpemVPcmlnaW4gPSAob3JpZ2luOiBzdHJpbmcpID0+IHN0cmlwUXVvdGVzKG9yaWdpbikucmVwbGFjZSgvXFwvJC8sIFwiXCIpO1xuXG5jb25zdCBwYXJzZUFsbG93ZWRPcmlnaW5zID0gKCkgPT4ge1xuICBpZiAoIWVudi5DT1JTX09SSUdJTikge1xuICAgIHJldHVybiBbXSBhcyBzdHJpbmdbXTtcbiAgfVxuXG4gIHJldHVybiBlbnYuQ09SU19PUklHSU4uc3BsaXQoXCIsXCIpXG4gICAgLm1hcCgodmFsdWUpID0+IHZhbHVlLnRyaW0oKSlcbiAgICAuZmlsdGVyKEJvb2xlYW4pXG4gICAgLm1hcCgodmFsdWUpID0+IG5vcm1hbGl6ZU9yaWdpbih2YWx1ZSkpO1xufTtcblxuY29uc3QgYXBwbHlDb3JzID0gKHJlc3BvbnNlOiBOZXh0UmVzcG9uc2UsIHJlcXVlc3Q/OiBSZXF1ZXN0KSA9PiB7XG4gIGNvbnN0IGFsbG93ZWRPcmlnaW5zID0gcGFyc2VBbGxvd2VkT3JpZ2lucygpO1xuXG4gIGlmICghYWxsb3dlZE9yaWdpbnMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9XG5cbiAgY29uc3QgcmVxdWVzdE9yaWdpbkhlYWRlciA9IHJlcXVlc3Q/LmhlYWRlcnMuZ2V0KFwib3JpZ2luXCIpID8/IG51bGw7XG4gIGNvbnN0IHJlcXVlc3RPcmlnaW4gPSByZXF1ZXN0T3JpZ2luSGVhZGVyID8gbm9ybWFsaXplT3JpZ2luKHJlcXVlc3RPcmlnaW5IZWFkZXIpIDogbnVsbDtcblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgY29uc29sZS5sb2coXCJbY29yc10gcmVxdWVzdCBvcmlnaW46XCIsIHJlcXVlc3RPcmlnaW4sIFwiYWxsb3dlZCBvcmlnaW5zOlwiLCBhbGxvd2VkT3JpZ2lucyk7XG4gIH1cblxuICBsZXQgYWxsb3dPcmlnaW46IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXG4gIGlmIChyZXF1ZXN0T3JpZ2luICYmIGFsbG93ZWRPcmlnaW5zLmluY2x1ZGVzKHJlcXVlc3RPcmlnaW4pKSB7XG4gICAgYWxsb3dPcmlnaW4gPSByZXF1ZXN0T3JpZ2luO1xuICB9IGVsc2UgaWYgKHJlcXVlc3RPcmlnaW4gJiYgYWxsb3dlZE9yaWdpbnMuaW5jbHVkZXMoXCIqXCIpKSB7XG4gICAgYWxsb3dPcmlnaW4gPSByZXF1ZXN0T3JpZ2luO1xuICB9IGVsc2UgaWYgKGFsbG93ZWRPcmlnaW5zLmxlbmd0aCA9PT0gMSkge1xuICAgIGFsbG93T3JpZ2luID0gYWxsb3dlZE9yaWdpbnNbMF07XG4gIH1cblxuICBpZiAoIWFsbG93T3JpZ2luICYmIGFsbG93ZWRPcmlnaW5zLmxlbmd0aCkge1xuICAgIGFsbG93T3JpZ2luID0gYWxsb3dlZE9yaWdpbnNbMF07XG4gIH1cblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKSB7XG4gICAgY29uc29sZS5sb2coXCJbY29yc10gcmVzb2x2ZWQgYWxsb3dPcmlnaW46XCIsIGFsbG93T3JpZ2luKTtcbiAgfVxuXG4gIGlmICghYWxsb3dPcmlnaW4pIHtcbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH1cblxuICByZXNwb25zZS5oZWFkZXJzLnNldChcIkFjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpblwiLCBhbGxvd09yaWdpbik7XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgIGNvbnNvbGUubG9nKFwiW2NvcnNdIHNldHRpbmcgQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luPVwiLCBhbGxvd09yaWdpbik7XG4gIH1cbiAgY29uc3QgcmVxdWVzdGVkSGVhZGVycyA9IHJlcXVlc3Q/LmhlYWRlcnMuZ2V0KFwiYWNjZXNzLWNvbnRyb2wtcmVxdWVzdC1oZWFkZXJzXCIpO1xuXG4gIHJlc3BvbnNlLmhlYWRlcnMuc2V0KFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kc1wiLCBcIkdFVCxQT1NULFBVVCxQQVRDSCxERUxFVEUsT1BUSU9OU1wiKTtcbiAgcmVzcG9uc2UuaGVhZGVycy5zZXQoXG4gICAgXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzXCIsXG4gICAgcmVxdWVzdGVkSGVhZGVycyAmJiByZXF1ZXN0ZWRIZWFkZXJzLmxlbmd0aFxuICAgICAgPyByZXF1ZXN0ZWRIZWFkZXJzXG4gICAgICA6IFwiQ29udGVudC1UeXBlLEF1dGhvcml6YXRpb24sQWNjZXB0XCIsXG4gICk7XG4gIHJlc3BvbnNlLmhlYWRlcnMuc2V0KFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctQ3JlZGVudGlhbHNcIiwgXCJ0cnVlXCIpO1xuICByZXNwb25zZS5oZWFkZXJzLnNldChcIkFjY2Vzcy1Db250cm9sLU1heC1BZ2VcIiwgXCI2MDBcIik7XG4gIHJlc3BvbnNlLmhlYWRlcnMuc2V0KFwiVmFyeVwiLCBcIk9yaWdpblwiKTtcblxuICByZXR1cm4gcmVzcG9uc2U7XG59O1xuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIlpvZEVycm9yIiwiaXNBcHBFcnJvciIsIlZhbGlkYXRpb25FcnJvciIsImVudiIsImpzb25SZXNwb25zZSIsImRhdGEiLCJpbml0IiwianNvbiIsImhhbmRsZVJlcXVlc3QiLCJyZXEiLCJoYW5kbGVyIiwibWV0aG9kIiwicmVzcG9uc2UiLCJzdGF0dXMiLCJhcHBseUNvcnMiLCJlcnIiLCJlcnJvciIsInZhbGlkYXRpb25FcnJvciIsImZsYXR0ZW4iLCJtZXNzYWdlIiwiZGV0YWlscyIsIkVycm9yIiwiY29uc29sZSIsInN0cmlwUXVvdGVzIiwib3JpZ2luIiwicmVwbGFjZSIsIm5vcm1hbGl6ZU9yaWdpbiIsInBhcnNlQWxsb3dlZE9yaWdpbnMiLCJDT1JTX09SSUdJTiIsInNwbGl0IiwibWFwIiwidmFsdWUiLCJ0cmltIiwiZmlsdGVyIiwiQm9vbGVhbiIsInJlcXVlc3QiLCJhbGxvd2VkT3JpZ2lucyIsImxlbmd0aCIsInJlcXVlc3RPcmlnaW5IZWFkZXIiLCJoZWFkZXJzIiwiZ2V0IiwicmVxdWVzdE9yaWdpbiIsInByb2Nlc3MiLCJsb2ciLCJhbGxvd09yaWdpbiIsImluY2x1ZGVzIiwic2V0IiwicmVxdWVzdGVkSGVhZGVycyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/http.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log:  true ? [\n        \"query\",\n        \"error\",\n        \"warn\"\n    ] : 0\n});\nif (true) {\n    globalForPrisma.prisma = prisma;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBOEM7QUFFOUMsTUFBTUMsa0JBQWtCQztBQUlqQixNQUFNQyxTQUNYRixnQkFBZ0JFLE1BQU0sSUFDdEIsSUFBSUgsd0RBQVlBLENBQUM7SUFDZkksS0FBS0MsS0FBc0MsR0FBRztRQUFDO1FBQVM7UUFBUztLQUFPLEdBQUcsQ0FBUztBQUN0RixHQUFHO0FBRUwsSUFBSUEsSUFBcUMsRUFBRTtJQUN6Q0osZ0JBQWdCRSxNQUFNLEdBQUdBO0FBQzNCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2RhLWJhY2tlbmQvLi9zcmMvbGliL3ByaXNtYS50cz8wMWQ3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gXCJAcHJpc21hL2NsaWVudFwiO1xuXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWxUaGlzIGFzIHVua25vd24gYXMge1xuICBwcmlzbWE/OiBQcmlzbWFDbGllbnQ7XG59O1xuXG5leHBvcnQgY29uc3QgcHJpc21hID1cbiAgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA/P1xuICBuZXcgUHJpc21hQ2xpZW50KHtcbiAgICBsb2c6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcImRldmVsb3BtZW50XCIgPyBbXCJxdWVyeVwiLCBcImVycm9yXCIsIFwid2FyblwiXSA6IFtcImVycm9yXCJdLFxuICB9KTtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xuICBnbG9iYWxGb3JQcmlzbWEucHJpc21hID0gcHJpc21hO1xufVxuIl0sIm5hbWVzIjpbIlByaXNtYUNsaWVudCIsImdsb2JhbEZvclByaXNtYSIsImdsb2JhbFRoaXMiLCJwcmlzbWEiLCJsb2ciLCJwcm9jZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/route.ts":
/*!**************************!*\
  !*** ./src/lib/route.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createHandler: () => (/* binding */ createHandler)\n/* harmony export */ });\n/* harmony import */ var _lib_http__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/http */ \"(rsc)/./src/lib/http.ts\");\n\nconst createHandler = ({ middlewares = [], controller })=>{\n    return async (req, ctx)=>{\n        return (0,_lib_http__WEBPACK_IMPORTED_MODULE_0__.handleRequest)(req, async ()=>{\n            const url = new URL(req.url);\n            let context = {\n                req,\n                params: ctx?.params ?? {},\n                query: url.searchParams\n            };\n            for (const middleware of middlewares){\n                context = await middleware(context);\n            }\n            return controller({\n                ...context,\n                params: context.params\n            });\n        });\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTJDO0FBZ0JwQyxNQUFNQyxnQkFBZ0IsQ0FHM0IsRUFBRUMsY0FBYyxFQUFFLEVBQUVDLFVBQVUsRUFBMkM7SUFDekUsT0FBTyxPQUFPQyxLQUFjQztRQUMxQixPQUFPTCx3REFBYUEsQ0FBQ0ksS0FBSztZQUN4QixNQUFNRSxNQUFNLElBQUlDLElBQUlILElBQUlFLEdBQUc7WUFDM0IsSUFBSUUsVUFBNkI7Z0JBQy9CSjtnQkFDQUssUUFBUUosS0FBS0ksVUFBVSxDQUFDO2dCQUN4QkMsT0FBT0osSUFBSUssWUFBWTtZQUN6QjtZQUVBLEtBQUssTUFBTUMsY0FBY1YsWUFBYTtnQkFDcENNLFVBQVUsTUFBTUksV0FBV0o7WUFDN0I7WUFFQSxPQUFPTCxXQUFXO2dCQUFFLEdBQUdLLE9BQU87Z0JBQUVDLFFBQVFELFFBQVFDLE1BQU07WUFBQztRQUN6RDtJQUNGO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3NkYS1iYWNrZW5kLy4vc3JjL2xpYi9yb3V0ZS50cz85ZTgzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGhhbmRsZVJlcXVlc3QgfSBmcm9tIFwiQC9saWIvaHR0cFwiO1xuaW1wb3J0IHR5cGUge1xuICBDb250cm9sbGVyQWN0aW9uLFxuICBNaWRkbGV3YXJlLFxuICBNaWRkbGV3YXJlQ29udGV4dCxcbiAgUm91dGVQYXJhbXMsXG59IGZyb20gXCJAL21pZGRsZXdhcmVzL3R5cGVzXCI7XG5cbmludGVyZmFjZSBDcmVhdGVIYW5kbGVyT3B0aW9uczxcbiAgVFJlc3VsdCxcbiAgVENvbnRleHQgZXh0ZW5kcyBNaWRkbGV3YXJlQ29udGV4dCA9IE1pZGRsZXdhcmVDb250ZXh0LFxuPiB7XG4gIG1pZGRsZXdhcmVzPzogTWlkZGxld2FyZVtdO1xuICBjb250cm9sbGVyOiBDb250cm9sbGVyQWN0aW9uPFRSZXN1bHQsIFRDb250ZXh0Pjtcbn1cblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUhhbmRsZXIgPSA8XG4gIFRSZXN1bHQsXG4gIFRDb250ZXh0IGV4dGVuZHMgTWlkZGxld2FyZUNvbnRleHQgPSBNaWRkbGV3YXJlQ29udGV4dCxcbj4oeyBtaWRkbGV3YXJlcyA9IFtdLCBjb250cm9sbGVyIH06IENyZWF0ZUhhbmRsZXJPcHRpb25zPFRSZXN1bHQsIFRDb250ZXh0PikgPT4ge1xuICByZXR1cm4gYXN5bmMgKHJlcTogUmVxdWVzdCwgY3R4PzogeyBwYXJhbXM/OiBSb3V0ZVBhcmFtcyB9KSA9PiB7XG4gICAgcmV0dXJuIGhhbmRsZVJlcXVlc3QocmVxLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHJlcS51cmwpO1xuICAgICAgbGV0IGNvbnRleHQ6IE1pZGRsZXdhcmVDb250ZXh0ID0ge1xuICAgICAgICByZXEsXG4gICAgICAgIHBhcmFtczogY3R4Py5wYXJhbXMgPz8ge30sXG4gICAgICAgIHF1ZXJ5OiB1cmwuc2VhcmNoUGFyYW1zLFxuICAgICAgfTtcblxuICAgICAgZm9yIChjb25zdCBtaWRkbGV3YXJlIG9mIG1pZGRsZXdhcmVzKSB7XG4gICAgICAgIGNvbnRleHQgPSBhd2FpdCBtaWRkbGV3YXJlKGNvbnRleHQpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY29udHJvbGxlcih7IC4uLmNvbnRleHQsIHBhcmFtczogY29udGV4dC5wYXJhbXMgfSBhcyBUQ29udGV4dCk7XG4gICAgfSk7XG4gIH07XG59O1xuIl0sIm5hbWVzIjpbImhhbmRsZVJlcXVlc3QiLCJjcmVhdGVIYW5kbGVyIiwibWlkZGxld2FyZXMiLCJjb250cm9sbGVyIiwicmVxIiwiY3R4IiwidXJsIiwiVVJMIiwiY29udGV4dCIsInBhcmFtcyIsInF1ZXJ5Iiwic2VhcmNoUGFyYW1zIiwibWlkZGxld2FyZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/sms.ts":
/*!************************!*\
  !*** ./src/lib/sms.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sendSms: () => (/* binding */ sendSms)\n/* harmony export */ });\n/* harmony import */ var twilio__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! twilio */ \"(rsc)/./node_modules/twilio/lib/index.js\");\n/* harmony import */ var twilio__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(twilio__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/env */ \"(rsc)/./src/lib/env.ts\");\n\n\nlet twilioClient = null;\nconst getTwilioClient = ()=>{\n    if (!twilioClient) {\n        if (!_lib_env__WEBPACK_IMPORTED_MODULE_1__.env.TWILIO_ACCOUNT_SID || !_lib_env__WEBPACK_IMPORTED_MODULE_1__.env.TWILIO_AUTH_TOKEN) {\n            throw new Error(\"Twilio credentials are not configured\");\n        }\n        twilioClient = twilio__WEBPACK_IMPORTED_MODULE_0___default()(_lib_env__WEBPACK_IMPORTED_MODULE_1__.env.TWILIO_ACCOUNT_SID, _lib_env__WEBPACK_IMPORTED_MODULE_1__.env.TWILIO_AUTH_TOKEN);\n    }\n    return twilioClient;\n};\nconst sendSms = async ({ to, message })=>{\n    if (!to) {\n        throw new Error(\"Missing receiver phone number\");\n    }\n    const fromNumber = _lib_env__WEBPACK_IMPORTED_MODULE_1__.env.TWILIO_FROM_NUMBER;\n    if (!_lib_env__WEBPACK_IMPORTED_MODULE_1__.env.TWILIO_ACCOUNT_SID || !_lib_env__WEBPACK_IMPORTED_MODULE_1__.env.TWILIO_AUTH_TOKEN || !fromNumber) {\n        if (true) {\n            console.warn(\"Twilio configuration missing; SMS not sent. Message preview:\", {\n                to,\n                from: fromNumber || \"(unset)\",\n                message\n            });\n            return;\n        }\n        throw new Error(\"Twilio configuration missing\");\n    }\n    if (true) {\n        console.info(`SMS preview  ${to}: ${message}`);\n    }\n    const client = getTwilioClient();\n    const twilioMessage = await client.messages.create({\n        to,\n        from: fromNumber,\n        body: message\n    });\n    if (true) {\n        console.info(`[Twilio] SMS dispatched to ${to} (sid: ${twilioMessage.sid})`);\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3Ntcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTZDO0FBRWI7QUFPaEMsSUFBSUUsZUFBOEI7QUFFbEMsTUFBTUMsa0JBQWtCO0lBQ3RCLElBQUksQ0FBQ0QsY0FBYztRQUNqQixJQUFJLENBQUNELHlDQUFHQSxDQUFDRyxrQkFBa0IsSUFBSSxDQUFDSCx5Q0FBR0EsQ0FBQ0ksaUJBQWlCLEVBQUU7WUFDckQsTUFBTSxJQUFJQyxNQUFNO1FBQ2xCO1FBQ0FKLGVBQWVGLDZDQUFNQSxDQUFDQyx5Q0FBR0EsQ0FBQ0csa0JBQWtCLEVBQUVILHlDQUFHQSxDQUFDSSxpQkFBaUI7SUFDckU7SUFDQSxPQUFPSDtBQUNUO0FBRU8sTUFBTUssVUFBVSxPQUFPLEVBQUVDLEVBQUUsRUFBRUMsT0FBTyxFQUFjO0lBQ3ZELElBQUksQ0FBQ0QsSUFBSTtRQUNQLE1BQU0sSUFBSUYsTUFBTTtJQUNsQjtJQUVBLE1BQU1JLGFBQWFULHlDQUFHQSxDQUFDVSxrQkFBa0I7SUFFekMsSUFBSSxDQUFDVix5Q0FBR0EsQ0FBQ0csa0JBQWtCLElBQUksQ0FBQ0gseUNBQUdBLENBQUNJLGlCQUFpQixJQUFJLENBQUNLLFlBQVk7UUFDcEUsSUFBSUUsSUFBcUMsRUFBRTtZQUN6Q0MsUUFBUUMsSUFBSSxDQUFDLGdFQUFnRTtnQkFDM0VOO2dCQUNBTyxNQUFNTCxjQUFjO2dCQUNwQkQ7WUFDRjtZQUNBO1FBQ0Y7UUFDQSxNQUFNLElBQUlILE1BQU07SUFDbEI7SUFFQSxJQUFJTSxJQUFxQyxFQUFFO1FBQ3pDQyxRQUFRRyxJQUFJLENBQUMsQ0FBQyxjQUFjLEVBQUVSLEdBQUcsRUFBRSxFQUFFQyxRQUFRLENBQUM7SUFDaEQ7SUFFQSxNQUFNUSxTQUFTZDtJQUNmLE1BQU1lLGdCQUFnQixNQUFNRCxPQUFPRSxRQUFRLENBQUNDLE1BQU0sQ0FBQztRQUFFWjtRQUFJTyxNQUFNTDtRQUFZVyxNQUFNWjtJQUFRO0lBRXpGLElBQUlHLElBQXFDLEVBQUU7UUFDekNDLFFBQVFHLElBQUksQ0FBQyxDQUFDLDJCQUEyQixFQUFFUixHQUFHLE9BQU8sRUFBRVUsY0FBY0ksR0FBRyxDQUFDLENBQUMsQ0FBQztJQUM3RTtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZGEtYmFja2VuZC8uL3NyYy9saWIvc21zLnRzPzQ4NTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR3aWxpbywgeyB0eXBlIFR3aWxpbyB9IGZyb20gXCJ0d2lsaW9cIjtcblxuaW1wb3J0IHsgZW52IH0gZnJvbSBcIkAvbGliL2VudlwiO1xuXG5leHBvcnQgdHlwZSBTbXNQYXlsb2FkID0ge1xuICB0bzogc3RyaW5nO1xuICBtZXNzYWdlOiBzdHJpbmc7XG59O1xuXG5sZXQgdHdpbGlvQ2xpZW50OiBUd2lsaW8gfCBudWxsID0gbnVsbDtcblxuY29uc3QgZ2V0VHdpbGlvQ2xpZW50ID0gKCkgPT4ge1xuICBpZiAoIXR3aWxpb0NsaWVudCkge1xuICAgIGlmICghZW52LlRXSUxJT19BQ0NPVU5UX1NJRCB8fCAhZW52LlRXSUxJT19BVVRIX1RPS0VOKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUd2lsaW8gY3JlZGVudGlhbHMgYXJlIG5vdCBjb25maWd1cmVkXCIpO1xuICAgIH1cbiAgICB0d2lsaW9DbGllbnQgPSB0d2lsaW8oZW52LlRXSUxJT19BQ0NPVU5UX1NJRCwgZW52LlRXSUxJT19BVVRIX1RPS0VOKTtcbiAgfVxuICByZXR1cm4gdHdpbGlvQ2xpZW50O1xufTtcblxuZXhwb3J0IGNvbnN0IHNlbmRTbXMgPSBhc3luYyAoeyB0bywgbWVzc2FnZSB9OiBTbXNQYXlsb2FkKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gIGlmICghdG8pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIHJlY2VpdmVyIHBob25lIG51bWJlclwiKTtcbiAgfVxuXG4gIGNvbnN0IGZyb21OdW1iZXIgPSBlbnYuVFdJTElPX0ZST01fTlVNQkVSO1xuXG4gIGlmICghZW52LlRXSUxJT19BQ0NPVU5UX1NJRCB8fCAhZW52LlRXSUxJT19BVVRIX1RPS0VOIHx8ICFmcm9tTnVtYmVyKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgICAgY29uc29sZS53YXJuKFwiVHdpbGlvIGNvbmZpZ3VyYXRpb24gbWlzc2luZzsgU01TIG5vdCBzZW50LiBNZXNzYWdlIHByZXZpZXc6XCIsIHtcbiAgICAgICAgdG8sXG4gICAgICAgIGZyb206IGZyb21OdW1iZXIgfHwgXCIodW5zZXQpXCIsXG4gICAgICAgIG1lc3NhZ2UsXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVHdpbGlvIGNvbmZpZ3VyYXRpb24gbWlzc2luZ1wiKTtcbiAgfVxuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcbiAgICBjb25zb2xlLmluZm8oYFNNUyBwcmV2aWV3IOKGkiAke3RvfTogJHttZXNzYWdlfWApO1xuICB9XG5cbiAgY29uc3QgY2xpZW50ID0gZ2V0VHdpbGlvQ2xpZW50KCk7XG4gIGNvbnN0IHR3aWxpb01lc3NhZ2UgPSBhd2FpdCBjbGllbnQubWVzc2FnZXMuY3JlYXRlKHsgdG8sIGZyb206IGZyb21OdW1iZXIsIGJvZHk6IG1lc3NhZ2UgfSk7XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgIGNvbnNvbGUuaW5mbyhgW1R3aWxpb10gU01TIGRpc3BhdGNoZWQgdG8gJHt0b30gKHNpZDogJHt0d2lsaW9NZXNzYWdlLnNpZH0pYCk7XG4gIH1cbn07XG4iXSwibmFtZXMiOlsidHdpbGlvIiwiZW52IiwidHdpbGlvQ2xpZW50IiwiZ2V0VHdpbGlvQ2xpZW50IiwiVFdJTElPX0FDQ09VTlRfU0lEIiwiVFdJTElPX0FVVEhfVE9LRU4iLCJFcnJvciIsInNlbmRTbXMiLCJ0byIsIm1lc3NhZ2UiLCJmcm9tTnVtYmVyIiwiVFdJTElPX0ZST01fTlVNQkVSIiwicHJvY2VzcyIsImNvbnNvbGUiLCJ3YXJuIiwiZnJvbSIsImluZm8iLCJjbGllbnQiLCJ0d2lsaW9NZXNzYWdlIiwibWVzc2FnZXMiLCJjcmVhdGUiLCJib2R5Iiwic2lkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/sms.ts\n");

/***/ }),

/***/ "(rsc)/./src/middlewares/body.middleware.ts":
/*!********************************************!*\
  !*** ./src/middlewares/body.middleware.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   jsonBodyMiddleware: () => (/* binding */ jsonBodyMiddleware)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/ZodError.js\");\n/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/errors */ \"(rsc)/./src/lib/errors.ts\");\n\n\nconst jsonBodyMiddleware = (schema)=>{\n    return async (context)=>{\n        let rawBody;\n        try {\n            rawBody = await context.req.json();\n        } catch (error) {\n            if (schema.isOptional()) {\n                rawBody = undefined;\n            } else {\n                throw new _lib_errors__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Invalid JSON body\");\n            }\n        }\n        try {\n            const parsed = schema.parse(rawBody);\n            return {\n                ...context,\n                body: parsed\n            };\n        } catch (error) {\n            if (error instanceof zod__WEBPACK_IMPORTED_MODULE_1__.ZodError) {\n                throw new _lib_errors__WEBPACK_IMPORTED_MODULE_0__.ValidationError(\"Validation failed\", error.flatten());\n            }\n            throw error;\n        }\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbWlkZGxld2FyZXMvYm9keS5taWRkbGV3YXJlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnRDtBQUVEO0FBR3hDLE1BQU1FLHFCQUFxQixDQUloQ0M7SUFFQSxPQUFPLE9BQU9DO1FBQ1osSUFBSUM7UUFFSixJQUFJO1lBQ0ZBLFVBQVUsTUFBTUQsUUFBUUUsR0FBRyxDQUFDQyxJQUFJO1FBQ2xDLEVBQUUsT0FBT0MsT0FBTztZQUNkLElBQUlMLE9BQU9NLFVBQVUsSUFBSTtnQkFDdkJKLFVBQVVLO1lBQ1osT0FBTztnQkFDTCxNQUFNLElBQUlULHdEQUFlQSxDQUFDO1lBQzVCO1FBQ0Y7UUFFQSxJQUFJO1lBQ0YsTUFBTVUsU0FBU1IsT0FBT1MsS0FBSyxDQUFDUDtZQUM1QixPQUFPO2dCQUNMLEdBQUdELE9BQU87Z0JBQ1ZTLE1BQU1GO1lBQ1I7UUFDRixFQUFFLE9BQU9ILE9BQU87WUFDZCxJQUFJQSxpQkFBaUJSLHlDQUFRQSxFQUFFO2dCQUM3QixNQUFNLElBQUlDLHdEQUFlQSxDQUFDLHFCQUFxQk8sTUFBTU0sT0FBTztZQUM5RDtZQUNBLE1BQU1OO1FBQ1I7SUFDRjtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZGEtYmFja2VuZC8uL3NyYy9taWRkbGV3YXJlcy9ib2R5Lm1pZGRsZXdhcmUudHM/ZDZkNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBab2RFcnJvciwgdHlwZSBab2RUeXBlQW55IH0gZnJvbSBcInpvZFwiO1xuXG5pbXBvcnQgeyBWYWxpZGF0aW9uRXJyb3IgfSBmcm9tIFwiQC9saWIvZXJyb3JzXCI7XG5pbXBvcnQgdHlwZSB7IEJvZHlDb250ZXh0LCBNaWRkbGV3YXJlLCBNaWRkbGV3YXJlQ29udGV4dCB9IGZyb20gXCJAL21pZGRsZXdhcmVzL3R5cGVzXCI7XG5cbmV4cG9ydCBjb25zdCBqc29uQm9keU1pZGRsZXdhcmUgPSA8XG4gIFRTY2hlbWEgZXh0ZW5kcyBab2RUeXBlQW55LFxuICBUSW5wdXQgZXh0ZW5kcyBNaWRkbGV3YXJlQ29udGV4dCA9IE1pZGRsZXdhcmVDb250ZXh0LFxuPihcbiAgc2NoZW1hOiBUU2NoZW1hLFxuKTogTWlkZGxld2FyZTxUSW5wdXQsIFRJbnB1dCAmIEJvZHlDb250ZXh0PFJldHVyblR5cGU8VFNjaGVtYVtcInBhcnNlXCJdPj4+ID0+IHtcbiAgcmV0dXJuIGFzeW5jIChjb250ZXh0KSA9PiB7XG4gICAgbGV0IHJhd0JvZHk6IHVua25vd247XG5cbiAgICB0cnkge1xuICAgICAgcmF3Qm9keSA9IGF3YWl0IGNvbnRleHQucmVxLmpzb24oKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKHNjaGVtYS5pc09wdGlvbmFsKCkpIHtcbiAgICAgICAgcmF3Qm9keSA9IHVuZGVmaW5lZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoXCJJbnZhbGlkIEpTT04gYm9keVwiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkID0gc2NoZW1hLnBhcnNlKHJhd0JvZHkpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uY29udGV4dCxcbiAgICAgICAgYm9keTogcGFyc2VkLFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgWm9kRXJyb3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihcIlZhbGlkYXRpb24gZmFpbGVkXCIsIGVycm9yLmZsYXR0ZW4oKSk7XG4gICAgICB9XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH07XG59O1xuIl0sIm5hbWVzIjpbIlpvZEVycm9yIiwiVmFsaWRhdGlvbkVycm9yIiwianNvbkJvZHlNaWRkbGV3YXJlIiwic2NoZW1hIiwiY29udGV4dCIsInJhd0JvZHkiLCJyZXEiLCJqc29uIiwiZXJyb3IiLCJpc09wdGlvbmFsIiwidW5kZWZpbmVkIiwicGFyc2VkIiwicGFyc2UiLCJib2R5IiwiZmxhdHRlbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/middlewares/body.middleware.ts\n");

/***/ }),

/***/ "(rsc)/./src/models/user.model.ts":
/*!**********************************!*\
  !*** ./src/models/user.model.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UserModel: () => (/* binding */ UserModel)\n/* harmony export */ });\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n\nconst UserModel = {\n    findById: (id, args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n            where: {\n                id\n            },\n            ...args ?? {}\n        }),\n    findByUsername: (username, args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n            where: {\n                username\n            },\n            ...args ?? {}\n        }),\n    findByEmail: (email, args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n            where: {\n                email\n            },\n            ...args ?? {}\n        }),\n    findByPhoneNumber: (phoneNumber, args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n            where: {\n                phoneNumber\n            },\n            ...args ?? {}\n        }),\n    findByNationalId: (nationalId, args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findUnique({\n            where: {\n                nationalId\n            },\n            ...args ?? {}\n        }),\n    findMany: (args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.findMany(args),\n    count: (args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.count(args),\n    create: (args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.create(args),\n    update: (args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.update(args),\n    delete: (args)=>_lib_prisma__WEBPACK_IMPORTED_MODULE_0__.prisma.user.delete(args)\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbW9kZWxzL3VzZXIubW9kZWwudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFFc0M7QUFJL0IsTUFBTUMsWUFBWTtJQUN2QkMsVUFBVSxDQUFDQyxJQUFZQyxPQUNyQkosK0NBQU1BLENBQUNLLElBQUksQ0FBQ0MsVUFBVSxDQUFDO1lBQUVDLE9BQU87Z0JBQUVKO1lBQUc7WUFBRyxHQUFJQyxRQUFRLENBQUMsQ0FBQztRQUFFO0lBRTFESSxnQkFBZ0IsQ0FBQ0MsVUFBa0JMLE9BQ2pDSiwrQ0FBTUEsQ0FBQ0ssSUFBSSxDQUFDQyxVQUFVLENBQUM7WUFBRUMsT0FBTztnQkFBRUU7WUFBUztZQUFHLEdBQUlMLFFBQVEsQ0FBQyxDQUFDO1FBQUU7SUFFaEVNLGFBQWEsQ0FBQ0MsT0FBZVAsT0FDM0JKLCtDQUFNQSxDQUFDSyxJQUFJLENBQUNDLFVBQVUsQ0FBQztZQUFFQyxPQUFPO2dCQUFFSTtZQUFNO1lBQUcsR0FBSVAsUUFBUSxDQUFDLENBQUM7UUFBRTtJQUU3RFEsbUJBQW1CLENBQ2pCQyxhQUNBVCxPQUVBSiwrQ0FBTUEsQ0FBQ0ssSUFBSSxDQUFDQyxVQUFVLENBQUM7WUFDckJDLE9BQU87Z0JBQUVNO1lBQVk7WUFDckIsR0FBSVQsUUFBUSxDQUFDLENBQUM7UUFDaEI7SUFFRlUsa0JBQWtCLENBQUNDLFlBQW9CWCxPQUNyQ0osK0NBQU1BLENBQUNLLElBQUksQ0FBQ0MsVUFBVSxDQUFDO1lBQUVDLE9BQU87Z0JBQUVRO1lBQVc7WUFBRyxHQUFJWCxRQUFRLENBQUMsQ0FBQztRQUFFO0lBRWxFWSxVQUFVLENBQUNaLE9BQW1DSiwrQ0FBTUEsQ0FBQ0ssSUFBSSxDQUFDVyxRQUFRLENBQUNaO0lBRW5FYSxPQUFPLENBQUNiLE9BQWdDSiwrQ0FBTUEsQ0FBQ0ssSUFBSSxDQUFDWSxLQUFLLENBQUNiO0lBRTFEYyxRQUFRLENBQUNkLE9BQWdDSiwrQ0FBTUEsQ0FBQ0ssSUFBSSxDQUFDYSxNQUFNLENBQUNkO0lBRTVEZSxRQUFRLENBQUNmLE9BQWdDSiwrQ0FBTUEsQ0FBQ0ssSUFBSSxDQUFDYyxNQUFNLENBQUNmO0lBRTVEZ0IsUUFBUSxDQUFDaEIsT0FBZ0NKLCtDQUFNQSxDQUFDSyxJQUFJLENBQUNlLE1BQU0sQ0FBQ2hCO0FBQzlELEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZGEtYmFja2VuZC8uL3NyYy9tb2RlbHMvdXNlci5tb2RlbC50cz8wZTk5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgUHJpc21hLCBVc2VyIH0gZnJvbSBcIkBwcmlzbWEvY2xpZW50XCI7XG5cbmltcG9ydCB7IHByaXNtYSB9IGZyb20gXCJAL2xpYi9wcmlzbWFcIjtcblxudHlwZSBVc2VyRmluZFVuaXF1ZUFyZ3NXaXRob3V0V2hlcmUgPSBPbWl0PFByaXNtYS5Vc2VyRmluZFVuaXF1ZUFyZ3MsIFwid2hlcmVcIj47XG5cbmV4cG9ydCBjb25zdCBVc2VyTW9kZWwgPSB7XG4gIGZpbmRCeUlkOiAoaWQ6IHN0cmluZywgYXJncz86IFVzZXJGaW5kVW5pcXVlQXJnc1dpdGhvdXRXaGVyZSkgPT5cbiAgICBwcmlzbWEudXNlci5maW5kVW5pcXVlKHsgd2hlcmU6IHsgaWQgfSwgLi4uKGFyZ3MgPz8ge30pIH0pLFxuXG4gIGZpbmRCeVVzZXJuYW1lOiAodXNlcm5hbWU6IHN0cmluZywgYXJncz86IFVzZXJGaW5kVW5pcXVlQXJnc1dpdGhvdXRXaGVyZSkgPT5cbiAgICBwcmlzbWEudXNlci5maW5kVW5pcXVlKHsgd2hlcmU6IHsgdXNlcm5hbWUgfSwgLi4uKGFyZ3MgPz8ge30pIH0pLFxuXG4gIGZpbmRCeUVtYWlsOiAoZW1haWw6IHN0cmluZywgYXJncz86IFVzZXJGaW5kVW5pcXVlQXJnc1dpdGhvdXRXaGVyZSkgPT5cbiAgICBwcmlzbWEudXNlci5maW5kVW5pcXVlKHsgd2hlcmU6IHsgZW1haWwgfSwgLi4uKGFyZ3MgPz8ge30pIH0pLFxuXG4gIGZpbmRCeVBob25lTnVtYmVyOiAoXG4gICAgcGhvbmVOdW1iZXI6IHN0cmluZyxcbiAgICBhcmdzPzogVXNlckZpbmRVbmlxdWVBcmdzV2l0aG91dFdoZXJlLFxuICApID0+XG4gICAgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZTogeyBwaG9uZU51bWJlciB9IGFzIFByaXNtYS5Vc2VyV2hlcmVVbmlxdWVJbnB1dCxcbiAgICAgIC4uLihhcmdzID8/IHt9KSxcbiAgICB9KSxcblxuICBmaW5kQnlOYXRpb25hbElkOiAobmF0aW9uYWxJZDogc3RyaW5nLCBhcmdzPzogVXNlckZpbmRVbmlxdWVBcmdzV2l0aG91dFdoZXJlKSA9PlxuICAgIHByaXNtYS51c2VyLmZpbmRVbmlxdWUoeyB3aGVyZTogeyBuYXRpb25hbElkIH0sIC4uLihhcmdzID8/IHt9KSB9KSxcblxuICBmaW5kTWFueTogKGFyZ3M/OiBQcmlzbWEuVXNlckZpbmRNYW55QXJncykgPT4gcHJpc21hLnVzZXIuZmluZE1hbnkoYXJncyksXG5cbiAgY291bnQ6IChhcmdzPzogUHJpc21hLlVzZXJDb3VudEFyZ3MpID0+IHByaXNtYS51c2VyLmNvdW50KGFyZ3MpLFxuXG4gIGNyZWF0ZTogKGFyZ3M6IFByaXNtYS5Vc2VyQ3JlYXRlQXJncykgPT4gcHJpc21hLnVzZXIuY3JlYXRlKGFyZ3MpLFxuXG4gIHVwZGF0ZTogKGFyZ3M6IFByaXNtYS5Vc2VyVXBkYXRlQXJncykgPT4gcHJpc21hLnVzZXIudXBkYXRlKGFyZ3MpLFxuXG4gIGRlbGV0ZTogKGFyZ3M6IFByaXNtYS5Vc2VyRGVsZXRlQXJncykgPT4gcHJpc21hLnVzZXIuZGVsZXRlKGFyZ3MpLFxufTtcblxuZXhwb3J0IHR5cGUgVXNlcldpdGhDb250ZXh0ID0gVXNlcjtcbiJdLCJuYW1lcyI6WyJwcmlzbWEiLCJVc2VyTW9kZWwiLCJmaW5kQnlJZCIsImlkIiwiYXJncyIsInVzZXIiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJmaW5kQnlVc2VybmFtZSIsInVzZXJuYW1lIiwiZmluZEJ5RW1haWwiLCJlbWFpbCIsImZpbmRCeVBob25lTnVtYmVyIiwicGhvbmVOdW1iZXIiLCJmaW5kQnlOYXRpb25hbElkIiwibmF0aW9uYWxJZCIsImZpbmRNYW55IiwiY291bnQiLCJjcmVhdGUiLCJ1cGRhdGUiLCJkZWxldGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/models/user.model.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/auth.service.ts":
/*!**************************************!*\
  !*** ./src/services/auth.service.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authenticateWithCredentials: () => (/* binding */ authenticateWithCredentials),\n/* harmony export */   getUserFromToken: () => (/* binding */ getUserFromToken),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   signToken: () => (/* binding */ signToken),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword)\n/* harmony export */ });\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var _lib_env__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/env */ \"(rsc)/./src/lib/env.ts\");\n/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/errors */ \"(rsc)/./src/lib/errors.ts\");\n/* harmony import */ var _models_user_model__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/models/user.model */ \"(rsc)/./src/models/user.model.ts\");\n\n\n\n\n\n\n\nconst TOKEN_TTL_SECONDS = 60 * 60 * 12; // 12 hours\nconst hashPassword = async (password)=>{\n    const salt = await bcryptjs__WEBPACK_IMPORTED_MODULE_0___default().genSalt(10);\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_0___default().hash(password, salt);\n};\nconst verifyPassword = async (password, hash)=>{\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_0___default().compare(password, hash);\n};\nconst signToken = (user)=>{\n    const payload = {\n        sub: user.id,\n        role: user.role,\n        unionId: user.unionId,\n        districtId: user.districtId,\n        churchId: user.churchId\n    };\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().sign(payload, _lib_env__WEBPACK_IMPORTED_MODULE_4__.env.JWT_SECRET, {\n        expiresIn: TOKEN_TTL_SECONDS\n    });\n};\nconst getUserFromToken = async (token)=>{\n    try {\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().verify(token, _lib_env__WEBPACK_IMPORTED_MODULE_4__.env.JWT_SECRET);\n        const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__.prisma.user.findUnique({\n            where: {\n                id: decoded.sub\n            }\n        });\n        if (!user) {\n            throw new _lib_errors__WEBPACK_IMPORTED_MODULE_5__.UnauthorizedError(\"User not found\");\n        }\n        if (!user.isActive) {\n            throw new _lib_errors__WEBPACK_IMPORTED_MODULE_5__.UnauthorizedError(\"Account disabled\");\n        }\n        return user;\n    } catch (error) {\n        if (error instanceof _lib_errors__WEBPACK_IMPORTED_MODULE_5__.UnauthorizedError) {\n            throw error;\n        }\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_5__.UnauthorizedError(\"Invalid token\");\n    }\n};\nconst authenticateWithCredentials = async ({ email, phoneNumber, password })=>{\n    let user = null;\n    if (phoneNumber) {\n        user = await _models_user_model__WEBPACK_IMPORTED_MODULE_6__.UserModel.findByPhoneNumber(phoneNumber);\n        if (!user || !user.isActive) {\n            throw new _lib_errors__WEBPACK_IMPORTED_MODULE_5__.UnauthorizedError(\"Invalid credentials\");\n        }\n        if (user.role !== _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Role.MEMBER) {\n            throw new _lib_errors__WEBPACK_IMPORTED_MODULE_5__.UnauthorizedError(\"Phone number login is restricted to members\");\n        }\n    } else if (email) {\n        user = await _models_user_model__WEBPACK_IMPORTED_MODULE_6__.UserModel.findByEmail(email);\n        if (!user || !user.isActive) {\n            throw new _lib_errors__WEBPACK_IMPORTED_MODULE_5__.UnauthorizedError(\"Invalid credentials\");\n        }\n        if (user.role === _prisma_client__WEBPACK_IMPORTED_MODULE_2__.Role.MEMBER) {\n            throw new _lib_errors__WEBPACK_IMPORTED_MODULE_5__.UnauthorizedError(\"Members must sign in with their phone number\");\n        }\n    } else {\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_5__.UnauthorizedError(\"Email or phone number is required\");\n    }\n    const validPassword = await verifyPassword(password, user.passwordHash);\n    if (!validPassword) {\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_5__.UnauthorizedError(\"Invalid credentials\");\n    }\n    const token = signToken({\n        id: user.id,\n        role: user.role,\n        unionId: user.unionId,\n        districtId: user.districtId,\n        churchId: user.churchId\n    });\n    const { passwordHash, ...safeUser } = user;\n    return {\n        token,\n        user: safeUser\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQU1KLEtBQUtJLElBQUk7UUFDZkMsU0FBU0wsS0FBS0ssT0FBTztRQUNyQkMsWUFBWU4sS0FBS00sVUFBVTtRQUMzQkMsVUFBVVAsS0FBS08sUUFBUTtJQUN6QjtJQUVBLE1BQU0sRUFBRW1CLFlBQVksRUFBRSxHQUFHQyxVQUFVLEdBQUczQjtJQUV0QyxPQUFPO1FBQ0xZO1FBQ0FaLE1BQU0yQjtJQUNSO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3NkYS1iYWNrZW5kLy4vc3JjL3NlcnZpY2VzL2F1dGguc2VydmljZS50cz9kNmZhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBiY3J5cHQgZnJvbSBcImJjcnlwdGpzXCI7XG5pbXBvcnQgand0IGZyb20gXCJqc29ud2VidG9rZW5cIjtcbmltcG9ydCB7IFJvbGUsIHR5cGUgVXNlciB9IGZyb20gXCJAcHJpc21hL2NsaWVudFwiO1xuXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tIFwiQC9saWIvcHJpc21hXCI7XG5pbXBvcnQgeyBlbnYgfSBmcm9tIFwiQC9saWIvZW52XCI7XG5pbXBvcnQgeyBVbmF1dGhvcml6ZWRFcnJvciB9IGZyb20gXCJAL2xpYi9lcnJvcnNcIjtcbmltcG9ydCB7IFVzZXJNb2RlbCB9IGZyb20gXCJAL21vZGVscy91c2VyLm1vZGVsXCI7XG5cbmNvbnN0IFRPS0VOX1RUTF9TRUNPTkRTID0gNjAgKiA2MCAqIDEyOyAvLyAxMiBob3Vyc1xuXG50eXBlIEp3dFBheWxvYWQgPSB7XG4gIHN1Yjogc3RyaW5nO1xuICByb2xlOiBSb2xlO1xuICB1bmlvbklkPzogc3RyaW5nIHwgbnVsbDtcbiAgZGlzdHJpY3RJZD86IHN0cmluZyB8IG51bGw7XG4gIGNodXJjaElkPzogc3RyaW5nIHwgbnVsbDtcbn07XG5cbmV4cG9ydCB0eXBlIFRva2VuU3ViamVjdCA9IFBpY2s8VXNlciwgXCJpZFwiIHwgXCJyb2xlXCIgfCBcInVuaW9uSWRcIiB8IFwiZGlzdHJpY3RJZFwiIHwgXCJjaHVyY2hJZFwiPjtcblxuZXhwb3J0IHR5cGUgQXV0aFVzZXIgPSBPbWl0PFVzZXIsIFwicGFzc3dvcmRIYXNoXCI+O1xuXG5leHBvcnQgY29uc3QgaGFzaFBhc3N3b3JkID0gYXN5bmMgKHBhc3N3b3JkOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4gPT4ge1xuICBjb25zdCBzYWx0ID0gYXdhaXQgYmNyeXB0LmdlblNhbHQoMTApO1xuICByZXR1cm4gYmNyeXB0Lmhhc2gocGFzc3dvcmQsIHNhbHQpO1xufTtcblxuZXhwb3J0IGNvbnN0IHZlcmlmeVBhc3N3b3JkID0gYXN5bmMgKHBhc3N3b3JkOiBzdHJpbmcsIGhhc2g6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4gPT4ge1xuICByZXR1cm4gYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIGhhc2gpO1xufTtcblxuZXhwb3J0IGNvbnN0IHNpZ25Ub2tlbiA9ICh1c2VyOiBUb2tlblN1YmplY3QpOiBzdHJpbmcgPT4ge1xuICBjb25zdCBwYXlsb2FkOiBKd3RQYXlsb2FkID0ge1xuICAgIHN1YjogdXNlci5pZCxcbiAgICByb2xlOiB1c2VyLnJvbGUsXG4gICAgdW5pb25JZDogdXNlci51bmlvbklkLFxuICAgIGRpc3RyaWN0SWQ6IHVzZXIuZGlzdHJpY3RJZCxcbiAgICBjaHVyY2hJZDogdXNlci5jaHVyY2hJZCxcbiAgfTtcblxuICByZXR1cm4gand0LnNpZ24ocGF5bG9hZCwgZW52LkpXVF9TRUNSRVQsIHtcbiAgICBleHBpcmVzSW46IFRPS0VOX1RUTF9TRUNPTkRTLFxuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRVc2VyRnJvbVRva2VuID0gYXN5bmMgKHRva2VuOiBzdHJpbmcpOiBQcm9taXNlPFVzZXI+ID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgZW52LkpXVF9TRUNSRVQpIGFzIEp3dFBheWxvYWQ7XG5cbiAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZTogeyBpZDogZGVjb2RlZC5zdWIgfSxcbiAgICB9KTtcblxuICAgIGlmICghdXNlcikge1xuICAgICAgdGhyb3cgbmV3IFVuYXV0aG9yaXplZEVycm9yKFwiVXNlciBub3QgZm91bmRcIik7XG4gICAgfVxuXG4gICAgaWYgKCF1c2VyLmlzQWN0aXZlKSB7XG4gICAgICB0aHJvdyBuZXcgVW5hdXRob3JpemVkRXJyb3IoXCJBY2NvdW50IGRpc2FibGVkXCIpO1xuICAgIH1cblxuICAgIHJldHVybiB1c2VyO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFVuYXV0aG9yaXplZEVycm9yKSB7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG5cbiAgICB0aHJvdyBuZXcgVW5hdXRob3JpemVkRXJyb3IoXCJJbnZhbGlkIHRva2VuXCIpO1xuICB9XG59O1xuXG50eXBlIENyZWRlbnRpYWxJbnB1dCA9IHtcbiAgZW1haWw/OiBzdHJpbmc7XG4gIHBob25lTnVtYmVyPzogc3RyaW5nO1xuICBwYXNzd29yZDogc3RyaW5nO1xufTtcblxuZXhwb3J0IGNvbnN0IGF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFscyA9IGFzeW5jICh7XG4gIGVtYWlsLFxuICBwaG9uZU51bWJlcixcbiAgcGFzc3dvcmQsXG59OiBDcmVkZW50aWFsSW5wdXQpID0+IHtcbiAgbGV0IHVzZXI6IFVzZXIgfCBudWxsID0gbnVsbDtcblxuICBpZiAocGhvbmVOdW1iZXIpIHtcbiAgICB1c2VyID0gYXdhaXQgVXNlck1vZGVsLmZpbmRCeVBob25lTnVtYmVyKHBob25lTnVtYmVyKTtcblxuICAgIGlmICghdXNlciB8fCAhdXNlci5pc0FjdGl2ZSkge1xuICAgICAgdGhyb3cgbmV3IFVuYXV0aG9yaXplZEVycm9yKFwiSW52YWxpZCBjcmVkZW50aWFsc1wiKTtcbiAgICB9XG5cbiAgICBpZiAodXNlci5yb2xlICE9PSBSb2xlLk1FTUJFUikge1xuICAgICAgdGhyb3cgbmV3IFVuYXV0aG9yaXplZEVycm9yKFwiUGhvbmUgbnVtYmVyIGxvZ2luIGlzIHJlc3RyaWN0ZWQgdG8gbWVtYmVyc1wiKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoZW1haWwpIHtcbiAgICB1c2VyID0gYXdhaXQgVXNlck1vZGVsLmZpbmRCeUVtYWlsKGVtYWlsKTtcblxuICAgIGlmICghdXNlciB8fCAhdXNlci5pc0FjdGl2ZSkge1xuICAgICAgdGhyb3cgbmV3IFVuYXV0aG9yaXplZEVycm9yKFwiSW52YWxpZCBjcmVkZW50aWFsc1wiKTtcbiAgICB9XG5cbiAgICBpZiAodXNlci5yb2xlID09PSBSb2xlLk1FTUJFUikge1xuICAgICAgdGhyb3cgbmV3IFVuYXV0aG9yaXplZEVycm9yKFwiTWVtYmVycyBtdXN0IHNpZ24gaW4gd2l0aCB0aGVpciBwaG9uZSBudW1iZXJcIik7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBVbmF1dGhvcml6ZWRFcnJvcihcIkVtYWlsIG9yIHBob25lIG51bWJlciBpcyByZXF1aXJlZFwiKTtcbiAgfVxuXG4gIGNvbnN0IHZhbGlkUGFzc3dvcmQgPSBhd2FpdCB2ZXJpZnlQYXNzd29yZChwYXNzd29yZCwgdXNlci5wYXNzd29yZEhhc2gpO1xuXG4gIGlmICghdmFsaWRQYXNzd29yZCkge1xuICAgIHRocm93IG5ldyBVbmF1dGhvcml6ZWRFcnJvcihcIkludmFsaWQgY3JlZGVudGlhbHNcIik7XG4gIH1cblxuICBjb25zdCB0b2tlbiA9IHNpZ25Ub2tlbih7XG4gICAgaWQ6IHVzZXIuaWQsXG4gICAgcm9sZTogdXNlci5yb2xlLFxuICAgIHVuaW9uSWQ6IHVzZXIudW5pb25JZCxcbiAgICBkaXN0cmljdElkOiB1c2VyLmRpc3RyaWN0SWQsXG4gICAgY2h1cmNoSWQ6IHVzZXIuY2h1cmNoSWQsXG4gIH0pO1xuXG4gIGNvbnN0IHsgcGFzc3dvcmRIYXNoLCAuLi5zYWZlVXNlciB9ID0gdXNlcjtcblxuICByZXR1cm4ge1xuICAgIHRva2VuLFxuICAgIHVzZXI6IHNhZmVVc2VyIGFzIEF1dGhVc2VyLFxuICB9IHNhdGlzZmllcyB7IHRva2VuOiBzdHJpbmc7IHVzZXI6IEF1dGhVc2VyIH07XG59O1xuIl0sIm5hbWVzIjpbImJjcnlwdCIsImp3dCIsIlJvbGUiLCJwcmlzbWEiLCJlbnYiLCJVbmF1dGhvcml6ZWRFcnJvciIsIlVzZXJNb2RlbCIsIlRPS0VOX1RUTF9TRUNPTkRTIiwiaGFzaFBhc3N3b3JkIiwicGFzc3dvcmQiLCJzYWx0IiwiZ2VuU2FsdCIsImhhc2giLCJ2ZXJpZnlQYXNzd29yZCIsImNvbXBhcmUiLCJzaWduVG9rZW4iLCJ1c2VyIiwicGF5bG9hZCIsInN1YiIsImlkIiwicm9sZSIsInVuaW9uSWQiLCJkaXN0cmljdElkIiwiY2h1cmNoSWQiLCJzaWduIiwiSldUX1NFQ1JFVCIsImV4cGlyZXNJbiIsImdldFVzZXJGcm9tVG9rZW4iLCJ0b2tlbiIsImRlY29kZWQiLCJ2ZXJpZnkiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJpc0FjdGl2ZSIsImVycm9yIiwiYXV0aGVudGljYXRlV2l0aENyZWRlbnRpYWxzIiwiZW1haWwiLCJwaG9uZU51bWJlciIsImZpbmRCeVBob25lTnVtYmVyIiwiTUVNQkVSIiwiZmluZEJ5RW1haWwiLCJ2YWxpZFBhc3N3b3JkIiwicGFzc3dvcmRIYXNoIiwic2FmZVVzZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/services/auth.service.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/passwordReset.service.ts":
/*!***********************************************!*\
  !*** ./src/services/passwordReset.service.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   confirmPasswordReset: () => (/* binding */ confirmPasswordReset),\n/* harmony export */   requestPasswordReset: () => (/* binding */ requestPasswordReset)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var _lib_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/env */ \"(rsc)/./src/lib/env.ts\");\n/* harmony import */ var _lib_sms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/sms */ \"(rsc)/./src/lib/sms.ts\");\n/* harmony import */ var _lib_email__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/email */ \"(rsc)/./src/lib/email.ts\");\n/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/errors */ \"(rsc)/./src/lib/errors.ts\");\n/* harmony import */ var _models_user_model__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/models/user.model */ \"(rsc)/./src/models/user.model.ts\");\n/* harmony import */ var _services_auth_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/services/auth.service */ \"(rsc)/./src/services/auth.service.ts\");\n\n\n\n\n\n\n\n\nconst RESET_TOKEN_TTL_MINUTES = 60;\n// Roles that should receive password reset via email\nconst EMAIL_BASED_ROLES = [\n    \"UNION_ADMIN\",\n    \"DISTRICT_ADMIN\",\n    \"CHURCH_ADMIN\"\n];\n// Roles that should receive password reset via SMS\nconst SMS_BASED_ROLES = [\n    \"MEMBER\",\n    \"POLICE_VERIFIER\"\n];\nconst buildResetLink = (token)=>{\n    const baseUrl = _lib_env__WEBPACK_IMPORTED_MODULE_2__.env.PRIMARY_ORIGIN || \"http://localhost:3000\";\n    return `${baseUrl}/reset-password/confirm?token=${encodeURIComponent(token)}`;\n};\nconst generateResetToken = ()=>crypto__WEBPACK_IMPORTED_MODULE_0___default().randomBytes(24).toString(\"base64url\");\nconst sendResetViaSms = async (phoneNumber, token, expiresInMinutes)=>{\n    if (!_lib_env__WEBPACK_IMPORTED_MODULE_2__.env.SMS_API_KEY) {\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_5__.AppError(\"SMS service is not configured\", 500);\n    }\n    const link = buildResetLink(token);\n    const message = [\n        \"Umuganda SDA password reset request.\",\n        `Follow this link within ${expiresInMinutes} minutes: ${link}`\n    ].join(\" \");\n    try {\n        await (0,_lib_sms__WEBPACK_IMPORTED_MODULE_3__.sendSms)({\n            to: phoneNumber,\n            message\n        });\n        return true;\n    } catch (smsError) {\n        console.error(\"Failed to send password reset SMS\", smsError);\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_5__.AppError(\"Unable to send password reset SMS\", 500);\n    }\n};\nconst sendResetViaEmail = async (email, token, expiresInMinutes)=>{\n    if (!_lib_env__WEBPACK_IMPORTED_MODULE_2__.env.GMAIL_USER || !_lib_env__WEBPACK_IMPORTED_MODULE_2__.env.GMAIL_APP_PASSWORD) {\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_5__.AppError(\"Email service is not properly configured\", 500);\n    }\n    try {\n        await (0,_lib_email__WEBPACK_IMPORTED_MODULE_4__.sendPasswordResetEmail)(email, token, expiresInMinutes);\n        return true;\n    } catch (error) {\n        console.error(\"Failed to send password reset email\", error);\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_5__.AppError(\"Unable to send password reset email\", 500);\n    }\n};\nconst requestPasswordReset = async ({ nationalId, email })=>{\n    if (!nationalId && !email) {\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_5__.AppError(\"Provide either national ID or email\", 400);\n    }\n    const user = nationalId ? await _models_user_model__WEBPACK_IMPORTED_MODULE_6__.UserModel.findByNationalId(nationalId) : await _models_user_model__WEBPACK_IMPORTED_MODULE_6__.UserModel.findByEmail(email);\n    if (!user) {\n        // Avoid leaking account existence  respond with success\n        return {\n            success: true\n        };\n    }\n    const token = generateResetToken();\n    const expiresAt = new Date(Date.now() + RESET_TOKEN_TTL_MINUTES * 60 * 1000);\n    await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.passwordResetToken.create({\n        data: {\n            userId: user.id,\n            token,\n            expiresAt\n        }\n    });\n    // Determine the appropriate reset method based on user role\n    const isAdmin = EMAIL_BASED_ROLES.includes(user.role);\n    const isMember = SMS_BASED_ROLES.includes(user.role);\n    try {\n        if (isAdmin && user.email) {\n            // Send reset link via email for admins\n            await sendResetViaEmail(user.email, token, RESET_TOKEN_TTL_MINUTES);\n        } else if (isMember && user.phoneNumber) {\n            // Send reset link via SMS for members\n            await sendResetViaSms(user.phoneNumber, token, RESET_TOKEN_TTL_MINUTES);\n        } else if (isAdmin && !user.email) {\n            throw new _lib_errors__WEBPACK_IMPORTED_MODULE_5__.AppError(\"No email address on record for this admin account\", 400);\n        } else if (isMember && !user.phoneNumber) {\n            throw new _lib_errors__WEBPACK_IMPORTED_MODULE_5__.AppError(\"No phone number on record for this member account\", 400);\n        } else {\n            throw new _lib_errors__WEBPACK_IMPORTED_MODULE_5__.AppError(\"Unable to determine reset method for this user\", 400);\n        }\n    } catch (error) {\n        // Clean up the token if sending fails\n        await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.passwordResetToken.deleteMany({\n            where: {\n                token\n            }\n        });\n        throw error; // Re-throw the error to be handled by the controller\n    }\n    return {\n        success: true\n    };\n};\nconst confirmPasswordReset = async ({ token, newPassword })=>{\n    if (!token || !newPassword) {\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_5__.AppError(\"Token and new password are required\", 400);\n    }\n    if (newPassword.length < 8) {\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_5__.AppError(\"Password must be at least 8 characters\", 400);\n    }\n    const record = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.passwordResetToken.findUnique({\n        where: {\n            token\n        },\n        include: {\n            user: true\n        }\n    });\n    if (!record) {\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_5__.NotFoundError(\"Reset token not found\");\n    }\n    if (record.usedAt) {\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_5__.AppError(\"Reset token already used\", 400);\n    }\n    if (record.expiresAt.getTime() < Date.now()) {\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_5__.AppError(\"Reset token expired\", 400);\n    }\n    // Check if the user still exists and is active\n    const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.user.findUnique({\n        where: {\n            id: record.userId\n        }\n    });\n    if (!user) {\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_5__.NotFoundError(\"User account not found\");\n    }\n    if (!user.isActive) {\n        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_5__.AppError(\"This account has been deactivated\", 403);\n    }\n    const passwordHash = await (0,_services_auth_service__WEBPACK_IMPORTED_MODULE_7__.hashPassword)(newPassword);\n    // Update the user's password and mark the token as used in a transaction\n    await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.$transaction([\n        _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.user.update({\n            where: {\n                id: record.userId\n            },\n            data: {\n                passwordHash\n            }\n        }),\n        _lib_prisma__WEBPACK_IMPORTED_MODULE_1__.prisma.passwordResetToken.update({\n            where: {\n                id: record.id\n            },\n            data: {\n                usedAt: new Date()\n            }\n        })\n    ]);\n    return {\n        success: true\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmljZXMvcGFzc3dvcmRSZXNldC5zZXJ2aWNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQTRCO0FBRVU7QUFDTjtBQUNJO0FBQ2lCO0FBQ0U7QUFDUDtBQUNPO0FBR3ZELE1BQU1TLDBCQUEwQjtBQUVoQyxxREFBcUQ7QUFDckQsTUFBTUMsb0JBQTRCO0lBQ2hDO0lBQ0E7SUFDQTtDQUNEO0FBRUQsbURBQW1EO0FBQ25ELE1BQU1DLGtCQUEwQjtJQUM5QjtJQUNBO0NBQ0Q7QUFZRCxNQUFNQyxpQkFBaUIsQ0FBQ0M7SUFDdEIsTUFBTUMsVUFBVVoseUNBQUdBLENBQUNhLGNBQWMsSUFBSTtJQUN0QyxPQUFPLENBQUMsRUFBRUQsUUFBUSw4QkFBOEIsRUFBRUUsbUJBQW1CSCxPQUFPLENBQUM7QUFDL0U7QUFFQSxNQUFNSSxxQkFBcUIsSUFBTWpCLHlEQUFrQixDQUFDLElBQUltQixRQUFRLENBQUM7QUFFakUsTUFBTUMsa0JBQWtCLE9BQU9DLGFBQXFCUixPQUFlUztJQUNqRSxJQUFJLENBQUNwQix5Q0FBR0EsQ0FBQ3FCLFdBQVcsRUFBRTtRQUNwQixNQUFNLElBQUlsQixpREFBUUEsQ0FBQyxpQ0FBaUM7SUFDdEQ7SUFFQSxNQUFNbUIsT0FBT1osZUFBZUM7SUFDNUIsTUFBTVksVUFBVTtRQUNkO1FBQ0EsQ0FBQyx3QkFBd0IsRUFBRUgsaUJBQWlCLFVBQVUsRUFBRUUsS0FBSyxDQUFDO0tBQy9ELENBQUNFLElBQUksQ0FBQztJQUVQLElBQUk7UUFDRixNQUFNdkIsaURBQU9BLENBQUM7WUFDWndCLElBQUlOO1lBQ0pJO1FBQ0Y7UUFDQSxPQUFPO0lBQ1QsRUFBRSxPQUFPRyxVQUFVO1FBQ2pCQyxRQUFRQyxLQUFLLENBQUMscUNBQXFDRjtRQUNuRCxNQUFNLElBQUl2QixpREFBUUEsQ0FBQyxxQ0FBcUM7SUFDMUQ7QUFDRjtBQUVBLE1BQU0wQixvQkFBb0IsT0FBT0MsT0FBZW5CLE9BQWVTO0lBQzdELElBQUksQ0FB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aWNlLnRzP2YwODQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNyeXB0byBmcm9tIFwiY3J5cHRvXCI7XG5cbmltcG9ydCB7IHByaXNtYSB9IGZyb20gXCJAL2xpYi9wcmlzbWFcIjtcbmltcG9ydCB7IGVudiB9IGZyb20gXCJAL2xpYi9lbnZcIjtcbmltcG9ydCB7IHNlbmRTbXMgfSBmcm9tIFwiQC9saWIvc21zXCI7XG5pbXBvcnQgeyBzZW5kUGFzc3dvcmRSZXNldEVtYWlsIH0gZnJvbSBcIkAvbGliL2VtYWlsXCI7XG5pbXBvcnQgeyBBcHBFcnJvciwgTm90Rm91bmRFcnJvciB9IGZyb20gXCJAL2xpYi9lcnJvcnNcIjtcbmltcG9ydCB7IFVzZXJNb2RlbCB9IGZyb20gXCJAL21vZGVscy91c2VyLm1vZGVsXCI7XG5pbXBvcnQgeyBoYXNoUGFzc3dvcmQgfSBmcm9tIFwiQC9zZXJ2aWNlcy9hdXRoLnNlcnZpY2VcIjtcbmltcG9ydCB7IFJvbGUgfSBmcm9tIFwiQHByaXNtYS9jbGllbnRcIjtcblxuY29uc3QgUkVTRVRfVE9LRU5fVFRMX01JTlVURVMgPSA2MDtcblxuLy8gUm9sZXMgdGhhdCBzaG91bGQgcmVjZWl2ZSBwYXNzd29yZCByZXNldCB2aWEgZW1haWxcbmNvbnN0IEVNQUlMX0JBU0VEX1JPTEVTOiBSb2xlW10gPSBbXG4gICdVTklPTl9BRE1JTicsXG4gICdESVNUUklDVF9BRE1JTicsIFxuICAnQ0hVUkNIX0FETUlOJ1xuXTtcblxuLy8gUm9sZXMgdGhhdCBzaG91bGQgcmVjZWl2ZSBwYXNzd29yZCByZXNldCB2aWEgU01TXG5jb25zdCBTTVNfQkFTRURfUk9MRVM6IFJvbGVbXSA9IFtcbiAgJ01FTUJFUicsXG4gICdQT0xJQ0VfVkVSSUZJRVInXG5dO1xuXG5leHBvcnQgaW50ZXJmYWNlIFBhc3N3b3JkUmVzZXRSZXF1ZXN0SW5wdXQge1xuICBuYXRpb25hbElkPzogc3RyaW5nO1xuICBlbWFpbD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYXNzd29yZFJlc2V0Q29uZmlybUlucHV0IHtcbiAgdG9rZW46IHN0cmluZztcbiAgbmV3UGFzc3dvcmQ6IHN0cmluZztcbn1cblxuY29uc3QgYnVpbGRSZXNldExpbmsgPSAodG9rZW46IHN0cmluZykgPT4ge1xuICBjb25zdCBiYXNlVXJsID0gZW52LlBSSU1BUllfT1JJR0lOIHx8IFwiaHR0cDovL2xvY2FsaG9zdDozMDAwXCI7XG4gIHJldHVybiBgJHtiYXNlVXJsfS9yZXNldC1wYXNzd29yZC9jb25maXJtP3Rva2VuPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHRva2VuKX1gO1xufTtcblxuY29uc3QgZ2VuZXJhdGVSZXNldFRva2VuID0gKCkgPT4gY3J5cHRvLnJhbmRvbUJ5dGVzKDI0KS50b1N0cmluZyhcImJhc2U2NHVybFwiKTtcblxuY29uc3Qgc2VuZFJlc2V0VmlhU21zID0gYXN5bmMgKHBob25lTnVtYmVyOiBzdHJpbmcsIHRva2VuOiBzdHJpbmcsIGV4cGlyZXNJbk1pbnV0ZXM6IG51bWJlcikgPT4ge1xuICBpZiAoIWVudi5TTVNfQVBJX0tFWSkge1xuICAgIHRocm93IG5ldyBBcHBFcnJvcihcIlNNUyBzZXJ2aWNlIGlzIG5vdCBjb25maWd1cmVkXCIsIDUwMCk7XG4gIH1cblxuICBjb25zdCBsaW5rID0gYnVpbGRSZXNldExpbmsodG9rZW4pO1xuICBjb25zdCBtZXNzYWdlID0gW1xuICAgIFwiVW11Z2FuZGEgU0RBIHBhc3N3b3JkIHJlc2V0IHJlcXVlc3QuXCIsXG4gICAgYEZvbGxvdyB0aGlzIGxpbmsgd2l0aGluICR7ZXhwaXJlc0luTWludXRlc30gbWludXRlczogJHtsaW5rfWAsXG4gIF0uam9pbihcIiBcIik7XG5cbiAgdHJ5IHtcbiAgICBhd2FpdCBzZW5kU21zKHtcbiAgICAgIHRvOiBwaG9uZU51bWJlcixcbiAgICAgIG1lc3NhZ2UsXG4gICAgfSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKHNtc0Vycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBzZW5kIHBhc3N3b3JkIHJlc2V0IFNNU1wiLCBzbXNFcnJvcik7XG4gICAgdGhyb3cgbmV3IEFwcEVycm9yKFwiVW5hYmxlIHRvIHNlbmQgcGFzc3dvcmQgcmVzZXQgU01TXCIsIDUwMCk7XG4gIH1cbn07XG5cbmNvbnN0IHNlbmRSZXNldFZpYUVtYWlsID0gYXN5bmMgKGVtYWlsOiBzdHJpbmcsIHRva2VuOiBzdHJpbmcsIGV4cGlyZXNJbk1pbnV0ZXM6IG51bWJlcikgPT4ge1xuICBpZiAoIWVudi5HTUFJTF9VU0VSIHx8ICFlbnYuR01BSUxfQVBQX1BBU1NXT1JEKSB7XG4gICAgdGhyb3cgbmV3IEFwcEVycm9yKFwiRW1haWwgc2VydmljZSBpcyBub3QgcHJvcGVybHkgY29uZmlndXJlZFwiLCA1MDApO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBhd2FpdCBzZW5kUGFzc3dvcmRSZXNldEVtYWlsKGVtYWlsLCB0b2tlbiwgZXhwaXJlc0luTWludXRlcyk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBzZW5kIHBhc3N3b3JkIHJlc2V0IGVtYWlsXCIsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgQXBwRXJyb3IoXCJVbmFibGUgdG8gc2VuZCBwYXNzd29yZCByZXNldCBlbWFpbFwiLCA1MDApO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgcmVxdWVzdFBhc3N3b3JkUmVzZXQgPSBhc3luYyAoeyBuYXRpb25hbElkLCBlbWFpbCB9OiBQYXNzd29yZFJlc2V0UmVxdWVzdElucHV0KSA9PiB7XG4gIGlmICghbmF0aW9uYWxJZCAmJiAhZW1haWwpIHtcbiAgICB0aHJvdyBuZXcgQXBwRXJyb3IoXCJQcm92aWRlIGVpdGhlciBuYXRpb25hbCBJRCBvciBlbWFpbFwiLCA0MDApO1xuICB9XG5cbiAgY29uc3QgdXNlciA9IG5hdGlvbmFsSWRcbiAgICA/IGF3YWl0IFVzZXJNb2RlbC5maW5kQnlOYXRpb25hbElkKG5hdGlvbmFsSWQpXG4gICAgOiBhd2FpdCBVc2VyTW9kZWwuZmluZEJ5RW1haWwoZW1haWwgYXMgc3RyaW5nKTtcblxuICBpZiAoIXVzZXIpIHtcbiAgICAvLyBBdm9pZCBsZWFraW5nIGFjY291bnQgZXhpc3RlbmNlIOKAkyByZXNwb25kIHdpdGggc3VjY2Vzc1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfSBhcyBjb25zdDtcbiAgfVxuXG4gIGNvbnN0IHRva2VuID0gZ2VuZXJhdGVSZXNldFRva2VuKCk7XG4gIGNvbnN0IGV4cGlyZXNBdCA9IG5ldyBEYXRlKERhdGUubm93KCkgKyBSRVNFVF9UT0tFTl9UVExfTUlOVVRFUyAqIDYwICogMTAwMCk7XG5cbiAgYXdhaXQgcHJpc21hLnBhc3N3b3JkUmVzZXRUb2tlbi5jcmVhdGUoe1xuICAgIGRhdGE6IHtcbiAgICAgIHVzZXJJZDogdXNlci5pZCxcbiAgICAgIHRva2VuLFxuICAgICAgZXhwaXJlc0F0LFxuICAgIH0sXG4gIH0pO1xuXG4gIC8vIERldGVybWluZSB0aGUgYXBwcm9wcmlhdGUgcmVzZXQgbWV0aG9kIGJhc2VkIG9uIHVzZXIgcm9sZVxuICBjb25zdCBpc0FkbWluID0gRU1BSUxfQkFTRURfUk9MRVMuaW5jbHVkZXModXNlci5yb2xlIGFzIFJvbGUpO1xuICBjb25zdCBpc01lbWJlciA9IFNNU19CQVNFRF9ST0xFUy5pbmNsdWRlcyh1c2VyLnJvbGUgYXMgUm9sZSk7XG5cbiAgdHJ5IHtcbiAgICBpZiAoaXNBZG1pbiAmJiB1c2VyLmVtYWlsKSB7XG4gICAgICAvLyBTZW5kIHJlc2V0IGxpbmsgdmlhIGVtYWlsIGZvciBhZG1pbnNcbiAgICAgIGF3YWl0IHNlbmRSZXNldFZpYUVtYWlsKHVzZXIuZW1haWwsIHRva2VuLCBSRVNFVF9UT0tFTl9UVExfTUlOVVRFUyk7XG4gICAgfSBlbHNlIGlmIChpc01lbWJlciAmJiB1c2VyLnBob25lTnVtYmVyKSB7XG4gICAgICAvLyBTZW5kIHJlc2V0IGxpbmsgdmlhIFNNUyBmb3IgbWVtYmVyc1xuICAgICAgYXdhaXQgc2VuZFJlc2V0VmlhU21zKHVzZXIucGhvbmVOdW1iZXIsIHRva2VuLCBSRVNFVF9UT0tFTl9UVExfTUlOVVRFUyk7XG4gICAgfSBlbHNlIGlmIChpc0FkbWluICYmICF1c2VyLmVtYWlsKSB7XG4gICAgICB0aHJvdyBuZXcgQXBwRXJyb3IoXCJObyBlbWFpbCBhZGRyZXNzIG9uIHJlY29yZCBmb3IgdGhpcyBhZG1pbiBhY2NvdW50XCIsIDQwMCk7XG4gICAgfSBlbHNlIGlmIChpc01lbWJlciAmJiAhdXNlci5waG9uZU51bWJlcikge1xuICAgICAgdGhyb3cgbmV3IEFwcEVycm9yKFwiTm8gcGhvbmUgbnVtYmVyIG9uIHJlY29yZCBmb3IgdGhpcyBtZW1iZXIgYWNjb3VudFwiLCA0MDApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgQXBwRXJyb3IoXCJVbmFibGUgdG8gZGV0ZXJtaW5lIHJlc2V0IG1ldGhvZCBmb3IgdGhpcyB1c2VyXCIsIDQwMCk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIC8vIENsZWFuIHVwIHRoZSB0b2tlbiBpZiBzZW5kaW5nIGZhaWxzXG4gICAgYXdhaXQgcHJpc21hLnBhc3N3b3JkUmVzZXRUb2tlbi5kZWxldGVNYW55KHtcbiAgICAgIHdoZXJlOiB7IHRva2VuIH1cbiAgICB9KTtcbiAgICB0aHJvdyBlcnJvcjsgLy8gUmUtdGhyb3cgdGhlIGVycm9yIHRvIGJlIGhhbmRsZWQgYnkgdGhlIGNvbnRyb2xsZXJcbiAgfVxuXG4gIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfSBhcyBjb25zdDtcbn07XG5cbmV4cG9ydCBjb25zdCBjb25maXJtUGFzc3dvcmRSZXNldCA9IGFzeW5jICh7IHRva2VuLCBuZXdQYXNzd29yZCB9OiBQYXNzd29yZFJlc2V0Q29uZmlybUlucHV0KSA9PiB7XG4gIGlmICghdG9rZW4gfHwgIW5ld1Bhc3N3b3JkKSB7XG4gICAgdGhyb3cgbmV3IEFwcEVycm9yKFwiVG9rZW4gYW5kIG5ldyBwYXNzd29yZCBhcmUgcmVxdWlyZWRcIiwgNDAwKTtcbiAgfVxuXG4gIGlmIChuZXdQYXNzd29yZC5sZW5ndGggPCA4KSB7XG4gICAgdGhyb3cgbmV3IEFwcEVycm9yKFwiUGFzc3dvcmQgbXVzdCBiZSBhdCBsZWFzdCA4IGNoYXJhY3RlcnNcIiwgNDAwKTtcbiAgfVxuXG4gIGNvbnN0IHJlY29yZCA9IGF3YWl0IHByaXNtYS5wYXNzd29yZFJlc2V0VG9rZW4uZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHsgdG9rZW4gfSxcbiAgICBpbmNsdWRlOiB7IHVzZXI6IHRydWUgfSxcbiAgfSk7XG5cbiAgaWYgKCFyZWNvcmQpIHtcbiAgICB0aHJvdyBuZXcgTm90Rm91bmRFcnJvcihcIlJlc2V0IHRva2VuIG5vdCBmb3VuZFwiKTtcbiAgfVxuXG4gIGlmIChyZWNvcmQudXNlZEF0KSB7XG4gICAgdGhyb3cgbmV3IEFwcEVycm9yKFwiUmVzZXQgdG9rZW4gYWxyZWFkeSB1c2VkXCIsIDQwMCk7XG4gIH1cblxuICBpZiAocmVjb3JkLmV4cGlyZXNBdC5nZXRUaW1lKCkgPCBEYXRlLm5vdygpKSB7XG4gICAgdGhyb3cgbmV3IEFwcEVycm9yKFwiUmVzZXQgdG9rZW4gZXhwaXJlZFwiLCA0MDApO1xuICB9XG5cbiAgLy8gQ2hlY2sgaWYgdGhlIHVzZXIgc3RpbGwgZXhpc3RzIGFuZCBpcyBhY3RpdmVcbiAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7IGlkOiByZWNvcmQudXNlcklkIH0sXG4gIH0pO1xuXG4gIGlmICghdXNlcikge1xuICAgIHRocm93IG5ldyBOb3RGb3VuZEVycm9yKFwiVXNlciBhY2NvdW50IG5vdCBmb3VuZFwiKTtcbiAgfVxuXG4gIGlmICghdXNlci5pc0FjdGl2ZSkge1xuICAgIHRocm93IG5ldyBBcHBFcnJvcihcIlRoaXMgYWNjb3VudCBoYXMgYmVlbiBkZWFjdGl2YXRlZFwiLCA0MDMpO1xuICB9XG5cbiAgY29uc3QgcGFzc3dvcmRIYXNoID0gYXdhaXQgaGFzaFBhc3N3b3JkKG5ld1Bhc3N3b3JkKTtcblxuICAvLyBVcGRhdGUgdGhlIHVzZXIncyBwYXNzd29yZCBhbmQgbWFyayB0aGUgdG9rZW4gYXMgdXNlZCBpbiBhIHRyYW5zYWN0aW9uXG4gIGF3YWl0IHByaXNtYS4kdHJhbnNhY3Rpb24oW1xuICAgIHByaXNtYS51c2VyLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogcmVjb3JkLnVzZXJJZCB9LFxuICAgICAgZGF0YTogeyBwYXNzd29yZEhhc2ggfSxcbiAgICB9KSxcbiAgICBwcmlzbWEucGFzc3dvcmRSZXNldFRva2VuLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogcmVjb3JkLmlkIH0sXG4gICAgICBkYXRhOiB7IHVzZWRBdDogbmV3IERhdGUoKSB9LFxuICAgIH0pLFxuICBdKTtcblxuICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH0gYXMgY29uc3Q7XG59O1xuIl0sIm5hbWVzIjpbImNyeXB0byIsInByaXNtYSIsImVudiIsInNlbmRTbXMiLCJzZW5kUGFzc3dvcmRSZXNldEVtYWlsIiwiQXBwRXJyb3IiLCJOb3RGb3VuZEVycm9yIiwiVXNlck1vZGVsIiwiaGFzaFBhc3N3b3JkIiwiUkVTRVRfVE9LRU5fVFRMX01JTlVURVMiLCJFTUFJTF9CQVNFRF9ST0xFUyIsIlNNU19CQVNFRF9ST0xFUyIsImJ1aWxkUmVzZXRMaW5rIiwidG9rZW4iLCJiYXNlVXJsIiwiUFJJTUFSWV9PUklHSU4iLCJlbmNvZGVVUklDb21wb25lbnQiLCJnZW5lcmF0ZVJlc2V0VG9rZW4iLCJyYW5kb21CeXRlcyIsInRvU3RyaW5nIiwic2VuZFJlc2V0VmlhU21zIiwicGhvbmVOdW1iZXIiLCJleHBpcmVzSW5NaW51dGVzIiwiU01TX0FQSV9LRVkiLCJsaW5rIiwibWVzc2FnZSIsImpvaW4iLCJ0byIsInNtc0Vycm9yIiwiY29uc29sZSIsImVycm9yIiwic2VuZFJlc2V0VmlhRW1haWwiLCJlbWFpbCIsIkdNQUlMX1VTRVIiLCJHTUFJTF9BUFBfUEFTU1dPUkQiLCJyZXF1ZXN0UGFzc3dvcmRSZXNldCIsIm5hdGlvbmFsSWQiLCJ1c2VyIiwiZmluZEJ5TmF0aW9uYWxJZCIsImZpbmRCeUVtYWlsIiwic3VjY2VzcyIsImV4cGlyZXNBdCIsIkRhdGUiLCJub3ciLCJwYXNzd29yZFJlc2V0VG9rZW4iLCJjcmVhdGUiLCJkYXRhIiwidXNlcklkIiwiaWQiLCJpc0FkbWluIiwiaW5jbHVkZXMiLCJyb2xlIiwiaXNNZW1iZXIiLCJkZWxldGVNYW55Iiwid2hlcmUiLCJjb25maXJtUGFzc3dvcmRSZXNldCIsIm5ld1Bhc3N3b3JkIiwibGVuZ3RoIiwicmVjb3JkIiwiZmluZFVuaXF1ZSIsImluY2x1ZGUiLCJ1c2VkQXQiLCJnZXRUaW1lIiwiaXNBY3RpdmUiLCJwYXNzd29yZEhhc2giLCIkdHJhbnNhY3Rpb24iLCJ1cGRhdGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/services/passwordReset.service.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/twilio","vendor-chunks/semver","vendor-chunks/next","vendor-chunks/nodemailer","vendor-chunks/xmlbuilder","vendor-chunks/jsonwebtoken","vendor-chunks/asynckit","vendor-chunks/math-intrinsics","vendor-chunks/zod","vendor-chunks/es-errors","vendor-chunks/qs","vendor-chunks/jws","vendor-chunks/call-bind-apply-helpers","vendor-chunks/debug","vendor-chunks/https-proxy-agent","vendor-chunks/get-proto","vendor-chunks/scmp","vendor-chunks/object-inspect","vendor-chunks/mime-db","vendor-chunks/has-symbols","vendor-chunks/gopd","vendor-chunks/function-bind","vendor-chunks/form-data","vendor-chunks/follow-redirects","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/dayjs","vendor-chunks/bcryptjs","vendor-chunks/agent-base","vendor-chunks/axios","vendor-chunks/url-parse","vendor-chunks/supports-color","vendor-chunks/side-channel","vendor-chunks/side-channel-weakmap","vendor-chunks/side-channel-map","vendor-chunks/side-channel-list","vendor-chunks/safe-buffer","vendor-chunks/requires-port","vendor-chunks/querystringify","vendor-chunks/proxy-from-env","vendor-chunks/ms","vendor-chunks/mime-types","vendor-chunks/lodash.once","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isplainobject","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isinteger","vendor-chunks/lodash.isboolean","vendor-chunks/lodash.includes","vendor-chunks/jwa","vendor-chunks/hasown","vendor-chunks/has-tostringtag","vendor-chunks/has-flag","vendor-chunks/get-intrinsic","vendor-chunks/es-set-tostringtag","vendor-chunks/es-object-atoms","vendor-chunks/es-define-property","vendor-chunks/dunder-proto","vendor-chunks/delayed-stream","vendor-chunks/combined-stream","vendor-chunks/call-bound","vendor-chunks/buffer-equal-constant-time"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2Fpassword-reset%2Frequest%2Froute&page=%2Fapi%2Fauth%2Fpassword-reset%2Frequest%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2Fpassword-reset%2Frequest%2Froute.ts&appDir=%2FVolumes%2FMacintosh%20HD%20-%20Data%2Fsda%2Fsda-backend%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FVolumes%2FMacintosh%20HD%20-%20Data%2Fsda%2Fsda-backend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();